(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10912016"],{"26ef":function(e,t,n){},a1fc:function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("7a23"),r={class:"driver-setup",style:{display:"inline-block"}},l={key:2,class:"permission-tip"},o={class:"driver-type-title"};function a(e,t,n,a,i,u){var d=Object(c["resolveComponent"])("emqx-button"),b=Object(c["resolveComponent"])("emqx-option"),s=Object(c["resolveComponent"])("emqx-select"),h=Object(c["resolveComponent"])("emqx-col"),O=Object(c["resolveComponent"])("emqx-row"),j=Object(c["resolveComponent"])("emqx-input"),p=Object(c["resolveComponent"])("emqx-form-item"),f=Object(c["resolveComponent"])("el-input-number"),m=Object(c["resolveComponent"])("emqx-form"),v=Object(c["resolveComponent"])("emqx-table-column"),V=Object(c["resolveComponent"])("emqx-table"),y=Object(c["resolveComponent"])("el-dialog");return Object(c["openBlock"])(),Object(c["createBlock"])("div",r,[Object(c["createVNode"])(d,{onClick:t[1]||(t[1]=function(e){return i.dialogTableVisible=!0})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(""===e.driverData.chdv?e.$t("configuration.newDriver"):e.$t("configuration.editDriver")),1)]})),_:1}),Object(c["createVNode"])(y,{title:e.$t("configuration.driverSetup"),onClosed:u.close,modelValue:i.dialogTableVisible,"onUpdate:modelValue":t[19]||(t[19]=function(e){return i.dialogTableVisible=e}),"z-index":2e3},{footer:Object(c["withCtx"])((function(){return[Object(c["createVNode"])("span",null,[Object(c["createVNode"])(d,{onClick:u.submit},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$t("common.submit")),1)]})),_:1},8,["onClick"])])]})),default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])("h3",null,Object(c["toDisplayString"])(e.$t("configuration.northServiceProtocolName")),1),Object(c["createVNode"])(O,{class:"type-row",gutter:20,type:"flex",align:"middle"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(h,{span:12},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{modelValue:i.north,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.north=e})},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(u.northDriverList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:e.val,label:e.label,value:e.val},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createVNode"])(h,{span:12},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])("div",null,Object(c["toDisplayString"])(u.northDriverType),1)]})),_:1})]})),_:1}),Object(c["createVNode"])(O,{class:"edit-drivers-row",gutter:20},{default:Object(c["withCtx"])((function(){return["Ethernet drivers"===u.northDriverType?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:0},[Object(c["createVNode"])(h,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])("h3",null,"Ethernet "+Object(c["toDisplayString"])(e.$t("configuration.driverSetup")),1)]})),_:1}),Object(c["createVNode"])(h,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{ref:"driverSetupForm","label-width":"80px","label-position":"left"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(h,{span:12},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,{label:"Host name"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(j,{modelValue:i.chnl[1].tcph,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.chnl[1].tcph=e})},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(c["createVNode"])(h,{span:12},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,{label:"Port no"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(f,{modelValue:i.chnl[1].tcpp,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.chnl[1].tcpp=e}),controls:!1,precision:0,min:0},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1},512)]})),_:1})],64)):"Serial drivers"===u.northDriverType?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:1},[Object(c["createVNode"])(h,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])("h3",null,"Serial "+Object(c["toDisplayString"])(e.$t("configuration.driverSetup")),1)]})),_:1}),Object(c["createVNode"])(h,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{ref:"driverSetupForm","label-width":"100px",model:i.chnl[1]},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,{label:"Device name"},{default:Object(c["withCtx"])((function(){return["rs232"!==i.north?(Object(c["openBlock"])(),Object(c["createBlock"])(j,{key:0,modelValue:i.chnl[1].ttyc,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.chnl[1].ttyc=e})},null,8,["modelValue"])):(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:1,class:{"error-permission":-1===i.fdrw},modelValue:i.chnl[1].ttyc,"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.chnl[1].ttyc=e}),onChange:u.handleTtycChange},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.rs232Options,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:t,label:e.name,value:e.name},null,8,["label","value"])})),128))]})),_:1},8,["class","modelValue","onChange"])),-1===i.fdrw?(Object(c["openBlock"])(),Object(c["createBlock"])("p",l,Object(c["toDisplayString"])(e.$t("configuration.noPermissions")),1)):Object(c["createCommentVNode"])("",!0)]})),_:1}),Object(c["createVNode"])(p,{label:"Baud rate"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{modelValue:i.chnl[1].ttyb,"onUpdate:modelValue":t[7]||(t[7]=function(e){return i.chnl[1].ttyb=e})},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.ttybList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createVNode"])(p,{label:"Data bit"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{modelValue:i.chnl[1].ttyd,"onUpdate:modelValue":t[8]||(t[8]=function(e){return i.chnl[1].ttyd=e})},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.ttydList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createVNode"])(p,{label:"Stop bit"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{modelValue:i.chnl[1].ttys,"onUpdate:modelValue":t[9]||(t[9]=function(e){return i.chnl[1].ttys=e})},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.ttysList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createVNode"])(p,{label:"Parity bit"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{modelValue:i.chnl[1].ttyp,"onUpdate:modelValue":t[10]||(t[10]=function(e){return i.chnl[1].ttyp=e})},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.ttypList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1})],64)):Object(c["createCommentVNode"])("",!0),"Serial drivers"===u.northDriverType||"Ethernet drivers"===u.northDriverType?(Object(c["openBlock"])(),Object(c["createBlock"])(h,{key:2,span:24},{default:Object(c["withCtx"])((function(){return[i.chnl[1].parm&&i.chnl[1].parm.length?(Object(c["openBlock"])(),Object(c["createBlock"])(V,{key:0,class:"script-table",data:i.chnl[1].parm},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(v,{label:"Vars",prop:"vars"}),Object(c["createVNode"])(v,{label:"Pars",prop:"pars","min-width":"180px"},{default:Object(c["withCtx"])((function(e){return[Object(c["createVNode"])(j,{type:"PASSWORD"===e.row.vars?"password":"",size:"mini",modelValue:e.row.pars,"onUpdate:modelValue":function(t){return e.row.pars=t}},null,8,["type","modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1},8,["data"])):Object(c["createCommentVNode"])("",!0)]})),_:1})):Object(c["createCommentVNode"])("",!0)]})),_:1}),Object(c["createVNode"])("h3",o,Object(c["toDisplayString"])(e.$t("configuration.driverProtocolName")),1),Object(c["createVNode"])(O,{class:"type-row",gutter:20,type:"flex",align:"middle"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(h,{span:12},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{modelValue:i.chdv,"onUpdate:modelValue":t[11]||(t[11]=function(e){return i.chdv=e})},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(u.southDriverList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:e.val,label:e.label,value:e.val},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createVNode"])(h,{span:12},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])("div",null,Object(c["toDisplayString"])(u.southDriverType),1)]})),_:1})]})),_:1}),Object(c["createVNode"])(O,{class:"edit-drivers-row",gutter:20},{default:Object(c["withCtx"])((function(){return["Ethernet drivers"===u.southDriverType?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:0},[Object(c["createVNode"])(h,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])("h3",null,"Ethernet "+Object(c["toDisplayString"])(e.$t("configuration.driverSetup")),1)]})),_:1}),Object(c["createVNode"])(h,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{ref:"driverSetupForm","label-width":"80px","label-position":"left"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(h,{span:12},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,{label:"Host name"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(j,{modelValue:i.chnl[0].tcph,"onUpdate:modelValue":t[12]||(t[12]=function(e){return i.chnl[0].tcph=e})},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(c["createVNode"])(h,{span:12},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,{label:"Port no"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(f,{modelValue:i.chnl[0].tcpp,"onUpdate:modelValue":t[13]||(t[13]=function(e){return i.chnl[0].tcpp=e}),controls:!1,precision:0,min:0},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1},512)]})),_:1})],64)):"Serial drivers"===u.southDriverType?(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:1},[Object(c["createVNode"])(h,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])("h3",null,"Serial "+Object(c["toDisplayString"])(e.$t("configuration.driverSetup")),1)]})),_:1}),Object(c["createVNode"])(h,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{ref:"driverSetupForm","label-width":"100px",model:i.chnl[0]},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,{label:"Device name"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(j,{modelValue:i.chnl[0].ttyc,"onUpdate:modelValue":t[14]||(t[14]=function(e){return i.chnl[0].ttyc=e})},null,8,["modelValue"])]})),_:1}),Object(c["createVNode"])(p,{label:"Baud rate"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{modelValue:i.chnl[0].ttyb,"onUpdate:modelValue":t[15]||(t[15]=function(e){return i.chnl[0].ttyb=e})},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.ttybList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createVNode"])(p,{label:"Data bit"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{modelValue:i.chnl[0].ttyd,"onUpdate:modelValue":t[16]||(t[16]=function(e){return i.chnl[0].ttyd=e})},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.ttydList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createVNode"])(p,{label:"Stop bit"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{modelValue:i.chnl[0].ttys,"onUpdate:modelValue":t[17]||(t[17]=function(e){return i.chnl[0].ttys=e})},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.ttysList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createVNode"])(p,{label:"Parity bit"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{modelValue:i.chnl[0].ttyp,"onUpdate:modelValue":t[18]||(t[18]=function(e){return i.chnl[0].ttyp=e})},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.ttypList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1})],64)):Object(c["createCommentVNode"])("",!0),"Serial drivers"===u.southDriverType||"Ethernet drivers"===u.southDriverType?(Object(c["openBlock"])(),Object(c["createBlock"])(h,{key:2,span:24},{default:Object(c["withCtx"])((function(){return[i.chnl[0].parm&&i.chnl[0].parm.length?(Object(c["openBlock"])(),Object(c["createBlock"])(V,{key:0,class:"script-table",data:i.chnl[0].parm},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(v,{label:"Vars",prop:"vars"}),Object(c["createVNode"])(v,{label:"Pars",prop:"pars","min-width":"180px"},{default:Object(c["withCtx"])((function(e){return[Object(c["createVNode"])(j,{size:"mini",modelValue:e.row.pars,"onUpdate:modelValue":function(t){return e.row.pars=t}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1},8,["data"])):Object(c["createCommentVNode"])("",!0)]})),_:1})):Object(c["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["title","onClosed","modelValue"])])}function i(e){if(Array.isArray(e))return e}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function u(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var c,r,l=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(c=n.next()).done);o=!0)if(l.push(c.value),t&&l.length===t)break}catch(i){a=!0,r=i}finally{try{o||null==n["return"]||n["return"]()}finally{if(a)throw r}}return l}}var d=n("06c5");function b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||u(e,t)||Object(d["a"])(e,t)||b()}var h=n("5530"),O=(n("7db0"),n("4de4"),n("5502")),j=n("7e1e"),p=n("3fd4"),f={components:{ElDialog:p["ElDialog"],ElInputNumber:p["ElInputNumber"]},data:function(){return{dialogTableVisible:!1,chdv:"",north:"",paramDriverType:"",ttybList:[4800,9600,19200,38400,57600,115200],ttydList:[5,6,7,8],ttysList:["1","1.5","2"],ttypList:[{value:"E",label:"Even"},{value:"O",label:"Odd"},{value:"N",label:"None"}],chnl:[],rs232Options:[],fdrw:0}},computed:Object(h["a"])(Object(h["a"])({},Object(O["d"])({driverData:function(e){return e.SetUpData.driverData}})),{},{southDriverType:function(){var e=this,t=this.southDriverList.find((function(t){return t.val===e.chdv}));return t?t.type:""},southDriverList:function(){return this.$store.state.Device.southDriverList},northDriverType:function(){var e=this,t=this.northDriverList.find((function(t){return t.val===e.north}));return t?t.type:""},northDriverList:function(){return this.$store.state.Device.northDriverList},nodeId:function(){return this.$route.params.serviceId}}),watch:{chdv:function(e){if(this.dialogTableVisible){var t=s(this.chnl,2),n=(t[0],t[1]);this.chnl=[{chdv:e,tcph:"",tcpp:0,ttyc:"",ttyb:9600,ttyd:8,ttys:"1",ttyp:"N",parm:[]},n],this.paramDriverType="south",this.getDriverParams(e)}},north:function(e){if(this.dialogTableVisible){var t=s(this.chnl,1),n=t[0];this.chnl=[n,{chdv:e,tcph:"",tcpp:0,ttyc:"",ttyb:9600,ttyd:8,ttys:"1",ttyp:"N",parm:[]}],this.paramDriverType="north",this.getDriverParams(e),this.getDeviceList(e)}},dialogTableVisible:function(e){e&&this.init()}},created:function(){this.init(),this.getDeviceList(this.north)},methods:Object(h["a"])(Object(h["a"])({},Object(O["c"])({setDriverData:"setDriverData"})),{},{submit:function(){this.dialogTableVisible=!1;var e=[],t=["ethip","mbstcp","mele71","finstc","s7iso","siefw","tsxmbt","mbstcp","mbsrot","bacnip","opcua","i61850","snmpd","g26875"];e=-1!==t.indexOf(this.chdv)&&-1!==t.indexOf(this.north)?this.chnl.filter((function(e){return e.tcph&&(""!==e.tcpp||void 0!==e.tcpp)})):this.chnl,e[0].chdv=this.chdv,e[1].chdv=this.north,this.setDriverData({chdv:this.chdv,chnl:e})},close:function(){this.$nextTick(this.init)},getDriverParams:function(e){var t=this;Object(j["b"])(this.nodeId,{func:24,drvn:e,wtrm:"neruon"}).then((function(e){t.setParams(e.data)}))},setParams:function(e){if(24===e.func&&!e.errc){var t="south"===this.paramDriverType?0:1;this.chnl[t].parm=e.parm}},init:function(){var e=this.driverData,t=e.chdv,n=e.chnl;this.chdv=t,n.length?(this.chnl=n,this.chdv&&(this.north=this.chnl[1].chdv)):this.chnl=[{chdv:"",tcph:"",tcpp:0,ttyc:"",ttyb:9600,ttyd:8,ttys:"1",ttyp:"N",parm:[]},{chdv:"",tcph:"",tcpp:0,ttyc:"",ttyb:9600,ttyd:8,ttys:"1",ttyp:"N",parm:[]}]},setDeviceList:function(e){26===e.func&&(this.rs232Options=e.rows)},getDeviceList:function(e){var t=this;"rs232"===e&&Object(j["b"])(this.nodeId,{func:26,wtrm:"neuron"}).then((function(e){t.setDeviceList(e.data)}))},handleTtycChange:function(e){var t=this.rs232Options.find((function(t){return t.name===e})),n=t.fdrw;this.fdrw=n}})};n("e320");f.render=a;t["default"]=f},e320:function(e,t,n){"use strict";n("26ef")}}]);