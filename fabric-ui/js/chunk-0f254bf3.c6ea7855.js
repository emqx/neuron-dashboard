(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f254bf3","chunk-3e83dddf"],{"0ba3":function(e,t,n){"use strict";n("3ab6")},"1b62":function(e,t,n){"use strict";t["a"]={computed:{maxTableHeight:function(){return window.innerHeight-280}}}},"1f9c":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a=Object(r["withScopeId"])("data-v-42e60556");Object(r["pushScopeId"])("data-v-42e60556");var i={class:"row flex"},o=Object(r["createTextVNode"])("Yes"),c=Object(r["createTextVNode"])("No"),u=Object(r["createTextVNode"])("Yes"),l=Object(r["createTextVNode"])("No"),d=Object(r["createTextVNode"])("R"),b=Object(r["createTextVNode"])("W"),s=Object(r["createTextVNode"])("RW"),f={class:"dialog-footer"},m={class:"dialog-footer"};Object(r["popScopeId"])();var p=a((function(e,t,n,p,j,h){var O=Object(r["resolveComponent"])("emqx-breadcrumb-item"),g=Object(r["resolveComponent"])("emqx-breadcrumb"),V=Object(r["resolveComponent"])("emqx-button"),S=Object(r["resolveComponent"])("AttributeTable"),v=Object(r["resolveComponent"])("emqx-input"),N=Object(r["resolveComponent"])("emqx-form-item"),A=Object(r["resolveComponent"])("emqx-option"),w=Object(r["resolveComponent"])("emqx-select"),C=Object(r["resolveComponent"])("el-input-number"),x=Object(r["resolveComponent"])("el-radio"),y=Object(r["resolveComponent"])("el-radio-group"),k=Object(r["resolveComponent"])("emqx-form"),D=Object(r["resolveComponent"])("el-dialog"),_=Object(r["resolveComponent"])("emqx-table-column"),T=Object(r["resolveComponent"])("emqx-table"),F=Object(r["resolveComponent"])("Container");return Object(r["openBlock"])(),Object(r["createBlock"])(F,{class:"attribute-setup",type:"card-full",scorll:!1},{default:a((function(){return[Object(r["createVNode"])("div",i,[Object(r["createVNode"])(g,{"separator-class":"el-icon-arrow-right"},{default:a((function(){return[Object(r["createVNode"])(O,{to:{name:"Configuration-objectSetup"}},{default:a((function(){return[Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(e.$t("configuration.objectSetup")),1)]})),_:1}),Object(r["createVNode"])(O,null,{default:a((function(){return[Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(e.$t("configuration.attributeSetup")),1)]})),_:1})]})),_:1}),Object(r["createVNode"])("div",null,[Object(r["createVNode"])(V,{onClick:t[1]||(t[1]=function(e){return j.dialogTableVisible=!0}),type:"primary"},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("common.create")),1)]})),_:1}),Object(r["createVNode"])(V,{onClick:t[2]||(t[2]=function(e){return h.onDelete(null)}),disabled:!j.multipleSelection.length,type:"danger"},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("common.delete")),1)]})),_:1},8,["disabled"]),Object(r["createVNode"])(V,{onClick:t[3]||(t[3]=function(t){return e.$router.go(-1)})},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("common.save")),1)]})),_:1})])]),Object(r["createVNode"])("div",null,[Object(r["createVNode"])(S,{ref:"attributeTable",modelValue:j.multipleSelection,"onUpdate:modelValue":t[4]||(t[4]=function(e){return j.multipleSelection=e}),attributeList:j.attributeList,showBtn:!0,objectName:j.objn,onAdd:h.addAddress,onEdit:h.editAddress,onDummy:h.onDummy,onDelete:h.onDelete},null,8,["modelValue","attributeList","objectName","onAdd","onEdit","onDummy","onDelete"])]),Object(r["createVNode"])(D,{title:e.$t("configuration.dataAttributeSetup"),modelValue:j.dialogTableVisible,"onUpdate:modelValue":t[12]||(t[12]=function(e){return j.dialogTableVisible=e}),onClosed:h.close},{footer:a((function(){return[Object(r["createVNode"])("span",f,[Object(r["createVNode"])(V,{onClick:h.submitAttributeSetupFrom},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("common.submit")),1)]})),_:1},8,["onClick"])])]})),default:a((function(){return[Object(r["createVNode"])(k,{ref:"AttributeSetupForm",model:j.AttributeSetupForm,rules:j.AttributeSetupFormRules,"label-width":"120px"},{default:a((function(){return[Object(r["createVNode"])(N,{label:e.$t("common.name"),prop:"attn"},{default:a((function(){return[Object(r["createVNode"])(v,{modelValue:j.AttributeSetupForm.attn,"onUpdate:modelValue":t[5]||(t[5]=function(e){return j.AttributeSetupForm.attn=e}),disabled:j.isEdit},null,8,["modelValue","disabled"])]})),_:1},8,["label"]),Object(r["createVNode"])(N,{label:e.$t("common.type"),prop:"attn"},{default:a((function(){return[Object(r["createVNode"])(w,{modelValue:j.AttributeSetupForm.attt,"onUpdate:modelValue":t[6]||(t[6]=function(e){return j.AttributeSetupForm.attt=e})},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(j.AttributeTypeList,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(A,{key:e.val,label:e.val,value:e.val},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1},8,["label"]),h.showDecimal?(Object(r["openBlock"])(),Object(r["createBlock"])(N,{key:0,label:"Decimal",prop:"deci"},{default:a((function(){return[Object(r["createVNode"])(C,{modelValue:j.AttributeSetupForm.deci,"onUpdate:modelValue":t[7]||(t[7]=function(e){return j.AttributeSetupForm.deci=e}),controls:!1,precision:0,min:0},null,8,["modelValue"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(N,{label:"Visible",prop:"adis"},{default:a((function(){return[Object(r["createVNode"])(y,{modelValue:j.AttributeSetupForm.adis,"onUpdate:modelValue":t[8]||(t[8]=function(e){return j.AttributeSetupForm.adis=e})},{default:a((function(){return[Object(r["createVNode"])(x,{label:1},{default:a((function(){return[o]})),_:1}),Object(r["createVNode"])(x,{label:0},{default:a((function(){return[c]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(N,{label:"Change",prop:"achg"},{default:a((function(){return[Object(r["createVNode"])(y,{modelValue:j.AttributeSetupForm.achg,"onUpdate:modelValue":t[9]||(t[9]=function(e){return j.AttributeSetupForm.achg=e})},{default:a((function(){return[Object(r["createVNode"])(x,{label:1},{default:a((function(){return[u]})),_:1}),Object(r["createVNode"])(x,{label:0},{default:a((function(){return[l]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(N,{label:"Direction",prop:"attr"},{default:a((function(){return[Object(r["createVNode"])(y,{modelValue:j.AttributeSetupForm.attr,"onUpdate:modelValue":t[10]||(t[10]=function(e){return j.AttributeSetupForm.attr=e})},{default:a((function(){return[Object(r["createVNode"])(x,{label:"R"},{default:a((function(){return[d]})),_:1}),Object(r["createVNode"])(x,{label:"W"},{default:a((function(){return[b]})),_:1}),Object(r["createVNode"])(x,{label:"RW"},{default:a((function(){return[s]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),h.showReadTime?(Object(r["openBlock"])(),Object(r["createBlock"])(N,{key:1,label:"Read time",prop:"rtim"},{default:a((function(){return[Object(r["createVNode"])(C,{modelValue:j.AttributeSetupForm.rtim,"onUpdate:modelValue":t[11]||(t[11]=function(e){return j.AttributeSetupForm.rtim=e}),controls:!1,precision:0,min:0},null,8,["modelValue"])]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue","onClosed"]),Object(r["createVNode"])(D,{title:e.$t("configuration.dataAddrSetup"),onClosed:h.addressClosed,modelValue:j.addressVisible,"onUpdate:modelValue":t[13]||(t[13]=function(e){return j.addressVisible=e})},{footer:a((function(){return[Object(r["createVNode"])("span",m,[Object(r["createVNode"])(V,{onClick:h.addressSubmit,type:"primary"},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("common.submit")),1)]})),_:1},8,["onClick"])])]})),default:a((function(){return[Object(r["createVNode"])(T,{data:j.preAndSuff,class:"dd-mb"},{default:a((function(){return[Object(r["createVNode"])(_,{label:e.$t("status.index"),width:j.minWidth},{default:a((function(e){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.row.obix+1),1)]})),_:1},8,["label","width"]),Object(r["createVNode"])(_,{prop:"pref",width:j.minWidth,label:e.$t("configuration.prefix")},null,8,["width","label"]),Object(r["createVNode"])(_,{label:e.$t("configuration.suffix"),width:j.minWidth,prop:"suff"},null,8,["label","width"]),Object(r["createVNode"])(_,{label:e.$t("configuration.address")},{default:a((function(e){return[Object(r["createVNode"])(v,{modelValue:e.row.addr,"onUpdate:modelValue":function(t){return e.row.addr=t},size:"mini"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1},8,["label"])]})),_:1},8,["data"])]})),_:1},8,["title","onClosed","modelValue"])]})),_:1})})),j=n("1da1"),h=n("2909"),O=n("5530"),g=(n("96cf"),n("c740"),n("d3b7"),n("159b"),n("d81d"),n("4de4"),n("caad"),n("2532"),n("ed08")),V=n("f121"),S=n("5502"),v=n("a921"),N=n("3fd4"),A=n("7e28"),w=n("d472"),C={name:"AttributeSetup",components:{ElDialog:N["ElDialog"],ElRadio:N["ElRadio"],ElInputNumber:N["ElInputNumber"],ElRadioGroup:N["ElRadioGroup"],AttributeTable:v["default"],Container:A["a"]},data:function(){return{minWidth:80,objn:"",preAndSuff:[],dialogTableVisible:!1,isEdit:!1,attributeList:[],AttributeSetupForm:{},AttributeSetupFormRules:{attn:[{required:!0,message:"Please input Name",trigger:"blur"},{max:30,message:"max 30",trigger:"blur"}],attt:[{required:!0,message:"Please select Type",trigger:"blur"}],deci:[{required:!0,message:"Please input Decimal",trigger:"blur"}],adis:[{required:!0,message:"Please select Display",trigger:"blur"}],achg:[{required:!0,message:"Please select Change",trigger:"blur"}],attr:[{required:!0,message:"Please select Direction",trigger:"blur"}],rtim:[{required:!0,message:"pleact input Time",trigger:"blur"}]},AttributeTypeList:V["a"],addressVisible:!1,activeAttributeRow:{},multipleSelection:[]}},computed:Object(O["a"])({showDecimal:function(){return this.AttributeSetupForm.attt&&-1!==this.AttributeSetupForm.attt.indexOf("word")},showReadTime:function(){return this.AttributeSetupForm.attr&&"W"!==this.AttributeSetupForm.attr}},Object(S["d"])({objectData:function(e){return e.SetUpData.objectData}})),watch:{"AttributeSetupForm.attt":function(){this.AttributeSetupForm.deci=0}},created:function(){this.init()},methods:Object(O["a"])({close:function(){this.isEdit=!1,this.AttributeSetupForm={},this.preAndSuff=[]},addressClosed:function(){this.preAndSuff.addr=""},getFullName:function(e,t){return e=e?"".concat(e,"_"):"",t=t?"_".concat(t):"",e+this.objn+t},validataAddr:function(){return this.attributeList.length&&this.attributeList.every((function(e){return!e.aadd.some((function(e){return""===e.addr||void 0===e.addr}))}))},submitAttributeSetupFrom:function(){var e=this;this.$refs.AttributeSetupForm.$refs.form.validate((function(t){if(t){var n=e.AttributeSetupForm,r=n.attr,a=n.rtim;if("W"===r&&void 0===a&&(e.AttributeSetupForm.rtim=0),e.isEdit){var i=e.attributeList.findIndex((function(t){return t.attn===e.AttributeSetupForm.attn}));if(-1!==i){var o=Object(h["a"])(e.attributeList);o[i]=Object(O["a"])(Object(O["a"])({},e.AttributeSetupForm),{},{aadd:Object(g["a"])(e.preAndSuff)}),e.attributeList=o}}else e.attributeList.push(Object(O["a"])(Object(O["a"])({},e.AttributeSetupForm),{},{aadd:Object(g["a"])(e.preAndSuff)}));e.dialogTableVisible=!1,e.AttributeSetupForm={},e.confirmSubmit()}}))},confirmSubmit:function(){var e=arguments,t=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]&&e[0],t.validataAddr()||w["EmqxMessage"].warning(t.$t("configuration.addressRequired")),t.setObjectAttribute({name:t.objn,attributeList:t.attributeList}),r){n.next=6;break}return n.next=6,new Promise((function(e){setTimeout((function(){e()}),1e3)}));case 6:t.$refs.attributeTable.$refs.form&&t.$refs.attributeTable.$refs.form.setData();case 7:case"end":return n.stop()}}),n)})))()},addAddress:function(e){this.activeAttributeRow=e,e.aadd.length&&(this.preAndSuff=Object(g["a"])(e.aadd)),this.addressVisible=!0},editAddress:function(e){this.isEdit=!0,this.AttributeSetupForm=e,this.dialogTableVisible=!0,e.aadd.length&&(this.preAndSuff=Object(g["a"])(e.aadd))},addressSubmit:function(){this.addressVisible=!1,this.$set(this.activeAttributeRow,"aadd",Object(g["a"])(this.preAndSuff)),this.validateAddr(this.activeAttributeRow),this.resetPreAndSuff(),this.confirmSubmit()},validateAddr:function(e){var t=!0;e.aadd.forEach((function(e){"-"!==e.addr&&(t=!1)})),t||"-"!==e.attr||w["EmqxMessage"].warning(this.$t("configuration.rwRequired"))},resetPreAndSuff:function(){this.preAndSuff=this.preAndSuff.map((function(e){return e.addr="",e}))},onDelete:function(e){var t=this,n=[];e?n.push(e):n.push.apply(n,Object(h["a"])(this.multipleSelection)),Object(N["ElMessageBox"])(this.$t("common.confirmDelete"),this.$t("common.delete"),{type:"warning"}).then((function(){var e=n.map((function(e){return e.attn}));t.attributeList=t.attributeList.filter((function(t){return!e.includes(t.attn)})),t.setObjectAttribute({name:t.objn,attributeList:t.attributeList}),setTimeout((function(){t.$refs.attributeTable.$refs.form&&t.$refs.attributeTable.$refs.form.setData()}),1e3)}))},onDummy:function(e){e.attr="-",e.rtim=0,e.aadd.forEach((function(e){return e.addr="-",e}))},init:function(){var e=this,t=this.$route.params.data;t&&(this.objn=t,this.objectData.forEach((function(n){return n.objn!==t||(n.preAndSuff?e.preAndSuff=Object(h["a"])(n.preAndSuff):e.preAndSuff=n.oatt[0].aadd.map((function(e){return{pref:e.pref,obix:e.obix,suff:e.suff,addr:""}})),n.oatt&&(e.attributeList=n.oatt),!1)})))}},Object(S["c"])(["setObjectAttribute"])),beforeRouteLeave:function(e,t,n){this.confirmSubmit(!0),n()},beforeRouteEnter:function(e,t,n){e.params.data?n():n({name:"Configuration-objectSetup"})}};n("0ba3");C.render=p,C.__scopeId="data-v-42e60556";t["default"]=C},"3ab6":function(e,t,n){},5181:function(e,t,n){},a921:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"attribute-table"},i=Object(r["createTextVNode"])("Dummy");function o(e,t,n,o,c,u){var l=Object(r["resolveComponent"])("vxe-table-column"),d=Object(r["resolveComponent"])("emqx-button"),b=Object(r["resolveComponent"])("vxe-table"),s=Object(r["resolveComponent"])("emqx-pagination");return Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[e.maxTableHeight?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0,round:"","show-overflow":"","highlight-hover-row":"","max-height":e.maxTableHeight,"sort-config":{trigger:"cell"},data:c.data,"empty-text":e.$t("common.emptyData"),onCheckboxAll:u.handleSelectionChange,onCheckboxChange:u.handleSelectionChange},{default:Object(r["withCtx"])((function(){return[n.showBtn?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:0,type:"checkbox",width:"55"})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(l,{field:"attn","min-width":80,title:e.$t("common.name")},null,8,["title"]),Object(r["createVNode"])(l,{title:"Object: ".concat(e.$t("configuration.address")),"min-width":"250"},{default:Object(r["withCtx"])((function(e){return[Object(r["createVNode"])("div",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.row.aadd,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"addrs",key:u.getFullName(e.pref,e.suff)},Object(r["toDisplayString"])(u.getFullName(e.pref,e.suff))+": Â  "+Object(r["toDisplayString"])(e.addr),1)})),128))])]})),_:1},8,["title"]),Object(r["createVNode"])(l,{field:"attt",width:c.minWidth,title:e.$t("common.type")},null,8,["width","title"]),Object(r["createVNode"])(l,{field:"deci",width:c.minWidth,title:"Decimal"},null,8,["width"]),Object(r["createVNode"])(l,{field:"adis",width:c.minWidth,title:"Visible"},{default:Object(r["withCtx"])((function(e){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.row.adis?"YES":"NO"),1)]})),_:1},8,["width"]),Object(r["createVNode"])(l,{field:"achg",width:c.minWidth,title:"Change"},{default:Object(r["withCtx"])((function(e){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.row.achg?"YES":"NO"),1)]})),_:1},8,["width"]),Object(r["createVNode"])(l,{field:"attr",width:c.minWidth,title:"RW"},null,8,["width"]),Object(r["createVNode"])(l,{field:"rtim",width:c.minWidth,title:"Rtime"},null,8,["width"]),n.showBtn?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:1,width:250},{default:Object(r["withCtx"])((function(t){return[Object(r["createVNode"])(d,{type:"text",onClick:function(e){return u.handleEdit(t.row)}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("common.edit")),1)]})),_:2},1032,["onClick"]),Object(r["createVNode"])(d,{type:"text",onClick:function(e){return u.addAddress(t.row)}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("configuration.addr")),1)]})),_:2},1032,["onClick"]),Object(r["createVNode"])(d,{type:"text",onClick:function(e){return u.handleDummy(t.row)}},{default:Object(r["withCtx"])((function(){return[i]})),_:2},1032,["onClick"]),Object(r["createVNode"])(d,{type:"text",onClick:function(e){return u.handleDelete(t.row)}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("common.delete")),1)]})),_:2},1032,["onClick"])]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["max-height","data","empty-text","onCheckboxAll","onCheckboxChange"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(s,{"hide-on-single-page":"",background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":c.page,"onUpdate:current-page":t[1]||(t[1]=function(e){return c.page=e}),"page-size":c.pageSize,"onUpdate:page-size":t[2]||(t[2]=function(e){return c.pageSize=e}),"page-sizes":[500,800,1e3],total:c.count,onCurrentChange:u.handlePageChange,onSizeChange:u.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])}var c=n("1b62"),u=n("ed08"),l=n("cf4a"),d={name:"AttributeTable",mixins:[c["a"]],props:{modelValue:{type:Array},showBtn:{type:Boolean,default:!1},attributeList:{type:Array,required:!0},objectName:{type:[String],required:!0}},data:function(){return{minWidth:"90",multipleSelection:[],data:[],count:0,pageSize:500,page:1}},created:function(){this.setData()},methods:{setData:function(){this.count=this.attributeList.length,this.data=Object(l["a"])(this.attributeList,this.pageSize,this.page)},handlePageChange:function(e){this.page=e,this.setData()},handleSizeChange:function(e){this.pageSize=e,this.setData()},addAddress:function(e){this.$emit("add",e)},handleSelectionChange:function(e){var t=e.records;this.multipleSelection=t,this.$emit("input",this.multipleSelection)},getFullName:function(e,t){return e=e?"".concat(e,"_"):"",t=t?"_".concat(t):"",e+this.objectName+t},handleEdit:function(e){this.$emit("edit",Object(u["a"])(e))},handleDummy:function(e){this.$emit("dummy",e)},handleDelete:function(e){this.$emit("delete",Object(u["a"])(e))}}};n("f83f");d.render=o;t["default"]=d},cf4a:function(e,t,n){"use strict";n("fb6a");var r=function(e,t,n){return e.slice((n-1)*t,n*t)};t["a"]=r},f121:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o}));var r=[{val:"word"},{val:"uword"},{val:"dword"},{val:"udword"},{val:"float"},{val:"double"},{val:"bit"}],a=[{val:">"},{val:">="},{val:"=="},{val:"<"},{val:"<="},{val:"!="},{val:"&"},{val:"^"},{val:"|"}],i=[{val:"critical"},{val:"alarm"},{val:"warning"},{val:"event"},{val:"view"}],o=[{val:"COMMENT"},{val:"DECLARE"},{val:"INIT"},{val:"DO"},{val:"IF"},{val:"THEN"},{val:"ELSE IF"},{val:"ELSE"},{val:"POS"}]},f83f:function(e,t,n){"use strict";n("5181")}}]);