(window["webpackJsonp_eKuiper"]=window["webpackJsonp_eKuiper"]||[]).push([["chunk-6b90ab99"],{1e3:function(e,t,n){"use strict";n("107c")},"107c":function(e,t,n){},"14e2":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{"class-name":"confkey-modal--view view-form modal-view-for-neuronEx",title:e.modalTitle,width:650,"mask-closable":!1},on:{"on-visible-change":e.closeModal},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("Form",{ref:"confKeyFormRef",attrs:{model:e.confKeyForm}},[n("Row",[n("i-col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("common.name"),prop:"name",required:!e.isDetail}},[n("i-input",{attrs:{size:"large",disabled:e.isEdit||e.isDetail},model:{value:e.confKeyForm.name,callback:function(t){e.$set(e.confKeyForm,"name",t)},expression:"confKeyForm.name"}})],1),e.type?e._e():n("FormItem",{attrs:{label:e.$t("common.type"),prop:"confKeyType",required:!e.isDetail}},[n("ConfKeyTypesSeletor",{attrs:{category:e.category,disabled:e.isEdit||e.isDetail},on:{onChange:e.changeConfKeyType},model:{value:e.confKeyForm.confKeyType,callback:function(t){e.$set(e.confKeyForm,"confKeyType",t)},expression:"confKeyForm.confKeyType"}})],1)],1)],1)],1),n("PropertyForm",{ref:"propertyFormRef",attrs:{from:"sources",type:e.confKeyType,properties:e.confKeyProperties.default,form:e.propertiesForm,modalVisible:e.visible,sameLevelFormValid:e.sameLevelFormValid}}),e.isCanAdvanced?n("section",[n("SinkBaseForm",{ref:"advanceFormRef",attrs:{type:e.confKeyType,form:e.advanceForm},on:{changeConnectionSelector:e.changeConnectionSelector}})],1):e._e(),!e.isCanAdvanced&&e.isShowConnectionSelector?n("Form",{attrs:{model:e.confKeyForm}},[n("Row",[n("i-col",{attrs:{span:"12"}},[e.isCanConnection?n("FormItem",{attrs:{label:e.$t("configuration.connectionSelector")}},[n("ConnectionSelector",{attrs:{type:e.confKeyType},on:{onChange:e.changeConnectionSelector},model:{value:e.confKeyForm.connectionSelector,callback:function(t){e.$set(e.confKeyForm,"connectionSelector",t)},expression:"confKeyForm.connectionSelector"}})],1):e._e()],1)],1)],1):e._e(),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:e.closeModal}},[e._v(e._s(e.$t("common.cancel")))]),n("Button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("common.submit")))]),n("Button",{staticClass:"btn-test-connection",attrs:{type:"primary",ghost:"",loading:e.isLoadingTest},on:{click:function(t){return e.submit("testConnection")}}},[e._v(" "+e._s(e.$t("common.testConnection"))+" ")])],1)],1)},r=[],o=n("a34a"),c=n.n(o),i=n("724c"),s=n("7d99"),l=n("75f3"),d=n("40ee"),u=n("e2635"),m=n("a5ff"),p=n("92ad"),f=n("c9d9"),h=["omitIfEmpty","sendSingle","format","schemaName","schemaMessage","delimiter","dataTemplate","concurrency","bufferLength","enableCache","memoryCacheThreshold","maxDiskCache","cleanCacheAtStop","bufferPageSize","resendInterval","runAsync","connectionSelector"],y=["connectionSelector"],b=["name"],v=["connectionSelector","delimited"];function g(e,t){if(null==e)return{};var n,a,r=C(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}function S(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(l){return void n(l)}i.done?t(s):Promise.resolve(s).then(a,r)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){S(o,a,r,c,i,"next",e)}function i(e){S(o,a,r,c,i,"throw",e)}c(void 0)}))}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I={name:"ConfKeyPeopertiesModal",components:{ConfKeyTypesSeletor:d["a"],PropertyForm:l["a"],SinkBaseForm:u["a"],ConnectionSelector:m["a"]},props:{category:{type:String,default:f["a"]},type:{type:String,default:""},confKeyName:{type:String,default:""},modalVisible:{type:Boolean,default:!1},isDetail:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},isCanAdvanced:{type:Boolean,default:!1},isShowConnectionSelector:{type:Boolean,default:!1},title:{type:String,default:""}},mixins:[i["a"]],data:function(){return{RESOURCE_TYPE:f["d"],loading:!1,allConfKeysData:{},confKeyForm:{name:"",confKeyType:"",connectionSelector:""},confKeyProperties:{default:[]},propertiesForm:{},advanceForm:{},isLoadingTest:!1,sameLevelFormValid:!1}},computed:{visible:{get:function(){return this.modalVisible},set:function(e){this.$emit("update:modalVisible",e)}},confKeyType:function(){return this.type||this.confKeyForm.confKeyType},modalTitle:function(){return this.title?this.title:this.isEdit?this.$t("configuration.editConfKey"):this.$t("configuration.addConfKey")},isCanConnection:function(){return["mqtt","edgex"].includes(this.confKeyType)}},watch:{modalVisible:{immediate:!0,handler:function(e){e&&this.type&&this.getFormData()}}},methods:{changeConfKeyType:function(e){e&&this.getFormData()},changeConnectionSelector:function(e){var t=this,n={nodeID:this.nodeID,name:this.confKeyType};Object(s["g"])("connections",n).then((function(n){var a=n.data,r=a[e];t.propertiesForm=$($({},t.propertiesForm),r)}))},getFormData:function(){var e=this;return x(c.a.mark((function t(){var n,a,r,o,i,l,d,u,m,f,b,v,C,S,x,w,F,I,D,T,K,O,k,_,j,P,A,E,N;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,n={nodeID:e.nodeID,name:e.confKeyType},t.next=5,Object(s["f"])(e.category,n);case 5:if(a=t.sent,r=a.data,o=r.properties,i=(null===o||void 0===o?void 0:o.default)||(Array.isArray(o)?o:[]),i=i.filter((function(e){return"connectionSelector"!==e.name})),!e.isEdit){t.next=22;break}return t.next=13,Object(s["g"])(e.category,n);case 13:l=t.sent,d=l.data,e.allConfKeysData=d,u=e.allConfKeysData[e.confKeyName],m=null,e.isCanAdvanced?(e.confKeyForm={name:e.confKeyName,confKeyType:e.type},f=u.omitIfEmpty,b=u.sendSingle,v=u.format,C=u.schemaName,S=u.schemaMessage,x=u.delimiter,w=u.dataTemplate,F=u.concurrency,I=u.bufferLength,D=u.enableCache,T=u.memoryCacheThreshold,K=u.maxDiskCache,O=u.cleanCacheAtStop,k=u.bufferPageSize,_=u.resendInterval,j=u.runAsync,P=u.connectionSelector,A=g(u,h),m=P?P.split(".")[1]:"",e.advanceForm={omitIfEmpty:f,sendSingle:b,format:v,schemaName:C,schemaMessage:S,delimited:x,dataTemplate:w,concurrency:F,bufferLength:I,enableCache:D,memoryCacheThreshold:T,maxDiskCache:K,cleanCacheAtStop:O,bufferPageSize:k,resendInterval:_,runAsync:j,connectionSelector:m},e.propertiesForm=$({},A)):(E=u.connectionSelector,N=g(u,y),m=E?E.split(".")[1]:"",e.confKeyForm={name:e.confKeyName,confKeyType:e.type,connectionSelector:m},e.propertiesForm=$({},N)),m&&e.changeConnectionSelector(m),t.next=23;break;case 22:e.propertiesForm=Object(p["b"])(i);case 23:e.confKeyProperties.default=i?i.map((function(t){var n=t.control,a=t.type,r=e.allConfKeysData&&e.allConfKeysData[e.confKeyName]&&e.allConfKeysData[e.confKeyName][t.name],o=r||t.default;return"list"!==t.control||"list_object"!==t.type&&"object"!==t.type?t.default=Object(p["f"])(n,a,o):(t.properties=t.default,t.templateData=Object(p["f"])(n,a,o)),"insecureSkipVerify"===t.name&&e.allConfKeysData&&void 0===e.allConfKeysData[t.name]&&(t.default=!0),t})):[];case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[0,,24,27]])})))()},closeModal:function(e){this.visible="boolean"===typeof e&&e,this.visible||(this.$refs.confKeyFormRef.resetFields(),this.$refs.propertyFormRef.resetFields(),this.confKeyProperties={default:[]},this.allConfKeysData={},this.confKeyForm={name:"",confKeyType:""},this.propertiesForm={},this.advanceForm={}),!this.visible&&this.$refs.advanceFormRef&&this.$refs.advanceFormRef.resetFields()},testConnection:function(e,t){var n=this;return x(c.a.mark((function a(){var r;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r={nodeID:n.nodeID,type:e},n.isLoadingTest=!0,Object(s["i"])(n.category,r,t).then((function(){n.$Message.success(n.$t("common.TestConnectionSuccess"))})).finally((function(){n.isLoadingTest=!1}));case 3:case"end":return a.stop()}}),a)})))()},addConfKeyAPI:function(e){var t=new Map([[f["d"].sources,s["b"]],[f["d"].sinks,s["a"]]]);return e&&t.get(e)||t.get("source")},addOrEditConfKey:function(e,t){var n=this;return x(c.a.mark((function a(){var r,o;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=n.addConfKeyAPI(n.category),o=n.confKeyForm.name,r(n.nodeID,e,o,t).then((function(){n.visible=!1,n.$emit("submit",$({name:o},t)),n.isEdit?n.$Message.success(n.$t("common.editSuccess")):n.$Message.success(n.$t("common.addSuccess"))}));case 3:case"end":return a.stop()}}),a)})))()},getSubmitData:function(){var e=this;return x(c.a.mark((function t(){var n,a,r,o,i,s,l,d,u,m,f,h,y;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.confKeyFormRef.validate();case 3:return n=t.sent,e.sameLevelFormValid=n,a=e.$refs.propertyFormRef.validatePropertiesForm,t.next=8,a();case 8:if(n){t.next=12;break}return r=e.$t("common.fillContent"),e.$Message.error(r),t.abrupt("return",Promise.reject(new Error(r)));case 12:return t.next=14,e.$refs.propertyFormRef.getFormData();case 14:if(o=t.sent,o.name,i=g(o,b),s={},!e.isCanAdvanced){t.next=26;break}return t.next=20,e.$refs.advanceFormRef.getFormData();case 20:l=t.sent,d=l.connectionSelector,u=l.delimited,m=g(l,v),f=d?"".concat(e.confKeyType,".").concat(d):"",s=$($($($({},i),m),"delimited"===l.format&&{delimiter:u}),{},{connectionSelector:f}),t.next=29;break;case 26:h=e.confKeyForm.connectionSelector,s=$({},i),h&&(s=$($({},s),{},{connectionSelector:"".concat(e.confKeyType,".").concat(h)}));case 29:return y=Object(p["e"])(s),t.abrupt("return",Promise.resolve(y));case 33:return t.prev=33,t.t0=t["catch"](0),console.error("error",t.t0),t.abrupt("return",Promise.reject(t.t0));case 37:case"end":return t.stop()}}),t,null,[[0,33]])})))()},submit:function(e){var t=this;return x(c.a.mark((function n(){var a;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.getSubmitData();case 3:a=n.sent,"testConnection"===e?t.testConnection(t.confKeyType,a):t.addOrEditConfKey(t.confKeyType,a),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),console.error("error",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}},D=I,T=(n("6dac"),n("2877")),K=Object(T["a"])(D,a,r,!1,null,"53ceb234",null);t["a"]=K.exports},"40ee":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Select",{staticClass:"custom-select",attrs:{size:"large",disabled:e.disabled},on:{"on-change":e.changeType,"on-select":e.selectedType},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}},e._l(e.typeList,(function(t){return n("Option",{key:t.name,attrs:{value:t.name,label:t.name,disabled:!t.about.installed}},[n("div",{staticClass:"title"},[e._v(e._s(t.name))]),t.about.installed?e._e():n("Tooltip",{staticClass:"tag",attrs:{content:e.$t("plugins.installTip"),placement:"top","max-width":"200px",transfer:""}},[n("Button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.routeToInstallPage(t.name)}}},[e._v(" "+e._s(e.$t("common.install"))+" ")])],1),n("div",{staticClass:"info"},[e._v(e._s(t.about.author.name)+", "+e._s(t.about.author.email))]),n("p",{staticClass:"description"},[e._v(" "+e._s(e.i18nLabel(t.about.description))+" ")])],1)})),1)},r=[],o=n("724c"),c=n("4041"),i=n("570a"),s=n("7d99"),l={name:"ConfKeyTypesSeletor",props:{value:{type:String,default:""},category:{type:String,default:""},disabled:{type:Boolean,default:!1},params:{type:Object,default:function(){}}},mixins:[o["a"],c["a"],i["a"]],data:function(){return{typeList:[]}},computed:{myValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},created:function(){this.getConfKeyTypeList()},methods:{getConfKeyTypeList:function(){var e=this;this.category&&Object(s["f"])(this.category,{nodeID:this.nodeID},this.params).then((function(t){var n=t.data;e.typeList=n||[]}))},changeType:function(e){this.$emit("onChange",e)},selectedType:function(e){var t=this.typeList.find((function(t){return t.name===e.value}));this.$emit("onSelected",t)},routeToInstallPage:function(e){this.goToInstallPluginPage(this.category,e)}}},d=l,u=n("2877"),m=Object(u["a"])(d,a,r,!1,null,null,null);t["a"]=m.exports},"42d4":function(e,t,n){},"4b1b":function(e,t,n){"use strict";var a,r,o=n("f065"),c={name:"FormatsSelector",extends:o["a"],props:{formats:{type:Array,default:function(){return null}}},created:function(){this.init()},methods:{getList:function(){var e=this;return new Promise((function(t){var n=["json","binary","protobuf","delimited","custom"];e.formats&&(n=e.formats),t(n)}))}}},i=c,s=n("2877"),l=Object(s["a"])(i,a,r,!1,null,null,null);t["a"]=l.exports},"570a":function(e,t,n){"use strict";var a=n("724c");t["a"]={mixins:[a["a"]],methods:{goToInstallPluginPage:function(e,t){this.$router.push({name:"extension",params:{id:this.nodeID},query:{fromPageType:e}});var n={fromType:e,pluginName:t};sessionStorage.setItem("installInfo",JSON.stringify(n))}}}},"5a81":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return u}));var a=n("751a"),r=n("510b"),o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a["a"].post(Object(r["c"])(e,"/schemas/".concat(t)),n)},c=function(e,t){return a["a"].get(Object(r["c"])(e,"/schemas/".concat(t)))},i=function(e){return a["a"].get(Object(r["c"])(e,"/schemas/custom"))},s=function(e){return a["a"].get(Object(r["c"])(e,"/schemas/protobuf"))},l=function(e,t,n){return a["a"].delete(Object(r["c"])(e,"/schemas/".concat(n,"/").concat(t)))},d=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return a["a"].put(Object(r["c"])(e,"/schemas/".concat(t,"/").concat(n)),o)},u=function(e,t,n){return a["a"].get(Object(r["c"])(e,"/schemas/".concat(n,"/").concat(t)))}},"6dac":function(e,t,n){"use strict";n("42d4")},"7d99":function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return f}));var a=n("751a"),r=n("510b"),o=n("c9d9"),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(r["c"])(e,"/metadata/resources");return a["a"].get(n,{params:t})},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o["a"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=t.nodeID,i=t.name,s=Object(r["c"])(c,"/metadata/".concat(e));return i&&(s="".concat(s,"/").concat(i)),a["a"].get(s,{params:n})},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o["a"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=t.nodeID,i=t.name,s=Object(r["c"])(c,"/metadata/".concat(e,"/yaml"));return i&&(s="".concat(s,"/").concat(i)),a["a"].get(s,{params:n})},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o["a"],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=t.nodeID,i=t.type;return a["a"].post(Object(r["c"])(c,"/metadata/".concat(e,"/connection/").concat(i)),n)},d=function(e,t){return a["a"].get(Object(r["c"])(e,"/metadata/sources/yaml/".concat(t)))},u=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4?arguments[4]:void 0,i=Object(r["c"])(e,"/metadata/sources/".concat(t,"/confKeys"));return n&&(i="".concat(i,"/").concat(n)),c&&(i="".concat(i,"/").concat(c)),a["a"].put(i,o)},m=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4?arguments[4]:void 0,i=Object(r["c"])(e,"/metadata/sinks/".concat(t,"/confKeys"));return n&&(i="".concat(i,"/").concat(n)),c&&(i="".concat(i,"/").concat(c)),a["a"].put(i,o)},p=function(e,t,n){return a["a"].delete(Object(r["c"])(e,"/metadata/sources/".concat(t,"/confKeys/").concat(n)))},f=function(e,t,n){return a["a"].delete(Object(r["c"])(e,"/metadata/sinks/".concat(t,"/confKeys/").concat(n)))}},a5ff:function(e,t,n){"use strict";var a,r,o=n("f065"),c=n("724c"),i=n("7d99"),s={name:"ConnectionSelector",extends:o["a"],props:{type:{type:String,default:"edgex"},lists:{type:Array,default:function(){return null}}},mixins:[c["a"]],computed:{isCanConnection:function(){var e=this;return function(t){return["mqtt","edgex"].includes(t||e.type)}}},watch:{type:{immediate:!0,handler:function(e){if(this.lists)this.list=this.lists;else if(e){if(this.isCanConnection(e))return void this.init();this.myValue="",this.list=[]}}}},created:function(){this.lists&&(this.list=this.lists)},methods:{getList:function(){var e=this;return new Promise((function(t,n){var a={nodeID:e.nodeID,name:e.type};e.type&&e.isCanConnection(e.type)?Object(i["g"])("connections",a).then((function(e){var n=e.data,a=Object.keys(n);t(a)})).catch((function(e){n(e)})):t([])}))}}},l=s,d=n("2877"),u=Object(d["a"])(l,a,r,!1,null,null,null);t["a"]=u.exports},bd25:function(e,t,n){"use strict";var a=n("5a81");function r(e){return s(e)||i(e)||c(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e){if(Array.isArray(e))return l(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t["a"]={methods:{getSchemaList:function(e){return new Promise((function(t,n){Promise.allSettled([Object(a["d"])(e),Object(a["c"])(e)]).then((function(e){var n=e[0].value.data,a=e[1].value.data,o=n.map((function(e){return{name:e,type:"protobuf"}})),c=a.map((function(e){return{name:e,type:"custom"}})),i=[].concat(r(o),r(c));t(i)})).catch((function(e){n(e)}))}))}}}},d013:function(e,t,n){"use strict";var a,r,o=n("f065"),c=n("5a81"),i=n("724c"),s=n("bd25"),l={name:"SchemasSelector",extends:o["a"],props:{type:{type:String,default:""}},mixins:[i["a"],s["a"]],watch:{type:{immediate:!0,handler:function(){this.init()}}},methods:{getList:function(){var e=this;return this.type?new Promise((function(t,n){Object(c["e"])(e.nodeID,e.type).then((function(e){var n=e.data||[];t(n)})).catch((function(e){n(e)}))})):this.getSchemaList(this.nodeID)}}},d=l,u=n("2877"),m=Object(u["a"])(d,a,r,!1,null,null,null);t["a"]=m.exports},e2635:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Form",{ref:"record",staticClass:"base-properties-form",attrs:{model:e.record}},[n("Row",{attrs:{gutter:20}},[n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("rules.omitIfEmpty"),prop:"omitIfEmpty"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.omitIfEmptyDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("div",{staticClass:"radio-control"},[n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record.omitIfEmpty,expression:"record.omitIfEmpty"}],attrs:{id:"true-omit-radio",type:"radio",disabled:e.isDetail},domProps:{value:!0,checked:e._q(e.record.omitIfEmpty,!0)},on:{change:function(t){return e.$set(e.record,"omitIfEmpty",!0)}}}),n("label",{attrs:{for:"true-omit-radio"}},[e._v("True")])]),n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record.omitIfEmpty,expression:"record.omitIfEmpty"}],attrs:{id:"false-omit-radio",type:"radio",disabled:e.isDetail},domProps:{value:!1,checked:e._q(e.record.omitIfEmpty,!1)},on:{change:function(t){return e.$set(e.record,"omitIfEmpty",!1)}}}),n("label",{attrs:{for:"false-omit-radio"}},[e._v("False")])])])],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("rules.sendSingle"),prop:"sendSingle"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.sendSingleDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("div",{staticClass:"radio-control"},[n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record.sendSingle,expression:"record.sendSingle"}],attrs:{disabled:e.isDetail,id:"true-send-radio",type:"radio"},domProps:{value:!0,checked:e._q(e.record.sendSingle,!0)},on:{change:function(t){return e.$set(e.record,"sendSingle",!0)}}}),n("label",{attrs:{for:"true-send-radio"}},[e._v("True")])]),n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record.sendSingle,expression:"record.sendSingle"}],attrs:{disabled:e.isDetail,id:"false-send-radio",type:"radio"},domProps:{value:!1,checked:e._q(e.record.sendSingle,!1)},on:{change:function(t){return e.$set(e.record,"sendSingle",!1)}}}),n("label",{attrs:{for:"false-send-radio"}},[e._v("False")])])])],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("streams.format"),prop:"format"}},[n("FormatsSelector",{on:{onChange:e.changeFormat,clear:e.changeFormat},model:{value:e.record.format,callback:function(t){e.$set(e.record,"format",t)},expression:"record.format"}})],1)],1),"protobuf"===e.record.format||"custom"===e.record.format?n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("streams.schemaName"),prop:"format"}},[n("SchemasSelector",{attrs:{type:e.record.format},on:{onChange:e.changeSchemaName,clear:e.changeSchemaName},model:{value:e.record.schemaName,callback:function(t){e.$set(e.record,"schemaName",t)},expression:"record.schemaName"}})],1)],1):e._e(),"protobuf"===e.record.format||"custom"===e.record.format?n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("streams.schemaMessage"),prop:"format"}},[n("i-input",{attrs:{size:"large"},model:{value:e.record.schemaMessage,callback:function(t){e.$set(e.record,"schemaMessage",t)},expression:"record.schemaMessage"}})],1)],1):e._e(),"delimited"===e.record.format?n("i-col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:e.$t("streams.delimited"),prop:"delimited"}},[n("i-input",{attrs:{size:"large"},model:{value:e.record.delimited,callback:function(t){e.$set(e.record,"delimited",t)},expression:"record.delimited"}})],1)],1):e._e(),n("i-col",{attrs:{span:24}},[n("FormItem",{attrs:{label:e.$t("rules.dataTemplate"),prop:"dataTemplate"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.dataTemplateDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("i-input",{attrs:{type:"textarea",size:"large",rows:3,disabled:e.isDetail},model:{value:e.record.dataTemplate,callback:function(t){e.$set(e.record,"dataTemplate",t)},expression:"record.dataTemplate"}})],1)],1),n("Divider",[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.showAdvanced=!e.showAdvanced}}},[e.showAdvanced?n("Icon",{attrs:{type:"ios-arrow-up"}}):n("Icon",{attrs:{type:"ios-arrow-down"}}),e._v(" "+e._s(e.$t("common.advanced"))+" ")],1)]),e.showAdvanced?[n("i-col",{directives:[{name:"show",rawName:"v-show",value:e.isCanConnection,expression:"isCanConnection"}],attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("configuration.connectionSelector"),prop:"connectionSelector"}},[n("ConnectionSelector",{attrs:{type:e.type},on:{onChange:e.changeConnectionSelector},model:{value:e.record.connectionSelector,callback:function(t){e.$set(e.record,"connectionSelector",t)},expression:"record.connectionSelector"}})],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("rules.concurrency"),prop:"concurrency"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.sinkConcurrencyDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"1"},model:{value:e.record.concurrency,callback:function(t){e.$set(e.record,"concurrency",e._n(t))},expression:"record.concurrency"}})],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("rules.bufferLength"),prop:"bufferLength"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.sinkBufferLengthDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"1024"},model:{value:e.record.bufferLength,callback:function(t){e.$set(e.record,"bufferLength",e._n(t))},expression:"record.bufferLength"}})],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("rules.enableCache"),prop:"enableCache"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.enableCacheDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("div",{staticClass:"radio-control"},[n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record.enableCache,expression:"record.enableCache"}],attrs:{id:"true-enable-cache-radio",type:"radio",disabled:e.isDetail},domProps:{value:!0,checked:e._q(e.record.enableCache,!0)},on:{change:function(t){return e.$set(e.record,"enableCache",!0)}}}),n("label",{attrs:{for:"true-enable-cache-radio"}},[e._v("True")])]),n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record.enableCache,expression:"record.enableCache"}],attrs:{disabled:e.isDetail,id:"false-enable-cache-radio",type:"radio"},domProps:{value:!1,checked:e._q(e.record.enableCache,!1)},on:{change:function(t){return e.$set(e.record,"enableCache",!1)}}}),n("label",{attrs:{for:"false-enable-cache-radio"}},[e._v("False")])])])],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("rules.cleanCacheAtStop"),prop:"cleanCacheAtStop"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.cleanCacheAtStopDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("div",{staticClass:"radio-control"},[n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record.cleanCacheAtStop,expression:"record.cleanCacheAtStop"}],attrs:{id:"true-clean-cache-radio",type:"radio",disabled:e.isDetail},domProps:{value:!0,checked:e._q(e.record.cleanCacheAtStop,!0)},on:{change:function(t){return e.$set(e.record,"cleanCacheAtStop",!0)}}}),n("label",{attrs:{for:"true-clean-cache-radio"}},[e._v("True")])]),n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record.cleanCacheAtStop,expression:"record.cleanCacheAtStop"}],attrs:{disabled:e.isDetail,id:"false-clean-cache-radio",type:"radio"},domProps:{value:!1,checked:e._q(e.record.cleanCacheAtStop,!1)},on:{change:function(t){return e.$set(e.record,"cleanCacheAtStop",!1)}}}),n("label",{attrs:{for:"false-clean-cache-radio"}},[e._v("False")])])])],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("rules.memoryCacheThreshold"),prop:"memoryCacheThreshold"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.memoryCacheThresholdDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"1024"},model:{value:e.record.memoryCacheThreshold,callback:function(t){e.$set(e.record,"memoryCacheThreshold",e._n(t))},expression:"record.memoryCacheThreshold"}})],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("rules.maxDiskCache"),prop:"maxDiskCache"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.maxDiskCacheDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"1024000"},model:{value:e.record.maxDiskCache,callback:function(t){e.$set(e.record,"maxDiskCache",e._n(t))},expression:"record.maxDiskCache"}})],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("rules.bufferPageSize"),prop:"bufferPageSize"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.bufferPageSizeDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"256"},model:{value:e.record.bufferPageSize,callback:function(t){e.$set(e.record,"bufferPageSize",e._n(t))},expression:"record.bufferPageSize"}})],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("rules.resendInterval"),prop:"resendInterval"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.resendIntervalDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"0"},model:{value:e.record.resendInterval,callback:function(t){e.$set(e.record,"resendInterval",e._n(t))},expression:"record.resendInterval"}})],1)],1),n("i-col",{attrs:{span:12}},[n("FormItem",{attrs:{label:e.$t("rules.runAsync"),prop:"runAsync"}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.runAsyncDesc")}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("div",{staticClass:"radio-control"},[n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record.runAsync,expression:"record.runAsync"}],attrs:{disabled:e.isDetail,id:"true-run-radio",type:"radio"},domProps:{value:!0,checked:e._q(e.record.runAsync,!0)},on:{change:function(t){return e.$set(e.record,"runAsync",!0)}}}),n("label",{attrs:{for:"true-run-radio"}},[e._v("True")])]),n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record.runAsync,expression:"record.runAsync"}],attrs:{disabled:e.isDetail,id:"false-run-radio",type:"radio"},domProps:{value:!1,checked:e._q(e.record.runAsync,!1)},on:{change:function(t){return e.$set(e.record,"runAsync",!1)}}}),n("label",{attrs:{for:"false-run-radio"}},[e._v("False")])])])],1)],1)]:e._e()],2)],1)},r=[],o=n("2ef0"),c=n("bd25"),i=n("724c"),s=n("a5ff"),l=n("4b1b"),d=n("d013"),u={name:"BasePropertiesForm",mixins:[i["a"],c["a"]],components:{ConnectionSelector:s["a"],FormatsSelector:l["a"],SchemasSelector:d["a"]},props:{type:{type:String,default:""},isDetail:{type:Boolean,default:!1},form:{type:Object,default:null}},data:function(){return{showAdvanced:!1,record:{},schemaNameList:[]}},computed:{isCanConnection:function(){return["mqtt","edgex"].includes(this.type)}},watch:{form:{immediate:!0,handler:function(e){var t=Object.keys(e);t.length?this.record=Object(o["cloneDeep"])(e):this.setDefaultValues()},deep:!0}},methods:{setDefaultValues:function(){this.record={runAsync:!1,omitIfEmpty:!1,sendSingle:!0,dataTemplate:"",bufferLength:1024,enableCache:!1,format:"json",schemaName:"",schemaMessage:"",delimited:""}},getFormData:function(){var e=this;return new Promise((function(t,n){e.$refs.record.validate((function(a){a||n(new Error(e.$t("common.invalidateForm"))),t(e.record)}))}))},resetFields:function(){this.record={}},changeConnectionSelector:function(e){this.$emit("changeConnectionSelector",e)},changeFormat:function(e){this.record.schemaName="",this.changeSchemaName(),this.record.delimited="delimited"===e?",":""},changeSchemaName:function(){this.record.schemaMessage=""}}},m=u,p=(n("1000"),n("2877")),f=Object(p["a"])(m,a,r,!1,null,"a0f844fc",null);t["a"]=f.exports},f065:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Select",{ref:"selectRef",class:e.className,attrs:{size:e.size,disabled:e.disabled,clearable:e.clearable,filterable:e.filterable,"allow-create":e.allowCreate},on:{"on-change":e.changeValue,"on-create":e.createItem,"on-open-change":e.openChange,"on-clear":e.clear},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}},e._l(e.list,(function(t){return n("Option",{key:t.name||t,attrs:{value:t.name||t,label:t.name||t,disabled:t.disabled||!1}},[n("span",{staticClass:"title"},[e._v(e._s(t.name||t))])])})),1)},r=[],o=n("a34a"),c=n.n(o);function i(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(l){return void n(l)}i.done?t(s):Promise.resolve(s).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){i(o,a,r,c,s,"next",e)}function s(e){i(o,a,r,c,s,"throw",e)}c(void 0)}))}}var l={name:"TempalteSelector",props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},size:{type:String,default:"large"},className:{type:String,default:""}},data:function(){return{list:[],myValue:""}},watch:{value:{immediate:!0,handler:function(e){this.myValue=e}},myValue:{immediate:!0,handler:function(e){this.$emit("input",e)}}},methods:{init:function(){var e=this;return s(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getList();case 2:e.list=t.sent;case 3:case"end":return t.stop()}}),t)})))()},reload:function(e){this.init(),this.myValue=e},getList:function(){return new Promise((function(e){e(["test1","test2"])}))},changeValue:function(e){var t=this;return void 0===e?(this.myValue=this.value,this.myValue):(this.$nextTick((function(){t.myValue=e;var n=e;e&&(n=t.list.find((function(t){return(null===t||void 0===t?void 0:t.name)===e||t===e}))),t.$emit("onChange",n)})),this.myValue)},createItem:function(e){this.list.push(e)},openChange:function(e){this.$emit("onOpenChange",e)},clear:function(){this.$emit("clear")}}},d=l,u=n("2877"),m=Object(u["a"])(d,a,r,!1,null,null,null);t["a"]=m.exports}}]);