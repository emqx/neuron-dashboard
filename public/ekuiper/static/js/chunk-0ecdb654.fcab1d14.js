(window["webpackJsonp_eKuiper"]=window["webpackJsonp_eKuiper"]||[]).push([["chunk-0ecdb654"],{"041c":function(e,t,n){},"101e":function(e,t,n){"use strict";var a=n("510b");t["a"]={computed:{isSingleNode:function(){return this.$route.params.id===a["a"]},isSubApp:function(){return this.$store.state.isSubApp},hideTabBar:function(){return this.isSingleNode&&this.isSubApp&&this.$store.state.hideTabBarInNodePage}}}},1421:function(e,t,n){"use strict";n("d4c2")},"1b9d":function(e,t,n){"use strict";n("e7cd")},"23ac":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{"class-name":"upload-modal--create",title:e.$t("upload.createFile"),width:480,"mask-closable":!1},on:{"on-cancel":e.closeModal},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticClass:"upload-wrapper"},[e.isSupportCustom?n("section",{staticClass:"type-wrapper"},[n("RadioGroup",{staticClass:"radios-container",attrs:{type:"button","button-style":"solid"},model:{value:e.uploadType,callback:function(t){e.uploadType=t},expression:"uploadType"}},e._l(e.uploadTypes,(function(t){return n("Radio",{key:t.value,staticClass:"item--radio",attrs:{label:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1):e._e(),"file"===e.uploadType?n("section",{staticClass:"content-wrapper upload-file-wrapper"},[n("UploadFile",{staticClass:"upload-file",attrs:{accept:e.fileAccepts},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),n("span",{staticClass:"file-name"},[e._v(e._s(e.fileName))])],1):e._e(),e.isSupportCustom&&"text"===e.uploadType?n("section",{staticClass:"content-wrapper code-editor-wapper"},[n("Form",{ref:"fileContentRef",attrs:{model:e.fileContent,rules:e.rules}},[n("FormItem",{attrs:{label:e.$t("upload.fileName"),prop:"name"}},[n("i-input",{attrs:{size:"large"},model:{value:e.fileContent.name,callback:function(t){e.$set(e.fileContent,"name",t)},expression:"fileContent.name"}})],1),n("FormItem",{staticClass:"form-item--code",attrs:{label:e.$t("upload.fileContent"),prop:"content"}},[n("UploadFile",{staticClass:"upload-file editor-upload-file--btn",attrs:{accept:e.textFileAccept},on:{handleUpload:e.getFileContent},scopedSlots:e._u([{key:"text",fn:function(){return[n("Button",{staticClass:"upload-file--link",attrs:{type:"text"}},[e._v(e._s(e.$t("upload.uploadFile")))])]},proxy:!0}],null,!1,3953072564)}),n("div",{staticClass:"monaco-container code-container"},[n("Monaco",{attrs:{id:"file-data",backgroud:"#2c3e50",lang:"json"},model:{value:e.fileContent.content,callback:function(t){e.$set(e.fileContent,"content",t)},expression:"fileContent.content"}})],1)],1)],1)],1):e._e()]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:e.closeModal}},[e._v(e._s(e.$t("common.cancel")))]),n("Button",{attrs:{loading:e.loadingUpload,type:"primary"},on:{click:e.submit}},[e._v(" "+e._s(e.$t("common.submit"))+" ")])],1)])},i=[],s=n("724c"),o=n("9146"),r=n("b476"),l=n("91b6"),c={name:"UploadFileModal",props:{isSupportCustom:{type:Boolean,deafult:!0},fileAccepts:{type:String,deafult:"-"},modalVisible:{type:Boolean,deafult:!1}},mixins:[s["a"]],components:{UploadFile:r["a"],Monaco:o["a"]},data:function(){return{uploadTypes:[{value:"file",label:this.$t("upload.uploadByFile")},{value:"text",label:this.$t("upload.uploadByContent")}],uploadType:"file",file:null,fileContent:{name:"",content:""},textFileAccept:"text/plain, application/x-yaml, application/json, application/javascript",loadingUpload:!1,rules:{name:[{required:!0,message:this.$t("upload.fileNameRequried"),trigger:"blur"}],content:[{required:!0,message:this.$t("upload.fileContentRequried")}]}}},computed:{visible:{get:function(){return this.modalVisible},set:function(e){this.$emit("update:modalVisible",e)}},fileName:function(){return this.file?this.file.name:""}},methods:{readFile:function(e){var t=this;return new Promise((function(n,a){t.loadingUpload=!0;var i="",s=new FileReader;return"undefined"===typeof FileReader?(t.$Message.warning(t.$t("upload.unsupportReadOnBrower")),!1):(s.readAsText(e,"UTF-8"),s.onerror=function(e){t.loadingUpload=!1,t.$Message.warning(t.$t("upload.readFileError")),a(e)},s.onload=function(e){t.loadingUpload=!1,i=e.target.result,n(e.target.result)},i)}))},getFileContent:function(e){var t=this;this.readFile(e).then((function(e){t.fileContent.content=e}))},closeModal:function(){this.visible=!1,this.file=null,this.fileContent={name:"",content:""},this.$emit("clode")},upload:function(e,t){var n=this;return new Promise((function(a,i){n.loadingUpload=!0,Object(l["c"])(n.nodeID,e,t).then((function(e){n.$Message.success(n.$t("common.uploadSuccess")),n.closeModal(),n.$emit("reload"),a(e)})).catch((function(e){i(e)})).finally((function(){n.loadingUpload=!1}))}))},submit:function(){var e=this;if("file"===this.uploadType){if(!this.file)return void this.$Message.warning(this.$t("upload.fileRequried"));var t=new FormData;t.append("uploadFile",this.file),this.upload(t,!0)}else this.$refs.fileContentRef.validate((function(t){if(t){var n={name:e.fileContent.name,content:e.fileContent.content};e.upload(n,!1)}}))}}},u=c,d=(n("1421"),n("2877")),f=Object(d["a"])(u,a,i,!1,null,"029b121d",null);t["a"]=f.exports},"308f1":function(e,t,n){},"332e":function(e,t,n){"use strict";n("ef09")},4041:function(e,t,n){"use strict";var a=n("c9d9");t["a"]={computed:{lang:function(){return this.$store.state.lang},i18nLabel:function(){var e=this;return function(t){if(!t)return"";var n=a["c"].get(e.lang);if(!n)return t[e.lang];var i=t[n[0]]||t[n[1]]||"";return i}}}}},"414d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"extension"},[e.hideTabBar?e._e():n("TabsHead",{attrs:{"active-tab":"extension"}}),n("Card",[n("Tabs",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[e.hiddenTabMap.plugins?e._e():n("TabPane",{attrs:{name:e.tabArr[0],label:e.$t("plugins.plugins")}},[e.name===e.tabArr[0]?n("Plugins",{staticClass:"tab-body"}):e._e()],1),e.hiddenTabMap.externalServices?e._e():n("TabPane",{attrs:{name:e.tabArr[1],label:e.$t("services.services")}},[e.name===e.tabArr[1]?n("Services",{staticClass:"tab-body"}):e._e()],1),e.hiddenTabMap.externalFunctions?e._e():n("TabPane",{attrs:{name:e.tabArr[2],label:e.$t("services.functions")}},[e.name===e.tabArr[2]?n("FunctionList",{staticClass:"tab-body"}):e._e()],1),e.hiddenTabMap.portable?e._e():n("TabPane",{attrs:{name:e.tabArr[3],label:e.$t("plugins.portable")}},[e.name===e.tabArr[3]?n("Portables",{staticClass:"tab-body"}):e._e()],1)],1)],1)],1)},i=[],s=n("8d2f"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"plugins"},[n("Button",{staticClass:"top-create--btn",attrs:{type:"primary"},on:{click:e.showCreateModal}},[e._v(e._s(e.$t("plugins.createPlugin")))]),n("Table",{attrs:{loading:e.loading,columns:e.recordsCol,data:e.records}}),n("Modal",{attrs:{"class-name":"plugins-modal--create",title:e.$t("plugins.createPlugin"),width:600,"mask-closable":!1},on:{"on-ok":e.save},model:{value:e.createModalVisible,callback:function(t){e.createModalVisible=t},expression:"createModalVisible"}},[e.createModalVisible?n("Form",{ref:"createForm",attrs:{model:e.createForm,rules:e.rules}},[n("Row",[""!==e.warningMessage?n("i-col",{attrs:{span:"24"}},[n("Alert",{attrs:{type:"warning","show-icon":"",closable:""},on:{"on-close":e.handleWarnClose}},[e._v(e._s(e.warningMessage))])],1):e._e(),n("i-col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("common.type"),prop:"type"}},[n("Select",{attrs:{size:"large"},on:{"on-change":e.handleTypeChange},model:{value:e.createForm.type,callback:function(t){e.$set(e.createForm,"type",t)},expression:"createForm.type"}},e._l(e.typesList,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+" ")])})),1)],1)],1),n("i-col",{staticClass:"name",attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("common.name"),prop:"name"}},[n("a",{directives:[{name:"show",rawName:"v-show",value:e.pluginDocLink,expression:"pluginDocLink"}],staticClass:"doc--link",attrs:{href:e.pluginDocLink,target:"_blank",rel:"noopener noreferrer"}},[e._v(" "+e._s(e.$t("common.documentation"))+" ")]),n("Select",{attrs:{filterable:"","allow-create":"",size:"large",placeholder:e.$t("plugins.selectOrInput")},on:{"on-change":e.handleNameChange,"on-create":e.handleCreateName,"on-open-change":e.handleSelectName},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}},e._l(e.availablePluginsMap,(function(e,t){return n("Option",{key:t,attrs:{value:t,label:t}})})),1)],1)],1),n("i-col",{staticClass:"file",attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("plugins.file"),prop:"file"}},[n("a",{staticClass:"upload-file--link",attrs:{href:"javascript:void(0);"},on:{click:e.showUploadFileModal}},[e._v(" "+e._s(e.$t("upload.uploadFile"))+" ")]),n("FileListAutoCompeleteSeletor",{ref:"fileListSelectRef",attrs:{prefix:"file://"},model:{value:e.createForm.file,callback:function(t){e.$set(e.createForm,"file",t)},expression:"createForm.file"}})],1)],1),""!==e.fileWarningMessage&&e.isShowFileWaring?n("i-col",{attrs:{span:"24"}},[n("Alert",{attrs:{type:"warning","show-icon":"",closable:""},on:{"on-close":e.handleFileWarnClose}},[e._v(e._s(e.fileWarningMessage))])],1):e._e(),n("i-col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("plugins.shellParas"),prop:"shellParas",rules:e.tdengineRules}},[n("Tooltip",{attrs:{"max-width":"250px",transfer:"",content:e.$t("plugins.shellParasDesc"),placement:"top"}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("Select",{attrs:{filterable:"",multiple:"","allow-create":"",size:"large",placeholder:e.isTDengine?e.$t("plugins.TDenginePlaceholder"):e.$t("rules.enterCreate")},on:{"on-create":e.addParams},model:{value:e.createForm.shellParas,callback:function(t){e.$set(e.createForm,"shellParas",t)},expression:"createForm.shellParas"}},e._l(e.shellOptions,(function(t,a){return n("Option",{key:a,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1),e.isShowFuncs?n("i-col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("plugins.functions"),prop:"functions"}},[n("Tooltip",{attrs:{"max-width":"250px",transfer:"",content:e.$t("plugins.functionsDesc"),placement:"top"}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("Select",{attrs:{filte:"",rable:"",multiple:"","allow-create":"",size:"large"},model:{value:e.createForm.functions,callback:function(t){e.$set(e.createForm,"functions",t)},expression:"createForm.functions"}},e._l(e.functions,(function(t,a){return n("Option",{key:a.name,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1):e._e()],1)],1):e._e(),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:function(t){e.createModalVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),n("Button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.save}},[e._v(e._s(e.$t("common.submit")))])],1)],1),n("Modal",{attrs:{"class-name":"plugins-modal--view view-form",title:e.$t("plugins.viewPlugin"),width:500,"mask-closable":!1},model:{value:e.viewModalVisible,callback:function(t){e.viewModalVisible=t},expression:"viewModalVisible"}},[n("div",{staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v(e._s(e.$t("common.name"))+": ")]),n("span",[e._v(e._s(e.viewForm.name))])]),n("div",{staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v(e._s(e.$t("common.version"))+": ")]),n("span",[e._v(e._s(e.viewForm.version))])]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.viewModalVisible=!1}}},[e._v(e._s(e.$t("common.ok")))])],1)]),n("Modal",{attrs:{"class-name":"plugins-modal--view view-form",title:e.$t("plugins.registerFunction"),width:500,"mask-closable":!1},model:{value:e.showRegisterFuncVisisble,callback:function(t){e.showRegisterFuncVisisble=t},expression:"showRegisterFuncVisisble"}},[n("Select",{attrs:{filterable:"",multiple:"","allow-create":"",size:"large"},on:{"on-create":e.handleCreateName},model:{value:e.registerFuncForm.functions,callback:function(t){e.$set(e.registerFuncForm,"functions",t)},expression:"registerFuncForm.functions"}},e._l(e.functions,(function(t,a){return n("Option",{key:a.name,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:function(t){e.showRegisterFuncVisisble=!1}}},[e._v(e._s(e.$t("common.cancel")))]),n("Button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.registerFunctions}},[e._v(e._s(e.$t("common.submit")))])],1)],1),n("UploadFileModal",{attrs:{modalVisible:e.uploadFileModalVisible,isSupportCustom:!0,fileAccepts:".zip"},on:{"update:modalVisible":function(t){e.uploadFileModalVisible=t},"update:modal-visible":function(t){e.uploadFileModalVisible=t},reload:e.getFileList}})],1)},r=[],l=n("bd43"),c=n("c9d9"),u=n("751a"),d=n("510b"),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c["a"];return u["a"].get(Object(d["c"])(e,"/plugins/".concat(t)))},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c["a"];return u["a"].get(Object(d["c"])(e,"/plugins/".concat(t,"/prebuild")))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c["a"];return u["a"].post(Object(d["c"])(e,"/plugins/".concat(n)),t)},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c["a"];return u["a"].get(Object(d["c"])(e,"/plugins/".concat(n,"/").concat(t)))},b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c["a"];return u["a"].delete(Object(d["c"])(e,"/plugins/".concat(n,"/").concat(t)))},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u["a"].post(Object(d["c"])(e,"/plugins/functions/".concat(t,"/register")),n)},g=n("724c"),F=n("4041"),w=n("8141"),y=n("23ac");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={name:"Plugins",mixins:[g["a"],F["a"]],components:{FileListAutoCompeleteSeletor:w["a"],UploadFileModal:y["a"]},data:function(){return{loading:!1,createModalVisible:!1,viewModalVisible:!1,showRegisterFuncVisisble:!1,btnLoading:!1,registerFuncForm:{name:"",functions:[]},warningMessage:"",fileWarningMessage:"",isShowFileWaring:!1,viewForm:{},typesList:["sources","sinks","functions"],availablePluginsMap:{},shellOptions:[""],functions:[],createForm:{type:"",name:"",file:"",shellParas:[],functions:[]},rules:{type:[{required:!0,message:this.$t("plugins.typeRequired")}],name:[{required:!0,message:this.$t("plugins.nameRequired")}],file:[{required:!0,message:this.$t("plugins.fileRequired")}]},records:[],uploadFileModalVisible:!1,pluginDocLink:""}},watch:{createModalVisible:function(e){e||(this.$refs.createForm.resetFields(),this.createForm={shellParas:[],functions:[]},this.warningMessage="",this.availablePluginsMap={})}},computed:{recordsCol:function(){var e=this;this.$createElement;return[{title:this.$t("common.name"),key:"name",render:function(t,n){return t("div",[t("a",{attrs:{href:"javascript:;"},on:{click:function(){e.showDetail(n.row)}}},[n.row.name])])}},{title:this.$t("common.type"),key:"type"},{title:this.$t("common.operations"),key:"action",width:200,align:"center",render:function(t,n){var a=t("a",{attrs:{href:"javascript:;"},style:"margin-right: 10px;",on:{click:function(){e.showRegisterFunctions(n.row)}}},[t("Icon",{attrs:{type:"ios-create"}})]);return t("div",["functions"===n.row.type?a:null,t("a",{attrs:{href:"javascript:;"}},[t("Poptip",{attrs:{confirm:!0,transfer:!0,width:200,title:e.$t("common.confirmDelete"),placement:"top",type:"error"},on:{"on-ok":function(){e.remove(n.row)},"on-cancel":function(){}}},[t("Icon",{attrs:{type:"md-trash"}})])])])}}]},isTDengine:function(){return"sinks"===this.createForm.type&&"tdengine"===this.createForm.name},tdengineRules:function(){return this.isTDengine?[{required:!0,message:this.$t("plugins.shellParamsRequired")}]:[{required:!1}]},isShowFuncs:function(){var e=["image","geo"];return"functions"===this.createForm.type&&e.includes(this.createForm.name)}},created:function(){var e=this,t=this.$route.query,n=JSON.parse(sessionStorage.getItem("installInfo"))||{},a=n.fromType,i=n.pluginName;["sources","sinks"].includes(t.fromPageType)&&a&&(this.createForm.type=a,this.createForm.name=i,this.getAvailablePlugins(a,i),setTimeout((function(){e.createModalVisible=!0}),500)),sessionStorage.removeItem("installInfo"),this.loadData()},methods:{loadData:function(){var e=this;this.loading=!0,this.records=[],Promise.all([f(this.nodeID,"sources"),f(this.nodeID,"sinks"),f(this.nodeID,"functions")]).then((function(t){var n=t.map((function(e){var t=e.data,n=e.config.url.split("/"),a=n[n.length-1];return{data:t,type:a}}));n.forEach((function(t){t.data.forEach((function(n){e.records.push({name:n,type:t.type})}))})),e.loading=!1})).catch((function(){e.loading=!1}))},showDetail:function(e){var t=this,n=e.name,a=e.type;this.viewModalVisible=!0,h(this.nodeID,n,a).then((function(e){t.viewForm=e.data})).catch((function(){}))},remove:function(e){var t=this,n=e.name,a=e.type;b(this.nodeID,n,a).then((function(e){200===e.status&&"OK"===e.statusText?t.$Modal.success({title:t.$t("common.deleteSuccess"),content:t.$t("plugins.deleteNotice")}):t.$Message.success(t.$t("common.deleteSuccess"))})).catch((function(){}))},showCreateModal:function(){this.createModalVisible=!0},handleTypeChange:function(e){e&&this.getAvailablePlugins(e),"functions"===e&&(this.pluginDocLink=""),this.setPluginDefaultFuncs(),this.validateShellParas()},handleNameChange:function(e){if(this.setPluginDefaultFuncs(e),this.validateShellParas(),e){"functions"!==this.createForm.type&&this.getPluginDocLinkByName(this.createForm.type,e);var t=this.availablePluginsMap[e];this.$set(this.createForm,"file",t),this.fileWarningMessage="\n          ".concat(this.$t("plugins.fileWarningMessage"),"\n          ").concat(t.replace("amd","arm"),"\n        ")}else this.createForm.file="",this.fileWarningMessage=""},handleSelectName:function(e){!this.createForm.type&&e&&this.$Message.warning(this.$t("plugins.typeFirst"))},handleCreateName:function(e){this.createForm.name=e,this.availablePluginsMap[e]="",this.$set(this.createForm,"file","")},validateShellParas:function(){var e=this;this.$nextTick((function(){e.$refs.createForm.validateField("shellParas")}))},addParams:function(e){this.shellOptions.push(e)},showUploadFileModal:function(){this.uploadFileModalVisible=!0},getFileList:function(){this.$refs.fileListSelectRef.getFileList()},loadPluginsMetaData:function(e){var t=this;return new Promise((function(n,a){Object(l["e"])(t.nodeID).then((function(a){var i=a.data.find((function(t){return t.name===e}));t.functions=(null===i||void 0===i?void 0:i.functions)||[],n(t.functions)})).catch((function(e){a(e)}))}))},setPluginDefaultFuncs:function(e){var t=this;e&&this.isShowFuncs?this.loadPluginsMetaData(e).then((function(e){t.createForm.functions=e.map((function(e){return e.name}))})):this.createForm.functions=[]},getPluginDocLinkByName:function(e,t){var n=c["c"].get(this.lang)[1];if(t&&e){var a="https://github.com/lf-edge/ekuiper/blob/master/docs/".concat(n,"/rules/").concat(e,"/plugin/").concat(t,".md");this.pluginDocLink=a}else this.pluginDocLink=""},getAvailablePlugins:function(e,t){var n=this;p(this.nodeID,e).then((function(e){n.availablePluginsMap=e.data,t&&n.handleNameChange(t),n.isShowFileWaring=!1})).catch((function(e){n.warningMessage=e.response.data,n.isShowFileWaring=!1}))},handleWarnClose:function(){this.warningMessage=""},handleFileWarnClose:function(){this.fileWarningMessage=""},save:function(){var e=this;this.$refs.createForm.validate((function(t){if(t){e.btnLoading=!0;var n=_({},e.createForm),a=n.type,i=n.shellParas;n.shellParas=i.filter((function(e){return""!==e})),delete n.type,m(e.nodeID,n,a).then((function(t){201===t.status&&"Created"===t.statusText?e.$Message.success(t.data):e.$Message.success(e.$t("common.addSuccess")),e.loadData(),e.btnLoading=!1,e.createModalVisible=!1})).catch((function(){e.btnLoading=!1}))}}))},showRegisterFunctions:function(e){var t=e.name;this.showRegisterFuncVisisble=!0,this.registerFuncForm.name=t,this.registerFuncForm.functions=[],this.loadPluginsMetaData(t)},registerFunctions:function(){var e=this;if(0!==this.registerFuncForm.functions.length){var t=this.registerFuncForm,n=t.name,a=t.functions,i={functions:a};v(this.nodeID,n,i).then((function(t){e.registerForm={name:"",functions:[]},e.$Message.success(t.data),e.showRegisterFuncVisisble=!1}))}else this.$Message.warning(this.$t("plugins.functionsRequired"))}}},k=O,C=(n("332e"),n("2877")),P=Object(C["a"])(k,o,r,!1,null,"9c9e60fe",null),j=P.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"services"},[n("Button",{staticClass:"top-create--btn",attrs:{type:"primary"},on:{click:function(t){return e.showCreateModal("create")}}},[e._v(e._s(e.$t("services.registerService")))]),n("Table",{attrs:{loading:e.loading,columns:e.recordsCol,data:e.records}}),n("Modal",{attrs:{"class-name":"services-modal--create",title:e.$t("services.registerService"),width:600,"mask-closable":!1},on:{"on-ok":e.save},model:{value:e.createModalVisible,callback:function(t){e.createModalVisible=t},expression:"createModalVisible"}},[e.createModalVisible?n("Form",{ref:"Record",attrs:{model:e.record,rules:e.rules}},[n("Row",[n("i-col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("common.name"),prop:"name"}},[n("i-input",{attrs:{size:"large"},model:{value:e.record.name,callback:function(t){e.$set(e.record,"name",t)},expression:"record.name"}})],1)],1),n("i-col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("plugins.file"),prop:"file"}},[n("a",{staticClass:"upload-file--link",attrs:{href:"javascript:void(0);"},on:{click:e.showUploadFileModal}},[e._v(" "+e._s(e.$t("upload.uploadFile"))+" ")]),n("FileListAutoCompeleteSeletor",{ref:"fileListSelectRef",attrs:{prefix:"file://",placeholder:"http://127.0.0.1:63767/services/sample.zip"},model:{value:e.record.file,callback:function(t){e.$set(e.record,"file",t)},expression:"record.file"}})],1)],1)],1)],1):e._e(),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:function(t){e.createModalVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),n("Button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.save}},[e._v(e._s(e.$t("common.submit")))])],1)],1),n("Modal",{attrs:{"class-name":"services-modal--view view-form",title:e.$t("services.serviceDetail"),width:700,"mask-closable":!1},model:{value:e.viewModalVisible,callback:function(t){e.viewModalVisible=t},expression:"viewModalVisible"}},[e.viewForm?[n("Divider",[e._v("Interfaces")]),e._l(Object.keys(e.viewForm.interfaces),(function(t){return n("div",{key:t,staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v(e._s(t)+":")]),n("div",[n("Table",{attrs:{columns:e.interfaceCol,data:e.viewForm.interfaces[t]}})],1)])})),n("Divider",[e._v("About")]),n("div",{staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v("Name:")]),n("span",[e._v(e._s(e.viewForm.about.author.name))])]),n("div",{staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v("Description:")]),n("span",[e._v(e._s(e.i18nLabel(e.viewForm.about.description)))])]),n("div",{staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v("Company:")]),n("span",[e._v(e._s(e.viewForm.about.author.company))])]),n("div",{staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v("Email: ")]),n("span",[e._v(e._s(e.viewForm.about.author.email))])]),n("div",{staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v("Website:")]),n("a",{attrs:{rel:"noopener",href:e.viewForm.about.author.website,target:"_blank"}},[e._v(e._s(e.viewForm.about.author.website))])]),n("div",{staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v("Help URL:")]),n("a",{attrs:{rel:"noopener",href:e.i18nLabel(e.viewForm.about.helpUrl),target:"_blank"}},[e._v(" "+e._s(e.$t("common.documentation"))+" ")])])]:e._e(),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:function(t){e.viewModalVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))])],1)],2),n("UploadFileModal",{attrs:{modalVisible:e.uploadFileModalVisible,isSupportCustom:!0,fileAccepts:".zip"},on:{"update:modalVisible":function(t){e.uploadFileModalVisible=t},"update:modal-visible":function(t){e.uploadFileModalVisible=t},reload:e.getFileList}})],1)},x=[],S=n("809e");function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I={name:"Services",mixins:[g["a"],F["a"]],components:{FileListAutoCompeleteSeletor:w["a"],UploadFileModal:y["a"]},data:function(){return{loading:!1,createModalVisible:!1,viewModalVisible:!1,btnLoading:!1,viewLoading:!1,oper:"",record:{},viewForm:null,rules:{name:[{required:!0,message:this.$t("plugins.nameRequired")}],file:[{required:!0,message:this.$t("plugins.fileRequired")}]},uploadFileModalVisible:!1,records:[]}},computed:{recordsCol:function(){var e=this;this.$createElement;return[{title:this.$t("common.name"),key:"name",render:function(t,n){return t("div",[t("a",{attrs:{href:"javascript:;"},on:{click:function(){e.showDetail(n.row)}}},[n.row.name])])}},{title:this.$t("common.operations"),key:"action",width:200,align:"center",render:function(t,n){var a=t("a",{attrs:{href:"javascript:;"},style:"margin-right: 10px;",on:{click:function(){e.editService(n.row)}}},[t("Icon",{attrs:{type:"ios-create"}})]),i=t("a",{attrs:{href:"javascript:;"}},[t("Poptip",{attrs:{confirm:!0,transfer:!0,width:200,title:e.$t("common.confirmDelete"),placement:"top",type:"error"},on:{"on-ok":function(){e.remove(n.row)},"on-cancel":function(){}}},[t("Icon",{attrs:{type:"md-trash"}})])]);return t("div",[a,i])}}]},interfaceCol:function(){return[{title:"Key",key:"key"},{title:"Value",key:"value"}]}},watch:{createModalVisible:function(e){e||(this.$refs.Record.resetFields(),this.record={})},viewModalVisible:function(e){e||(this.viewForm=null)}},created:function(){this.loadData()},methods:{loadData:function(){var e=this;this.loading=!0,this.records=[],Object(S["c"])(this.nodeID).then((function(t){e.records=t.data.map((function(e){return{name:e}})),e.loading=!1})).catch((function(){e.loading=!1}))},showDetail:function(e){var t=this,n=e.name;this.viewModalVisible=!0,this.viewLoading=!0,Object(S["b"])(this.nodeID,n).then((function(e){t.viewForm={interfaces:{},about:{}};var n=e.data,a=n.Interfaces,i=n.About;Object.keys(a).forEach((function(e){t.viewForm.interfaces[e]=Object.keys(a[e]).map((function(t){return{key:t,value:a[e][t]}}))})),t.viewForm.about=i,t.viewLoading=!1})).catch((function(){t.viewLoading=!1}))},editService:function(e){var t=e.name;this.showCreateModal("edit"),this.record={name:t,file:""}},remove:function(e){var t=this,n=e.name;Object(S["a"])(this.nodeID,n).then((function(){t.$Message.success(t.$t("common.deleteSuccess")),t.loadData()})).catch((function(){}))},showCreateModal:function(e){this.oper=e,this.createModalVisible=!0},showUploadFileModal:function(){this.uploadFileModalVisible=!0},getFileList:function(){this.$refs.fileListSelectRef.getFileList()},save:function(){var e=this;this.$refs.Record.validate((function(t){if(t){e.btnLoading=!0;var n=T({},e.record);"create"===e.oper?Object(S["e"])(e.nodeID,n).then((function(t){201===t.status&&"Created"===t.statusText?e.$Message.success(t.data):e.$Message.success(e.$t("common.addSuccess")),e.loadData(),e.btnLoading=!1,e.createModalVisible=!1})).catch((function(){e.btnLoading=!1})):"edit"===e.oper&&Object(S["f"])(e.nodeID,n.name,n).then((function(t){200===t.status&&e.$Message.success(t.data),e.loadData(),e.btnLoading=!1,e.createModalVisible=!1})).catch((function(){e.btnLoading=!1}))}}))}}},R=I,U=(n("1b9d"),Object(C["a"])(R,D,x,!1,null,"62bfd444",null)),N=U.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"function-list"},[n("p",{staticClass:"tip-block"},[n("Icon",{attrs:{type:"md-alert"}}),e._v(" "+e._s(e.$t("services.funcTip"))+" ")],1),n("Table",{attrs:{columns:e.recordsCol,data:e.tableData}})],1)},E=[],B={name:"FunctionList",mixins:[g["a"]],data:function(){return{tableData:[]}},computed:{recordsCol:function(){return[{title:this.$t("services.funcName"),key:"name"}]}},created:function(){this.loadData()},methods:{loadData:function(){var e=this;Object(S["d"])(this.nodeID,this.serviceName).then((function(t){e.tableData=t.data.map((function(e){return{name:e}}))}))}}},q=B,z=(n("d8bd"),Object(C["a"])(q,A,E,!1,null,null,null)),W=z.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Portables"},[n("Button",{staticClass:"top-create--btn",attrs:{type:"primary"},on:{click:function(t){return e.showEditPortableModal("create")}}},[e._v(" "+e._s(e.$t("plugins.createPortable"))+" ")]),n("Table",{attrs:{loading:e.loading,columns:e.recordsCol,data:e.records}}),n("Modal",{attrs:{"class-name":"plugins-modal--create",title:e.portableModalTitle,width:600,"mask-closable":!1},on:{"on-ok":e.save},model:{value:e.createOrUpdateModalVisible,callback:function(t){e.createOrUpdateModalVisible=t},expression:"createOrUpdateModalVisible"}},[e.createOrUpdateModalVisible?n("Form",{ref:"createForm",attrs:{model:e.createForm,rules:e.rules}},[n("Row",[""!==e.warningMessage?n("i-col",{attrs:{span:"24"}},[n("Alert",{attrs:{type:"warning","show-icon":"",closable:""},on:{"on-close":e.handleWarnClose}},[e._v(e._s(e.warningMessage))])],1):e._e(),n("i-col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("common.name"),prop:"name"}},[n("i-input",{attrs:{placeholder:e.$t("plugins.selectOrInput"),size:"large",disabled:e.isUpdatePortable},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1)],1),n("i-col",{staticClass:"file",attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("plugins.file"),prop:"file"}},[n("a",{staticClass:"upload-file--link",attrs:{href:"javascript:void(0);"},on:{click:e.showUploadFileModal}},[e._v(" "+e._s(e.$t("upload.uploadFile"))+" ")]),n("FileListAutoCompeleteSeletor",{ref:"fileListSelectRef",attrs:{prefix:"file://"},model:{value:e.createForm.file,callback:function(t){e.$set(e.createForm,"file",t)},expression:"createForm.file"}})],1)],1),n("i-col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("plugins.shellParas"),prop:"shellParas"}},[n("Tooltip",{attrs:{"max-width":"250px",transfer:"",content:e.$t("plugins.shellParasDesc"),placement:"top"}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("Select",{attrs:{filterable:"",multiple:"","allow-create":"",size:"large",placeholder:e.$t("rules.enterCreate")},on:{"on-create":e.addParams},model:{value:e.createForm.shellParas,callback:function(t){e.$set(e.createForm,"shellParas",t)},expression:"createForm.shellParas"}},e._l(e.shellOptions,(function(t,a){return n("Option",{key:a,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1),0!==e.functions.length?n("i-col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("plugins.functions"),prop:"functions"}},[n("Tooltip",{attrs:{"max-width":"250px",transfer:"",content:e.$t("plugins.functionsDesc"),placement:"top"}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),n("Select",{attrs:{filte:"",rable:"",multiple:"","allow-create":"",size:"large"},model:{value:e.createForm.functions,callback:function(t){e.$set(e.createForm,"functions",t)},expression:"createForm.functions"}},e._l(e.functions,(function(t,a){return n("Option",{key:a.name,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1):e._e()],1)],1):e._e(),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:function(t){e.createOrUpdateModalVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),n("Button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.save}},[e._v(e._s(e.$t("common.submit")))])],1)],1),n("Modal",{attrs:{"class-name":"plugins-modal--view view-form",title:e.$t("plugins.viewPortable"),width:500,"mask-closable":!1},model:{value:e.viewModalVisible,callback:function(t){e.viewModalVisible=t},expression:"viewModalVisible"}},[n("div",{staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v(e._s(e.$t("common.name"))+": ")]),n("span",[e._v(e._s(e.viewForm.name))])]),n("div",{staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v(e._s(e.$t("common.version"))+": ")]),n("span",[e._v(e._s(e.viewForm.version))])]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.viewModalVisible=!1}}},[e._v(e._s(e.$t("common.ok")))])],1)]),n("Modal",{attrs:{"class-name":"plugins-modal--view view-form",title:e.$t("plugins.registerFunction"),width:500,"mask-closable":!1},model:{value:e.showRegisterFuncVisisble,callback:function(t){e.showRegisterFuncVisisble=t},expression:"showRegisterFuncVisisble"}},[n("Select",{attrs:{filterable:"",multiple:"","allow-create":"",size:"large"},on:{"on-create":e.handleCreateName},model:{value:e.registerFuncForm.functions,callback:function(t){e.$set(e.registerFuncForm,"functions",t)},expression:"registerFuncForm.functions"}},e._l(e.functions,(function(t,a){return n("Option",{key:a.name,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:function(t){e.showRegisterFuncVisisble=!1}}},[e._v(e._s(e.$t("common.cancel")))]),n("Button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.registerFunctions}},[e._v(e._s(e.$t("common.submit")))])],1)],1),n("UploadFileModal",{attrs:{modalVisible:e.uploadFileModalVisible,isSupportCustom:!0,fileAccepts:".zip"},on:{"update:modalVisible":function(t){e.uploadFileModalVisible=t},"update:modal-visible":function(t){e.uploadFileModalVisible=t},reload:e.getFileList}})],1)},K=[],J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"portables";return u["a"].get(Object(d["c"])(e,"/plugins/".concat(t)))},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"portables";return u["a"].get(Object(d["c"])(e,"/plugins/".concat(t,"/prebuild")))},Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"portables";return u["a"].post(Object(d["c"])(e,"/plugins/".concat(n)),t)},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"portables",a=Object(d["c"])(e,"/plugins/".concat(n,"/").concat(t.name));return u["a"].put(a,t)},Y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"portables";return u["a"].get(Object(d["c"])(e,"/plugins/".concat(n,"/").concat(t)))},Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"portables";return u["a"].delete(Object(d["c"])(e,"/plugins/".concat(n,"/").concat(t)))},ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u["a"].post(Object(d["c"])(e,"/plugins/functions/".concat(t,"/register")),n)};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie={name:"Portables",mixins:[g["a"]],components:{FileListAutoCompeleteSeletor:w["a"],UploadFileModal:y["a"]},data:function(){return{loading:!1,createOrUpdateModalVisible:!1,isUpdatePortable:!1,viewModalVisible:!1,showRegisterFuncVisisble:!1,btnLoading:!1,registerFuncForm:{name:"",functions:[]},warningMessage:"",viewForm:{},availablePluginsMap:{},shellOptions:[""],functions:[],createForm:{shellParas:[]},rules:{name:[{required:!0,message:this.$t("plugins.nameRequired")}],file:[{required:!0,message:this.$t("plugins.fileRequired")}]},records:[],uploadFileModalVisible:!1}},computed:{recordsCol:function(){var e=this;this.$createElement;return[{title:this.$t("common.name"),key:"name",render:function(t,n){return t("div",[t("a",{attrs:{href:"javascript:;"},on:{click:function(){e.showDetail(n.row)}}},[n.row.name])])}},{title:"Sources",key:"sources",render:function(e,t){return e("div",[t.row.sources.join(",")])}},{title:"Sinks",key:"sinks",render:function(e,t){return e("div",[t.row.sinks.join(",")])}},{title:"Functions",key:"functions",render:function(e,t){return e("div",[t.row.functions.join(",")])}},{title:this.$t("common.operations"),key:"action",width:200,align:"center",render:function(t,n){var a=t("a",{attrs:{href:"javascript:;"},style:"margin-right: 10px;",on:{click:function(){e.showRegisterFunctions(n.row)}}},[t("Icon",{attrs:{type:"ios-paper-plane"}})]);return t("div",[t("a",{attrs:{href:"javascript:;"},style:"margin-right: 10px;",on:{click:function(){e.showEditPortableModal("update",n.row)}}},[t("Icon",{attrs:{type:"md-refresh"}})]),"functions"===n.row.type?a:null,t("a",{attrs:{href:"javascript:;"}},[t("Poptip",{attrs:{confirm:!0,transfer:!0,width:200,title:e.$t("plugins.deletePortableWarning"),placement:"top",type:"error"},on:{"on-ok":function(){e.remove(n.row)},"on-cancel":function(){}}},[t("Icon",{attrs:{type:"md-trash"}})])])])}}]},portableModalTitle:function(){return this.isUpdatePortable?this.$t("plugins.updatePortable"):this.$t("plugins.createPortable")}},watch:{createOrUpdateModalVisible:function(e){e||(this.$refs.createForm.resetFields(),this.createForm={shellParas:[]},this.isUpdatePortable=!1,this.warningMessage="",this.availablePluginsMap={})}},created:function(){var e=this,t=this.$route.query,n=JSON.parse(sessionStorage.getItem("installInfo"))||{},a=n.pluginName;["sources","sinks"].includes(t.fromPageType)&&(this.createForm.name=a,this.getAvailablePlugins(a),setTimeout((function(){e.createOrUpdateModalVisible=!0}),500)),sessionStorage.removeItem("installInfo"),this.loadData()},methods:{loadData:function(){var e=this;this.loading=!0,this.records=[],Promise.all([J(this.nodeID,"portables")]).then((function(t){var n=t.map((function(e){var t=e.data;return{data:t}}));n.forEach((function(t){t.data.forEach((function(t){e.records.push(ne({},t))}))})),e.loading=!1})).catch((function(){e.loading=!1}))},showDetail:function(e){var t=this,n=e.name;this.viewModalVisible=!0,Y(this.nodeID,n).then((function(e){t.viewForm=e.data})).catch((function(){}))},showRegisterFunctions:function(e){var t=e.name;this.showRegisterFuncVisisble=!0,this.registerFuncForm.name=t,this.registerFuncForm.functions=[],this.loadPortablesMetaData(t)},registerFunctions:function(){var e=this;if(0!==this.registerFuncForm.functions.length){var t=this.registerFuncForm,n=t.name,a=t.functions,i={functions:a};ee(this.nodeID,n,i).then((function(t){e.registerForm={name:"",functions:[]},e.$Message.success(t.data),e.showRegisterFuncVisisble=!1}))}else this.$Message.warning(this.$t("plugins.functionsRequired"))},remove:function(e){var t=this,n=e.name;Z(this.nodeID,n).then((function(e){200===e.status&&"OK"===e.statusText?t.$Modal.success({title:t.$t("common.deleteSuccess"),content:t.$t("plugins.deleteNotice")}):t.$Message.success(t.$t("common.deleteSuccess")),t.loadData()})).catch((function(){}))},showEditPortableModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"create",t=arguments.length>1?arguments[1]:void 0;if(this.createOrUpdateModalVisible=!0,this.isUpdatePortable="create"!==e,"update"===e){var n=t.name;this.createForm={name:n,file:"",shellParas:[]},this.loadPortablesMetaData(n)}},editPortable:function(e){var t=this;X(this.nodeID,e).then((function(){t.$Message.success(t.$t("common.updateSuccess")),t.loadData(),t.createOrUpdateModalVisible=!1})).finally((function(){t.btnLoading=!1}))},createNewPortable:function(e){var t=this;Q(this.nodeID,e).then((function(e){201===e.status&&"Created"===e.statusText?t.$Message.success(e.data):t.$Message.success(t.$t("common.addSuccess")),t.loadData(),t.createOrUpdateModalVisible=!1})).finally((function(){t.btnLoading=!1}))},save:function(){var e=this;this.$refs.createForm.validate((function(t){if(t){e.btnLoading=!0;var n=ne({},e.createForm),a=n.shellParas;n.shellParas=a.filter((function(e){return""!==e})),delete n.type,e.isUpdatePortable?e.editPortable(n):e.createNewPortable(n)}}))},getAvailablePlugins:function(e){var t=this;G(this.nodeID).then((function(n){t.availablePluginsMap=n.data,e&&t.handleNameChange(e)})).catch((function(e){t.warningMessage=e.response.data}))},loadPortablesMetaData:function(e){var t=this;Object(l["e"])(this.nodeID).then((function(n){n.data.forEach((function(n){n.name===e&&(t.functions=n.functions)}))}))},handleNameChange:function(e){var t=this.availablePluginsMap[e];this.$set(this.createForm,"file",t)},handleCreateName:function(e){this.createForm.name=e,this.availablePluginsMap[e]="",this.$set(this.createForm,"file","")},handleCreateFunc:function(e){this.registerForm.function.push(e)},handleWarnClose:function(){this.warningMessage=""},addParams:function(e){this.shellOptions.push(e)},showUploadFileModal:function(){this.uploadFileModalVisible=!0},getFileList:function(){this.$refs.fileListSelectRef.getFileList()}}},se=ie,oe=(n("753b"),Object(C["a"])(se,H,K,!1,null,"2c5060bf",null)),re=oe.exports,le=n("101e"),ce={name:"Extension",mixins:[le["a"]],data:function(){var e=["plugins","services","functions","portable"];return{tabArr:e,name:e[0]}},computed:{hiddenTabMap:function(){var e;return(null===(e=this.$store.state.nodeMenuHiddenSettingMap)||void 0===e?void 0:e.extension)||{}}},components:{TabsHead:s["a"],Plugins:j,Services:N,FunctionList:W,Portables:re},methods:{countDefaultActiveTab:function(){var e=this,t=Object.keys(this.hiddenTabMap).filter((function(t){return e.hiddenTabMap[t]})),n=this.tabArr.filter((function(e){return!t.includes(e)}));this.name=n[0]}},mounted:function(){this.countDefaultActiveTab()}},ue=ce,de=(n("58c8"),Object(C["a"])(ue,a,i,!1,null,null,null));t["default"]=de.exports},"4bbd":function(e,t,n){},"58c8":function(e,t,n){"use strict";n("4bbd")},"753b":function(e,t,n){"use strict";n("308f1")},7766:function(e,t,n){"use strict";n("ed50")},"809e":function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u}));var a=n("751a"),i=n("510b"),s=function(e){return a["a"].get(Object(i["c"])(e,"/services"))},o=function(e,t){return a["a"].get(Object(i["c"])(e,"/services/".concat(t)))},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a["a"].post(Object(i["c"])(e,"/services"),t)},l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a["a"].put(Object(i["c"])(e,"/services/".concat(t)),n)},c=function(e,t){return a["a"].delete(Object(i["c"])(e,"/services/".concat(t)))},u=function(e){return a["a"].get(Object(i["c"])(e,"/services/functions"))}},8141:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AutoComplete",{attrs:{data:e.fileList,"filter-method":e.filterMethod,placeholder:e.placeholder,size:e.size,disabled:e.disabled},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})},i=[],s=n("91b6"),o=n("724c"),r={name:"FileListAutoCompeleteSeletor",mixins:[o["a"]],props:{value:{type:String,default:""},size:{type:String,default:"large"},prefix:{type:String,default:""},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"http://127.0.0.1:63767/kuiper-plugins/0.9.1/sinks/alpine/file_arm64.zip"}},data:function(){return{myValue:"",fileList:[]}},watch:{value:{immediate:!0,handler:function(e){this.myValue=e}},myValue:{immediate:!0,handler:function(e){this.$emit("input",e)}}},created:function(){this.getFileList()},methods:{getFileList:function(){var e=this;Object(s["b"])(this.nodeID).then((function(t){null!==t&&void 0!==t&&t.data&&(e.fileList=t.data.map((function(t){return"".concat(e.prefix).concat(t)})))}))},filterMethod:function(e,t){return-1!==t.toUpperCase().indexOf(e.toUpperCase())}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["a"]=u.exports},"8d2f":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs-head"},[e.isFabric||e.isSingleNode?e._e():n("Breadcrumb",[n("BreadcrumbItem",{attrs:{to:"/nodes"}},[e._v(e._s(this.$t("nodes.nodes")))]),n("BreadcrumbItem",[n("Select",{staticClass:"node-select",attrs:{"label-in-value":"",placeholder:e.$t("nodes.currentNode")},on:{"on-change":e.handleNodeChange},model:{value:e.selectNode,callback:function(t){e.selectNode=t},expression:"selectNode"}},e._l(e.nodes,(function(e){return n("Option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1),n("div",[e._l(e.tabsData,(function(t){return[e.hiddenTabs.includes(t.id)?e._e():n("a",{key:t.id,staticClass:"crud-title",class:{active:e.activeTab===t.id},attrs:{href:"javascript:;"},on:{click:function(n){return e.goToTab(t)}}},[e._v(" "+e._s(t.name)+" ")]),e._t("custom-tab")]}))],2)],1)},i=[],s=n("2f62"),o=n("510b");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={name:"TabsCardHead",props:{activeTab:{required:!0,type:String}},data:function(){return{selectNode:""}},computed:l(l({},Object(s["c"])(["isFabric","nodeMenuHiddenSettingMap"])),{},{hiddenTabs:function(){var e=this;return Object.keys(this.nodeMenuHiddenSettingMap).filter((function(t){return!0===e.nodeMenuHiddenSettingMap[t]}))},currentNode:function(){return this.$store.state.currentNode},isSingleNode:function(){return this.$route.params.id===o["a"]},nodes:function(){return this.$store.state.nodes},nodeID:function(){var e=this.$route.params.id||this.$store.state.currentNode.id;return e},tabsData:function(){return[{id:"source",name:this.$t("streams.source")},{id:"rules",name:this.$t("rules.rules")},{id:"extension",name:this.$t("extension.extension")},{id:"configuration",name:this.$t("configuration.configuration")},{id:"system",name:this.$t("system.system")}]}}),created:function(){this.selectNode=this.currentNode.id},methods:l(l({},Object(s["b"])(["SET_CURRENTNODE"])),{},{handleNodeChange:function(e){if(e){var t=e.value,n=e.label;this.SET_CURRENTNODE({id:t,name:n,refresh:!0}),this.$router.replace({name:this.activeTab,params:{id:t}})}},goToTab:function(e){this.$router.push({name:e.id,params:{id:this.nodeID}})}})},d=u,f=(n("7766"),n("2877")),p=Object(f["a"])(d,a,i,!1,null,null,null);t["a"]=p.exports},"91b6":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var a=n("751a"),i=n("510b"),s=function(e){var t=Object(i["c"])(e,"/config/uploads");return a["a"].get(t)},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=Object(i["c"])(e,"/config/uploads"),o={headers:{"Content-Type":"multipart/form-data"}},r=n?a["a"].post(s,t,o):a["a"].post(s,t);return r},r=function(e,t){var n=Object(i["c"])(e,"/config/uploads/".concat(t));return a["a"].delete(n)}},b476:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Upload",{attrs:{"before-upload":e.handleUpload,action:e.action,accept:e.accept,name:"uploadFile"}},[e._t("text",(function(){return[n("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v(e._s(e.$t("upload.selectFile")))])]}))],2)},i=[],s={name:"UploadFile",props:{value:{type:[Object,File],default:null},action:{type:String,default:"#"},accept:{type:String,default:"-"}},data:function(){return{uploadfFles:this.value}},watch:{value:{immediate:!0,handler:function(e){this.uploadfFles=e}},uploadfFles:{immediate:!0,handler:function(e){this.$emit("input",e)}}},methods:{handleUpload:function(e){return this.uploadfFles=e,this.$emit("handleUpload",this.uploadfFles),!1}}},o=s,r=n("2877"),l=Object(r["a"])(o,a,i,!1,null,null,null);t["a"]=l.exports},bd43:function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"l",(function(){return r})),n.d(t,"d",(function(){return l})),n.d(t,"k",(function(){return c})),n.d(t,"m",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return v}));var a=n("751a"),i=n("510b"),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a["a"].get(Object(i["c"])(e,"/rules"),{params:t})},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a["a"].post(Object(i["c"])(e,"/rules"),t)},r=function(e,t){return a["a"].get(Object(i["c"])(e,"/rules/".concat(t)))},l=function(e,t){return a["a"].delete(Object(i["c"])(e,"/rules/".concat(t)))},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a["a"].put(Object(i["c"])(e,"/rules/".concat(t)),n)},u=function(e,t){return a["a"].get(Object(i["c"])(e,"/rules/".concat(t,"/status")))},d=function(e,t){return a["a"].post(Object(i["c"])(e,"/rules/".concat(t,"/restart")))},f=function(e,t){return a["a"].post(Object(i["c"])(e,"/rules/".concat(t,"/start")))},p=function(e,t){return a["a"].post(Object(i["c"])(e,"/rules/".concat(t,"/stop")))},m=function(e,t){return a["a"].get(Object(i["c"])(e,"/rules/".concat(t,"/topo")))},h=function(e){return a["a"].get(Object(i["c"])(e,"/metadata/functions"))},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a["a"].post("/kuiper/".concat(e,"/data/export"),t)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a["a"].post("/kuiper/".concat(e,"/data/import?partial=1"),t)}},c9d9:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return o}));var a=[{value:"en",label:"English"},{value:"zh",label:"简体中文"}],i=new Map([["en",["en","en_US"]],["zh",["zh","zh_CN"]]]),s={sources:"sources",sinks:"sinks",functions:"functions",operators:"operators",connections:"connections"},o=s.sources},d4c2:function(e,t,n){},d8bd:function(e,t,n){"use strict";n("041c")},e7cd:function(e,t,n){},ed50:function(e,t,n){},ef09:function(e,t,n){}}]);