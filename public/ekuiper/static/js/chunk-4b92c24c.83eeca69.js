(window["webpackJsonp_eKuiper"]=window["webpackJsonp_eKuiper"]||[]).push([["chunk-4b92c24c"],{1e3:function(e,t,r){"use strict";r("107c")},"107c":function(e,t,r){},"14e2":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Modal",{attrs:{"class-name":"confkey-modal--view view-form",title:e.modalTitle,width:650,"mask-closable":!1},on:{"on-visible-change":e.closeModal},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("Form",{ref:"confKeyFormRef",attrs:{model:e.confKeyForm}},[r("Row",[r("i-col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:e.$t("common.name"),prop:"name",required:!e.isDetail}},[r("i-input",{attrs:{size:"large",disabled:e.isEdit||e.isDetail},model:{value:e.confKeyForm.name,callback:function(t){e.$set(e.confKeyForm,"name",t)},expression:"confKeyForm.name"}})],1),e.type?e._e():r("FormItem",{attrs:{label:e.$t("common.type"),prop:"confKeyType",required:!e.isDetail}},[r("ConfKeyTypesSeletor",{attrs:{category:e.category,disabled:e.isEdit||e.isDetail},on:{onChange:e.changeConfKeyType},model:{value:e.confKeyForm.confKeyType,callback:function(t){e.$set(e.confKeyForm,"confKeyType",t)},expression:"confKeyForm.confKeyType"}})],1)],1)],1)],1),r("PropertyForm",{ref:"propertyFormRef",attrs:{from:"sources",type:e.confKeyType,properties:e.confKeyProperties.default,form:e.propertiesForm,modalVisible:e.visible,sameLevelFormValid:e.sameLevelFormValid}}),e.isCanAdvanced?r("section",[r("SinkBaseForm",{ref:"advanceFormRef",attrs:{type:e.confKeyType,form:e.advanceForm},on:{changeConnectionSelector:e.changeConnectionSelector}})],1):e._e(),!e.isCanAdvanced&&e.isShowConnectionSelector?r("Form",{attrs:{model:e.confKeyForm}},[r("Row",[r("i-col",{attrs:{span:"12"}},[e.isCanConnection?r("FormItem",{attrs:{label:e.$t("configuration.connectionSelector")}},[r("ConnectionSelector",{attrs:{type:e.confKeyType},on:{onChange:e.changeConnectionSelector},model:{value:e.confKeyForm.connectionSelector,callback:function(t){e.$set(e.confKeyForm,"connectionSelector",t)},expression:"confKeyForm.connectionSelector"}})],1):e._e()],1)],1)],1):e._e(),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text"},on:{click:e.closeModal}},[e._v(e._s(e.$t("common.cancel")))]),r("Button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("common.submit")))]),r("Button",{staticClass:"btn-test-connection",attrs:{type:"primary",ghost:"",loading:e.isLoadingTest},on:{click:function(t){return e.submit("testConnection")}}},[e._v(" "+e._s(e.$t("common.testConnection"))+" ")])],1)],1)},n=[],o=r("a34a"),i=r.n(o),c=r("724c"),s=r("7d99"),l=r("75f3"),u=r("40ee"),d=r("e2635"),f=r("a5ff"),p=r("92ad"),m=r("c9d9"),h=["omitIfEmpty","sendSingle","format","schemaName","schemaMessage","delimiter","dataTemplate","concurrency","bufferLength","enableCache","memoryCacheThreshold","maxDiskCache","cleanCacheAtStop","bufferPageSize","resendInterval","runAsync","connectionSelector"],y=["connectionSelector"],b=["name"],v=["connectionSelector","delimited"];function g(e,t){if(null==e)return{};var r,a,n=w(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function w(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}function C(e,t,r,a,n,o,i){try{var c=e[o](i),s=c.value}catch(l){return void r(l)}c.done?t(s):Promise.resolve(s).then(a,n)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function i(e){C(o,a,n,i,c,"next",e)}function c(e){C(o,a,n,i,c,"throw",e)}i(void 0)}))}}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O={name:"ConfKeyPeopertiesModal",components:{ConfKeyTypesSeletor:u["a"],PropertyForm:l["a"],SinkBaseForm:d["a"],ConnectionSelector:f["a"]},props:{category:{type:String,default:m["a"]},type:{type:String,default:""},confKeyName:{type:String,default:""},modalVisible:{type:Boolean,default:!1},isDetail:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},isCanAdvanced:{type:Boolean,default:!1},isShowConnectionSelector:{type:Boolean,default:!1},title:{type:String,default:""}},mixins:[c["a"]],data:function(){return{RESOURCE_TYPE:m["d"],loading:!1,allConfKeysData:{},confKeyForm:{name:"",confKeyType:"",connectionSelector:""},confKeyProperties:{default:[]},propertiesForm:{},advanceForm:{},isLoadingTest:!1,sameLevelFormValid:!1}},computed:{visible:{get:function(){return this.modalVisible},set:function(e){this.$emit("update:modalVisible",e)}},confKeyType:function(){return this.type||this.confKeyForm.confKeyType},modalTitle:function(){return this.title?this.title:this.isEdit?this.$t("configuration.editConfKey"):this.$t("configuration.addConfKey")},isCanConnection:function(){return["mqtt","edgex"].includes(this.confKeyType)}},watch:{modalVisible:{immediate:!0,handler:function(e){e&&this.type&&this.getFormData()}}},methods:{changeConfKeyType:function(e){e&&this.getFormData()},changeConnectionSelector:function(e){var t=this,r={nodeID:this.nodeID,name:this.confKeyType};Object(s["g"])("connections",r).then((function(r){var a=r.data,n=a[e];t.propertiesForm=S(S({},t.propertiesForm),n)}))},getFormData:function(){var e=this;return x(i.a.mark((function t(){var r,a,n,o,c,l,u,d,f,m,b,v,w,C,x,D,j,O,k,V,T,_,$,I,P,F,A,E,K;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,r={nodeID:e.nodeID,name:e.confKeyType},t.next=5,Object(s["f"])(e.category,r);case 5:if(a=t.sent,n=a.data,o=n.properties,c=(null===o||void 0===o?void 0:o.default)||(Array.isArray(o)?o:[]),c=c.filter((function(e){return"connectionSelector"!==e.name})),!e.isEdit){t.next=22;break}return t.next=13,Object(s["g"])(e.category,r);case 13:l=t.sent,u=l.data,e.allConfKeysData=u,d=e.allConfKeysData[e.confKeyName],f=null,e.isCanAdvanced?(e.confKeyForm={name:e.confKeyName,confKeyType:e.type},m=d.omitIfEmpty,b=d.sendSingle,v=d.format,w=d.schemaName,C=d.schemaMessage,x=d.delimiter,D=d.dataTemplate,j=d.concurrency,O=d.bufferLength,k=d.enableCache,V=d.memoryCacheThreshold,T=d.maxDiskCache,_=d.cleanCacheAtStop,$=d.bufferPageSize,I=d.resendInterval,P=d.runAsync,F=d.connectionSelector,A=g(d,h),f=F?F.split(".")[1]:"",e.advanceForm={omitIfEmpty:m,sendSingle:b,format:v,schemaName:w,schemaMessage:C,delimited:x,dataTemplate:D,concurrency:j,bufferLength:O,enableCache:k,memoryCacheThreshold:V,maxDiskCache:T,cleanCacheAtStop:_,bufferPageSize:$,resendInterval:I,runAsync:P,connectionSelector:f},e.propertiesForm=S({},A)):(E=d.connectionSelector,K=g(d,y),f=E?E.split(".")[1]:"",e.confKeyForm={name:e.confKeyName,confKeyType:e.type,connectionSelector:f},e.propertiesForm=S({},K)),f&&e.changeConnectionSelector(f),t.next=23;break;case 22:e.propertiesForm=Object(p["b"])(c);case 23:e.confKeyProperties.default=c?c.map((function(t){var r=t.control,a=t.type,n=e.allConfKeysData&&e.allConfKeysData[e.confKeyName]&&e.allConfKeysData[e.confKeyName][t.name],o=n||t.default;return"list"!==t.control||"list_object"!==t.type&&"object"!==t.type?t.default=Object(p["f"])(r,a,o):(t.properties=t.default,t.templateData=Object(p["f"])(r,a,o)),"insecureSkipVerify"===t.name&&e.allConfKeysData&&void 0===e.allConfKeysData[t.name]&&(t.default=!0),t})):[];case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[0,,24,27]])})))()},closeModal:function(e){this.visible="boolean"===typeof e&&e,this.visible||(this.$refs.confKeyFormRef.resetFields(),this.$refs.propertyFormRef.resetFields(),this.confKeyProperties={default:[]},this.allConfKeysData={},this.confKeyForm={name:"",confKeyType:""},this.propertiesForm={},this.advanceForm={}),!this.visible&&this.$refs.advanceFormRef&&this.$refs.advanceFormRef.resetFields()},testConnection:function(e,t){var r=this;return x(i.a.mark((function a(){var n;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n={nodeID:r.nodeID,type:e},r.isLoadingTest=!0,Object(s["i"])(r.category,n,t).then((function(){r.$Message.success(r.$t("common.TestConnectionSuccess"))})).finally((function(){r.isLoadingTest=!1}));case 3:case"end":return a.stop()}}),a)})))()},addConfKeyAPI:function(e){var t=new Map([[m["d"].sources,s["b"]],[m["d"].sinks,s["a"]]]);return e&&t.get(e)||t.get("source")},addOrEditConfKey:function(e,t){var r=this;return x(i.a.mark((function a(){var n,o;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=r.addConfKeyAPI(r.category),o=r.confKeyForm.name,n(r.nodeID,e,o,t).then((function(){r.visible=!1,r.$emit("submit",S({name:o},t)),r.isEdit?r.$Message.success(r.$t("common.editSuccess")):r.$Message.success(r.$t("common.addSuccess"))}));case 3:case"end":return a.stop()}}),a)})))()},getSubmitData:function(){var e=this;return x(i.a.mark((function t(){var r,a,n,o,c,s,l,u,d,f,m,h,y;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.confKeyFormRef.validate();case 3:return r=t.sent,e.sameLevelFormValid=r,a=e.$refs.propertyFormRef.validatePropertiesForm,t.next=8,a();case 8:if(r){t.next=12;break}return n=e.$t("common.fillContent"),e.$Message.error(n),t.abrupt("return",Promise.reject(new Error(n)));case 12:return t.next=14,e.$refs.propertyFormRef.getFormData();case 14:if(o=t.sent,o.name,c=g(o,b),s={},!e.isCanAdvanced){t.next=26;break}return t.next=20,e.$refs.advanceFormRef.getFormData();case 20:l=t.sent,u=l.connectionSelector,d=l.delimited,f=g(l,v),m=u?"".concat(e.confKeyType,".").concat(u):"",s=S(S(S(S({},c),f),"delimited"===l.format&&{delimiter:d}),{},{connectionSelector:m}),t.next=29;break;case 26:h=e.confKeyForm.connectionSelector,s=S({},c),h&&(s=S(S({},s),{},{connectionSelector:"".concat(e.confKeyType,".").concat(h)}));case 29:return y=Object(p["e"])(s),t.abrupt("return",Promise.resolve(y));case 33:return t.prev=33,t.t0=t["catch"](0),console.error("error",t.t0),t.abrupt("return",Promise.reject(t.t0));case 37:case"end":return t.stop()}}),t,null,[[0,33]])})))()},submit:function(e){var t=this;return x(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.getSubmitData();case 3:a=r.sent,"testConnection"===e?t.testConnection(t.confKeyType,a):t.addOrEditConfKey(t.confKeyType,a),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.error("error",r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}},k=O,V=(r("17ae"),r("2877")),T=Object(V["a"])(k,a,n,!1,null,"58f1f318",null);t["a"]=T.exports},"17ae":function(e,t,r){"use strict";r("bda5")},"1c62":function(e,t,r){},4041:function(e,t,r){"use strict";var a=r("c9d9");t["a"]={computed:{lang:function(){return this.$store.state.lang},i18nLabel:function(){var e=this;return function(t){if(!t)return"";var r=a["c"].get(e.lang);if(!r)return t[e.lang];var n=t[r[0]]||t[r[1]]||"";return n}}}}},"40ee":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Select",{staticClass:"custom-select",attrs:{size:"large",disabled:e.disabled},on:{"on-change":e.changeType,"on-select":e.selectedType},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}},e._l(e.typeList,(function(t){return r("Option",{key:t.name,attrs:{value:t.name,label:t.name,disabled:!t.about.installed}},[r("div",{staticClass:"title"},[e._v(e._s(t.name))]),t.about.installed?e._e():r("Tooltip",{staticClass:"tag",attrs:{content:e.$t("plugins.installTip"),placement:"top","max-width":"200px",transfer:""}},[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(r){return e.routeToInstallPage(t.name)}}},[e._v(" "+e._s(e.$t("common.install"))+" ")])],1),r("div",{staticClass:"info"},[e._v(e._s(t.about.author.name)+", "+e._s(t.about.author.email))]),r("p",{staticClass:"description"},[e._v(" "+e._s(e.i18nLabel(t.about.description))+" ")])],1)})),1)},n=[],o=r("724c"),i=r("4041"),c=r("570a"),s=r("7d99"),l={name:"ConfKeyTypesSeletor",props:{value:{type:String,default:""},category:{type:String,default:""},disabled:{type:Boolean,default:!1},params:{type:Object,default:function(){}}},mixins:[o["a"],i["a"],c["a"]],data:function(){return{typeList:[]}},computed:{myValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},created:function(){this.getConfKeyTypeList()},methods:{getConfKeyTypeList:function(){var e=this;this.category&&Object(s["f"])(this.category,{nodeID:this.nodeID},this.params).then((function(t){var r=t.data;e.typeList=r||[]}))},changeType:function(e){this.$emit("onChange",e)},selectedType:function(e){var t=this.typeList.find((function(t){return t.name===e.value}));this.$emit("onSelected",t)},routeToInstallPage:function(e){this.goToInstallPluginPage(this.category,e)}}},u=l,d=r("2877"),f=Object(d["a"])(u,a,n,!1,null,null,null);t["a"]=f.exports},"4b1b":function(e,t,r){"use strict";var a,n,o=r("f065"),i={name:"FormatsSelector",extends:o["a"],props:{formats:{type:Array,default:function(){return null}}},created:function(){this.init()},methods:{getList:function(){var e=this;return new Promise((function(t){var r=["json","binary","protobuf","delimited","custom"];e.formats&&(r=e.formats),t(r)}))}}},c=i,s=r("2877"),l=Object(s["a"])(c,a,n,!1,null,null,null);t["a"]=l.exports},5353:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"key-value-editor"},[r("Form",{ref:"tableFormRef",attrs:{model:e.formData,rules:e.rules}},[r("Table",{attrs:{columns:e.tableCol,data:e.formData.tableData},scopedSlots:e._u([{key:"key",fn:function(t){var a=t.index;return[r("Form-item",{attrs:{prop:"tableData."+a+".name",rules:e.rules.name}},[r("i-input",{attrs:{disabled:e.disabled,placeholder:e.formData.tableData[a].name.toString()},model:{value:e.formData.tableData[a].name,callback:function(t){e.$set(e.formData.tableData[a],"name",t)},expression:"formData.tableData[index].name"}})],1)]}},{key:"value",fn:function(t){var a=t.row,n=t.index;return[r("Form-item",{attrs:{prop:"tableData."+n+".default",rules:[{required:e.isDefaultValueRequired(a),trigger:"blur",type:e.itemValueType(a.type)}]}},["int"===a.type?r("i-input",{attrs:{placeholder:e.formData.tableData[n].default.toString(),type:"number",disabled:e.disabled},model:{value:e.formData.tableData[n].default,callback:function(t){e.$set(e.formData.tableData[n],"default",e._n(t))},expression:"formData.tableData[index].default"}}):"bool"===a.type?r("i-switch",{attrs:{size:"small"},model:{value:e.formData.tableData[n].default,callback:function(t){e.$set(e.formData.tableData[n],"default",t)},expression:"formData.tableData[index].default"}}):r("i-input",{attrs:{placeholder:e.formData.tableData[n].default.toString(),disabled:e.disabled},model:{value:e.formData.tableData[n].default,callback:function(t){e.$set(e.formData.tableData[n],"default",t)},expression:"formData.tableData[index].default"}})],1)]}},{key:"action",fn:function(t){var a=t.row,n=t.index;return e.disabled?void 0:[r("Button",{attrs:{shape:"circle",type:"error",size:"small",ghost:""},on:{click:function(t){return e.deleteItem(n,a)}}},[e._v(" "+e._s(e.$t("common.delete"))+" ")])]}}],null,!0)})],1),e.disabled?e._e():r("Button",{staticClass:"add-kv--btn",attrs:{type:"text",icon:"md-add",ghost:""},on:{click:e.addColumn}},[e._v(" "+e._s(e.$t("common.add"))+" ")])],1)},n=[],o=r("a34a"),i=r.n(o),c=r("2ef0"),s=r("92ad");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r,a,n,o,i){try{var c=e[o](i),s=c.value}catch(l){return void r(l)}c.done?t(s):Promise.resolve(s).then(a,n)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function i(e){f(o,a,n,i,c,"next",e)}function c(e){f(o,a,n,i,c,"throw",e)}i(void 0)}))}}var m={name:"KeyValueEditor",model:{prop:"value",event:"update"},props:{value:{type:[Object,Array],default:function(){}},properties:{type:[Array,Object],default:null},templateData:{type:[Object],default:null},disabled:{type:Boolean,default:!1},modalVisible:{type:Boolean,default:!1},submitDataType:{type:String,default:"list"}},data:function(){return{formData:{tableData:[]}}},computed:{tableCol:function(){return[{title:this.$t("common.key"),key:"name",slot:"key"},{title:this.$t("common.value"),key:"default",slot:"value"},{title:this.$t("common.operations"),width:180,slot:"action"}]},rules:function(){return{name:[{required:!0,trigger:"blur"}]}},valueType:function(){return Object(s["a"])(this.value)},submitedDataType:function(){return this.submitDataType},itemValueType:function(){return function(e){if(!e)return"string";var t=new Map([["int","number"],["string","string"],["bool","boolean"],["default","string"]]);return t.get(e)||t.get("default")}},isDefaultValueRequired:function(){return function(e){var t=e.optional,r=!1;return void 0!==t&&null!==t&&(r=!t),r}},propertiesList:function(){var e=this.properties;if(!e)return null;var t=[];if("array"===Object(s["a"])(e))t=e;else if("object"===Object(s["a"])(e)){var r=Object.values(e);r.forEach((function(e){"object"===Object(s["a"])(e)&&t.push(e)}))}return t}},watch:{modalVisible:function(e){e&&this.initDataToList(this.value)},value:{immediate:!0,handler:function(e){this.initDataToList(e)},deep:!0},properties:{immediate:!0,handler:function(){var e=this;return p(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.initDataToList(e.value);case 1:case"end":return t.stop()}}),t)})))()}}},methods:{initDataToList:function(e){var t=this;return p(i.a.mark((function r(){var a,n,o,s,l,u;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=Object(c["cloneDeep"])(e||t.value),n=t.propertiesList,"array"!==t.valueType){r.next=13;break}if(!n||!n.length){r.next=8;break}return o=Object(c["cloneDeep"])(n),null!==a&&void 0!==a&&a.length&&(o=t.mergeArrayValueIntoProperties(n,a)),t.formData.tableData=o,r.abrupt("return");case 8:return s=a||[],r.next=11,t.parseArrayValue(s);case 11:return t.formData.tableData=r.sent,r.abrupt("return");case 13:if("object"!==t.valueType){r.next=23;break}if(l=t.parseJSONValueToList(a),!n||!n.length){r.next=20;break}return u=Object(c["cloneDeep"])(n),a&&Object.keys(a).length&&(u=t.mergeArrayValueIntoProperties(n,l)),t.formData.tableData=u,r.abrupt("return");case 20:return r.next=22,t.parseArrayValue(l);case 22:t.formData.tableData=r.sent;case 23:case"end":return r.stop()}}),r)})))()},defaultItem:function(e){var t=e.name,r=e.default,a=e.type,n=e.control,o=e.optional,i={name:t,default:r,type:a||Object(s["d"])(r),control:n||"text",optional:o||!0};return i},mergeArrayValueIntoProperties:function(e,t){var r=this;if(!e||!t||!t.length&&!e.length)return[];if(!t.length)return e;var a=Object(c["cloneDeep"])(e);return t.forEach((function(e){var t=e.name,n=e.default,o=a.findIndex((function(e){return e.name===t}));if(o>=0)a[o].default=n;else{var i=r.defaultItem(e);a.push(i)}})),a},parseArrayValue:function(e){var t=this,r=[];return e&&Array.isArray(e)&&e.length&&e.forEach((function(e){var a=t.defaultItem(e);r.push(a)})),Promise.resolve(r)},parseJSONValueToList:function(e){if(!e||"object"!==Object(s["a"])(e))return[];var t=[],r=Object.keys(e);return r.forEach((function(r){var a=e[r]||"",n={name:r,type:Object(s["d"])(a)||"string"};if("object"===Object(s["a"])(a)){var o=a.default,i=a.control,c=a.type;n=u(u({},n),{},{default:Object(s["f"])(i,c,o)})}else n=u(u({},n),{},{default:a});t.push(n)})),t},transferData:function(){var e=this;return p(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=null,e.submitedDataType.includes("list")&&(r=e.transferArrayDataToList(e.formData.tableData)),"object"===e.submitedDataType&&(r=e.transferArrayDataToJSON(e.formData.tableData)),e.$emit("update",r),t.abrupt("return",Promise.resolve(r));case 5:case"end":return t.stop()}}),t)})))()},transferArrayDataToList:function(e){if(!e||!Array.isArray(e)||!e.length)return[];var t=[];return e.forEach((function(e){var r=e.name,a=e.default,n=""!==a&&null!==a&&void 0!==a;if(n){var o={name:r,default:a};t.push(o)}})),t},transferArrayDataToJSON:function(e){if(!e||!Array.isArray(e)||!e.length)return{};var t={};return e.forEach((function(e){var r=e.name,a=e.default,n=""!==a&&null!==a&&void 0!==a;n&&(t[r]=a)})),t},deleteItem:function(e){this.formData.tableData.splice(e,1)},addColumn:function(){this.formData.tableData.push({name:"",default:"",type:"string"})},validateKeyValueEditor:function(){var e=this;return p(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.tableFormRef.validate();case 3:return r=t.sent,t.abrupt("return",Promise.resolve(r));case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},h=m,y=(r("d077"),r("2877")),b=Object(y["a"])(h,a,n,!1,null,"0eb1d537",null);t["a"]=b.exports},"570a":function(e,t,r){"use strict";var a=r("724c");t["a"]={mixins:[a["a"]],methods:{goToInstallPluginPage:function(e,t){this.$router.push({name:"extension",params:{id:this.nodeID},query:{fromPageType:e}});var r={fromType:e,pluginName:t};sessionStorage.setItem("installInfo",JSON.stringify(r))}}}},"5a81":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return d}));var a=r("751a"),n=r("510b"),o=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a["a"].post(Object(n["c"])(e,"/schemas/".concat(t)),r)},i=function(e,t){return a["a"].get(Object(n["c"])(e,"/schemas/".concat(t)))},c=function(e){return a["a"].get(Object(n["c"])(e,"/schemas/custom"))},s=function(e){return a["a"].get(Object(n["c"])(e,"/schemas/protobuf"))},l=function(e,t,r){return a["a"].delete(Object(n["c"])(e,"/schemas/".concat(r,"/").concat(t)))},u=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return a["a"].put(Object(n["c"])(e,"/schemas/".concat(t,"/").concat(r)),o)},d=function(e,t,r){return a["a"].get(Object(n["c"])(e,"/schemas/".concat(r,"/").concat(t)))}},"75f3":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"record",staticClass:"actions-property-form",attrs:{model:e.record}},[r("Row",{attrs:{gutter:20}},e._l(e.properties,(function(t,a){return r("i-col",{key:t.name,attrs:{span:["list","textarea"].includes(t.control)?"24":"12"}},[r("FormItem",{attrs:{label:e.i18nLabel(t.label),prop:t.name,"show-message":!1,required:!t.optional&&!e.isDetail&&!(t.connection_related&&e.isSelectConfiguration)}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.i18nLabel(t.hint)}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),"text"===t.control&&"int"!==t.type?r("i-input",{attrs:{type:"password"===t.name?"password":"text",password:"password"===t.name,size:"large",disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,placeholder:t.default?t.default.toString():""},model:{value:e.record[t.name],callback:function(r){e.$set(e.record,t.name,r)},expression:"record[property.name]"}}):e._e(),"textarea"===t.control&&"int"!==t.type?r("i-input",{attrs:{type:"textarea",size:"large",rows:3,disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,placeholder:t.default?t.default.toString():""},model:{value:e.record[t.name],callback:function(r){e.$set(e.record,t.name,r)},expression:"record[property.name]"}}):e._e(),"text"===t.control&&"int"===t.type?r("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,placeholder:t.default?t.default.toString():""},model:{value:e.record[t.name],callback:function(r){e.$set(e.record,t.name,e._n(r))},expression:"record[property.name]"}}):e._e(),"radio"===t.control&&"bool"===t.type?r("div",{staticClass:"radio-control"},[r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record[t.name],expression:"record[property.name]"}],attrs:{disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,id:"true-"+a+"-radio",type:"radio"},domProps:{value:!0,checked:e._q(e.record[t.name],!0)},on:{change:function(r){return e.$set(e.record,t.name,!0)}}}),r("label",{attrs:{for:"true-"+a+"-radio"}},[e._v("True")])]),r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record[t.name],expression:"record[property.name]"}],attrs:{disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,id:"false-"+a+"-radio",type:"radio"},domProps:{value:!1,checked:e._q(e.record[t.name],!1)},on:{change:function(r){return e.$set(e.record,t.name,!1)}}}),r("label",{attrs:{for:"false-"+a+"-radio"}},[e._v("False")])])]):e._e(),"select"===t.control?[r("Select",{attrs:{size:"large",disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,placeholder:t.default?t.default.toString():"",clearable:""},on:{"on-clear":function(r){return e.handleClear(t.name)}},model:{value:e.record[t.name],callback:function(r){e.$set(e.record,t.name,r)},expression:"record[property.name]"}},e._l(t.values,(function(t,a){return r("Option",{key:a,attrs:{value:t}},[e._v(e._s(t))])})),1)]:e._e(),"list"===t.control?["list_object"!==t.type&&"object"!==t.type?r("Select",{attrs:{filterable:"",multiple:"","allow-create":"",size:"large",disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,placeholder:e.$t("rules.enterCreate")},on:{"on-create":e.addField,"on-change":e.handleFieldsChange},model:{value:e.record[t.name],callback:function(r){e.$set(e.record,t.name,r)},expression:"record[property.name]"}},[e.isDetail||"edit"===e.accessType||e.isSelectConfiguration?e._l(e.record[t.name],(function(t,a){return r("Option",{key:a,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})):e._l(e.filedData,(function(t){return r("Option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])}))],2):"headers"===String(t.name).toLocaleLowerCase()?[r("span",{staticClass:"list-objet-mode"},[r("span",{staticClass:"text"},[e._v(e._s(e.$t(""+e.JSONWayText)))]),r("i-switch",{attrs:{size:"small"},on:{"on-change":function(r){return e.changeHeaderMode(t.name)}},model:{value:e.header.mode,callback:function(t){e.$set(e.header,"mode",t)},expression:"header.mode"}})],1),e.valueIsString(t.name)?r("KeyValueTextare",{attrs:{placeholder:e.header.placeholder},model:{value:e.record[t.name],callback:function(r){e.$set(e.record,t.name,r)},expression:"record[property.name]"}}):r("KeyValueEditor",{ref:"keyValueEditorRef",refInFor:!0,attrs:{disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,properties:t.properties||t.default,submitDataType:t.type},model:{value:e.record[t.name],callback:function(r){e.$set(e.record,t.name,r)},expression:"record[property.name]"}})]:"oauth"===String(t.name).toLocaleLowerCase()?r("KeyValueTableTreeEditor",{ref:"keyValueTreeEditorRef",refInFor:!0,attrs:{properties:t.properties||t.default,operable:!1,submitDataType:"object"},model:{value:e.record[t.name],callback:function(r){e.$set(e.record,t.name,r)},expression:"record[property.name]"}}):["list_object","object"].includes(t.type)?r("KeyValueEditor",{ref:"keyValueEditorRef",refInFor:!0,attrs:{templateData:t.templateData,properties:t.properties||t.default,modalVisible:e.modalVisible,disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,submitDataType:t.type},model:{value:e.record[t.name],callback:function(r){e.$set(e.record,t.name,r)},expression:"record[property.name]"}}):e._e()]:e._e()],2)],1)})),1)],1)},n=[],o=r("a34a"),i=r.n(o),c=r("2ef0"),s=r("5353"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("i-input",{staticClass:"json-input",attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:e.placeholder},on:{"on-blur":e.changeValue},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})},u=[],d={name:"KeyValueTextare",props:{value:{type:[Object,String],default:function(){}},placeholder:{type:String,default:"Enter headers"}},data:function(){return{myValue:""}},computed:{valueIsString:function(){return"string"===typeof this.value}},watch:{value:{immediate:!0,handler:function(e){if(e)if(this.valueIsString)this.myValue=e;else{for(var t=Object.entries(e),r="",a=0;a<t.length;a+=1){var n=t[a],o=n[0],i=n[1]||"",c="".concat(o,":").concat(i);r+="".concat(c,"\n")}this.myValue=r.slice(0,r.length-1)}else this.myValue=""}}},methods:{changeValue:function(){if(this.myValue)if(this.valueIsString)this.$emit("input",this.myValue);else{for(var e=this.myValue,t={},r=e.split("\n"),a=0;a<r.length;a+=1){var n=r[a],o=n.indexOf(":");if(n){var i="",c="";o>-1&&n.slice(0,o)?(i=n.slice(0,o).trim(),c=n.slice(o+1).trim()):i=n,t[i]=c}}this.$emit("input",t)}else{var s=this.valueIsString?"":{};this.$emit("input",s)}}}},f=d,p=r("2877"),m=Object(p["a"])(f,l,u,!1,null,null,null),h=m.exports,y=r("724c"),b=r("4041"),v=r("92ad"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{ref:"kv-nested-table",staticClass:"kv-tree-table-form"},[r("Row",{staticClass:"table-wrap",attrs:{gutter:20}},[r("Row",{staticClass:"thead"},[r("i-col",{staticClass:"ityiem-col",attrs:{span:e.fieldColSpan}},[e._v(" "+e._s(e.$t("common.key"))+" ")]),r("i-col",{staticClass:"item-col",attrs:{span:e.fieldColSpan}},[e._v(" "+e._s(e.$t("common.value"))+" ")]),e.operable?r("i-col",{staticClass:"item-col",attrs:{span:e.operableColSpan}},[e._v(" "+e._s(e.$t("common.operations"))+" ")]):e._e()],1),e._l(e.formData.list,(function(t,a){return r("TableTreeItem",{key:a,ref:"tableTreeRef",refInFor:!0,attrs:{index:a,item:t,operable:e.operable,fieldColSpan:e.fieldColSpan,operableColSpan:e.operableColSpan},on:{addItem:e.addItem,removeItem:e.removeItem}})}))],2),e.operable?r("Row",{staticClass:"footer",attrs:{gutter:20}},[r("Button",{staticClass:"btn-add",attrs:{type:"text",icon:"md-add",ghost:""},on:{click:e.addPrimaryItem}},[e._v(" "+e._s(e.$t("common.add"))+" ")])],1):e._e()],1)},w=[],C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"item-row-wrap",class:{"item-row-primary-wrap":1===e.level}},[e.rowValue.children&&e.rowValue.children.length?e.rowValue.children&&e.rowValue.children.length?[r("Row",{staticClass:"item-row item-row-parent",attrs:{gutter:20}},[r("i-col",{staticClass:"item-col icon-arrow-wrap",attrs:{span:e.fieldColSpan}},[r("span",{style:{marginRight:e.rowPaddingLeft+"px"}}),r("Icon",{staticClass:"icon-arrow",attrs:{type:e.rowValue.showChildren?"ios-arrow-down":"ios-arrow-forward"},nativeOn:{click:function(t){return e.isShowChildren(!e.rowValue.showChildren)}}}),r("span",[e._v(e._s(e.rowValue.name))])],1),r("i-col",{staticClass:"item-col",attrs:{span:e.fieldColSpan}}),e.operable?r("i-col",{staticClass:"item-col item-col-oprations",attrs:{span:e.operableColSpan}},[r("Icon",{staticClass:"operation-btn operation-btn-add",attrs:{type:"ios-add-circle-outline",size:20},on:{click:function(t){return t.stopPropagation(),e.addItem(e.rowValue)}}}),r("Icon",{staticClass:"operation-btn operation-btn-remove",attrs:{type:"ios-remove-circle-outline",size:20},on:{click:function(t){return t.stopPropagation(),e.removeItem(e.rowValue)}}})],1):e._e()],1),r("div",{directives:[{name:"show",rawName:"v-show",value:!!e.rowValue.showChildren,expression:"!!rowValue.showChildren"}]},e._l(e.rowValue.children,(function(t,a){return r("TableTreeItem",{key:a,ref:"tableTreeRef",refInFor:!0,staticClass:"item-row-children-wrap",attrs:{index:a,item:t,level:e.childrenLevel,operable:e.operable,fieldColSpan:e.fieldColSpan,operableColSpan:e.operableColSpan},on:{addItem:e.addItem,removeItem:e.removeItem}})})),1)]:e._e():[r("Row",{staticClass:"item-row",class:{"item-row-children":e.level>1},attrs:{gutter:20}},[r("i-col",{staticClass:"item-col icon-arrow-wrap",attrs:{span:e.fieldColSpan}},[r("span",{class:{empty:e.level>2},style:{marginRight:e.rowPaddingLeft+"px"}}),r("span",[e._v(e._s(e.rowValue.name))])]),[e.isHeaderField?r("i-col",{staticClass:"item-col",attrs:{span:e.fieldColSpan}}):r("i-col",{staticClass:"item-col",attrs:{span:e.fieldColSpan}},["bool"===e.rowValue.type?r("i-switch",{attrs:{size:"small"},model:{value:e.rowValue.default,callback:function(t){e.$set(e.rowValue,"default",t)},expression:"rowValue.default"}}):"text"===e.rowValue.control&&"int"===e.rowValue.type?r("i-input",{class:{"error-input":e.rowValue.errorValueMsg},attrs:{type:"number",disabled:e.disabled},on:{"on-blur":function(t){return e.inputValueChange(e.rowValue,"value")}},model:{value:e.rowValue.default,callback:function(t){e.$set(e.rowValue,"default",e._n(t))},expression:"rowValue.default"}}):e._e(),"textarea"===e.rowValue.control&&"int"!==e.rowValue.type?r("i-input",{class:{"error-input":e.rowValue.errorValueMsg},attrs:{type:"textarea",rows:1,disabled:e.disabled},on:{"on-blur":function(t){return e.inputValueChange(e.rowValue,"value")}},model:{value:e.rowValue.default,callback:function(t){e.$set(e.rowValue,"default",t)},expression:"rowValue.default"}}):r("i-input",{class:{"error-input":e.rowValue.errorValueMsg},attrs:{placeholder:String(e.rowValue.default),disabled:e.disabled},on:{"on-blur":function(t){return e.inputValueChange(e.rowValue,"value")}},model:{value:e.rowValue.default,callback:function(t){e.$set(e.rowValue,"default",t)},expression:"rowValue.default"}})],1)],e.isHeaderField?[e.operable?r("i-col",{staticClass:"item-col item-col-oprations",attrs:{span:e.operableColSpan}}):e._e()]:[e.operable?r("i-col",{staticClass:"item-col item-col-oprations",attrs:{span:e.operableColSpan}},[r("Icon",{staticClass:"operation-btn operation-btn-add",attrs:{type:"ios-add-circle-outline",size:20},on:{click:function(t){return t.stopPropagation(),e.addItem(e.rowValue)}}}),r("Icon",{staticClass:"operation-btn operation-btn-remove",attrs:{type:"ios-remove-circle-outline",size:20},on:{click:function(t){return t.stopPropagation(),e.removeItem(e.rowValue)}}})],1):e._e()]],2),e.isHeaderField?[r("Row",{ref:"keyValueEditorRef",staticClass:"item-row item-row-headers",class:{"item-row-children":e.level>1},attrs:{gutter:20}},[r("i-col",{staticClass:"item-col item-col-divider",attrs:{span:24}},[r("Divider",{staticClass:"divider-line"})],1),r("i-col",{staticClass:"item-col item-col-headers",attrs:{span:24}},[r("KeyValueEditor",{staticClass:"keyValueEditorRef",attrs:{submitDataType:e.rowValue.type},model:{value:e.rowValue.default,callback:function(t){e.$set(e.rowValue,"default",t)},expression:"rowValue.default"}})],1)],1)]:e._e()]],2)},x=[];function D(e,t,r,a,n,o,i){try{var c=e[o](i),s=c.value}catch(l){return void r(l)}c.done?t(s):Promise.resolve(s).then(a,n)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function i(e){D(o,a,n,i,c,"next",e)}function c(e){D(o,a,n,i,c,"throw",e)}i(void 0)}))}}var j={name:"TableTreeItem",props:{index:{type:Number,default:null},item:{type:Object,default:function(){}},level:{type:Number,default:1},disabled:{type:Boolean,default:!1},operable:{type:Boolean,default:!0},fieldColSpan:{type:String,default:""},operableColSpan:{type:String,default:""}},components:{KeyValueEditor:s["a"]},data:function(){return{rowValue:{}}},computed:{childrenLevel:function(){return this.level+1},rowPaddingLeft:function(){return this.level>1?10*this.level:0},listObjectType:function(){return["list_object","object"]},isHeaderField:function(){return"headers"===this.rowValue.name&&"list"===this.rowValue.control&&this.listObjectType.includes(this.rowValue.type)}},watch:{item:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){t.rowValue=e}))},deep:!0},rowValue:{immediate:!0,handler:function(e){this.$emit("update:value",e)},deep:!0}},methods:{addItem:function(e){this.$emit("addItem",e)},removeItem:function(e){this.$emit("removeItem",e)},isShowChildren:function(e){this.$set(this.rowValue,"showChildren",e)},validateName:function(e){return""===e.name?this.$set(this.rowValue,"errorNameMsg","error"):this.$set(this.rowValue,"errorNameMsg",""),Promise.resolve(this.rowValue.errorNameMsg)},validateValue:function(e){return e.optional||""!==e.default?this.$set(this.rowValue,"errorValueMsg",""):this.$set(this.rowValue,"errorValueMsg","error"),Promise.resolve(this.rowValue.errorValueMsg)},validateKeyValueEditors:function(){var e=this;return S(i.a.mark((function t(){var r,a,n,o;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=[],a=document.getElementsByClassName("keyValueEditorRef"),Array.from(a).forEach((function(e){var t=e.__vue__,a=t.validateKeyValueEditor;a&&r.push(a())})),r.length){t.next=5;break}return t.abrupt("return",Promise.resolve(!0));case 5:return t.next=7,Promise.allSettled(r);case 7:if(n=t.sent,o=n.every((function(e){return null===e||void 0===e?void 0:e.value})),!o){t.next=11;break}return t.abrupt("return",Promise.resolve(o));case 11:return t.abrupt("return",Promise.reject(e.$t("common.fillContent")));case 12:case"end":return t.stop()}}),t)})))()},inputValueChange:function(e,t){var r=this;return S(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("key"!==t){a.next=5;break}return a.next=3,r.validateName(e);case 3:a.next=8;break;case 5:if("value"!==t){a.next=8;break}return a.next=8,r.validateValue(e);case 8:case"end":return a.stop()}}),a)})))()},transferKeyValueEditorData:function(){return S(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],r=document.getElementsByClassName("keyValueEditorRef"),Array.from(r).forEach((function(e){var r=e.__vue__,a=r.transferData;a&&t.push(a())})),e.next=5,Promise.allSettled(t);case 5:return e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}}),e)})))()}}},O=j,k=(r("bdc8"),Object(p["a"])(O,C,x,!1,null,"e4919eac",null)),V=k.exports;function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t,r,a,n,o,i){try{var c=e[o](i),s=c.value}catch(l){return void r(l)}c.done?t(s):Promise.resolve(s).then(a,n)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function i(e){I(o,a,n,i,c,"next",e)}function c(e){I(o,a,n,i,c,"throw",e)}i(void 0)}))}}var F={name:"KeyValueTableTreeEditor",components:{TableTreeItem:V},model:{prop:"value",event:"update"},props:{value:{type:[Array,Object],default:function(){}},properties:{type:[Array,Object],default:function(){return null}},operable:{type:Boolean,default:!0},submitDataType:{type:String,default:"list"}},data:function(){return{formData:{list:[]}}},computed:{operableColSpan:function(){return this.operable?"4":"0"},fieldColSpan:function(){return this.operable?"10":"12"},valueType:function(){return Object(v["a"])(this.value)},submitedDataType:function(){return this.submitDataType},propertiesList:function(){var e=this.properties;if(!e)return null;var t=[];return"array"===Object(v["a"])(e)?t=e:"object"===Object(v["a"])(e)&&(t=this.parsePropertiesJSONToList(e)),t},listObjectType:function(){return["list_object","object"]}},watch:{value:{immediate:!0,handler:function(e){var t=this;return P(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.initTableData(e,t.propertiesList);case 2:case"end":return r.stop()}}),r)})))()},deep:!0},properties:{immediate:!0,handler:function(e){var t=this;return P(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e&&t.initTableData(t.value,t.propertiesList);case 1:case"end":return r.stop()}}),r)})))()},deep:!0}},methods:{parsePropertiesJSONToList:function(e){var t=this;if(!e||"object"!==Object(v["a"])(e))return[];var r=[],a=Object.keys(e);return a.forEach((function(a){var n=e[a],o=n.default;if("object"===Object(v["a"])(o)&&"headers"!==a){var i=_(_({},n),{},{default:t.parsePropertiesJSONToList(o)});r.push(i)}else if("headers"===a){var c=o||{};"object"===Object(v["a"])(c)&&(c=Object.values(c));var s=_(_({},n),{},{default:c||[]});r.push(s)}else r.push(n)})),r},initTableData:function(e,t){var r=this;return P(i.a.mark((function a(){var n,o,c,s,l,u,d;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("array"!==r.valueType){a.next=13;break}if(!t){a.next=8;break}return n=t,e&&e.length&&(o=r.flatMapArrayValue(e),n=r.mergeArrayValueIntoProperties(t,o)),a.next=6,r.parseArrayValue(n);case 6:return r.formData.list=a.sent,a.abrupt("return");case 8:return c=e||[],a.next=11,r.parseArrayValue(c);case 11:return r.formData.list=a.sent,a.abrupt("return");case 13:if("object"!==r.valueType){a.next=25;break}if(!t){a.next=21;break}return s=t,e&&Object.keys(e).length&&(l=r.parseJSONValueToList(r.value),u=r.flatMapArrayValue(l),s=r.mergeArrayValueIntoProperties(t,u)),a.next=19,r.parseArrayValue(s);case 19:return r.formData.list=a.sent,a.abrupt("return");case 21:return d=r.parseJSONValueToList(e),a.next=24,r.parseArrayValue(d);case 24:r.formData.list=a.sent;case 25:case"end":return a.stop()}}),a)})))()},flatMapArrayValue:function(e){var t=this,r=[];return Array.isArray(e)&&(r=e.flatMap((function(e){var r=e.name,a=e.default,n=e.type;if("array"===Object(v["a"])(a)&&t.listObjectType.includes(n)&&"headers"!==r){var o=(a||[]).map((function(e){var t=e.name,a="".concat(r,"-").concat(t);return _(_({},e),{},{parentWithIndex:a})}));return t.flatMapArrayValue(o)}return e}))),r},mergeArrayValueIntoProperties:function(e,t){var r=this,a=[];return e.forEach((function(e){var n=e.name,o=e.type,i=e.default,c=e.parentWithIndex,s=_({},e);if(r.listObjectType.includes(o)&&"headers"!==n){var l=i.map((function(e){var t=e.name,r="".concat(n,"-").concat(t);return _(_({},e),{},{parentWithIndex:r})}));s=_(_({},s),{},{default:r.mergeArrayValueIntoProperties(l,t)})}else{var u,d=null;d=c?t.find((function(e){return e.parentWithIndex===c})):t.find((function(e){return e.name===n})),s=_(_({},s),{},{default:(null===(u=d)||void 0===u?void 0:u.default)||i})}a.push(s)})),a},parseArrayValue:function(e,t){var r=this,a=[];if(e&&Array.isArray(e)&&e.length){var n=Object(c["cloneDeep"])(e);"array"===Object(v["a"])(n)&&n.forEach(function(){var e=P(i.a.mark((function e(n,o){var c,s,l,u,d,f,p,m,h,y,b,g,w,C;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=n.id,s=n.type,l=n.name,u=n.default,d=n.children,f=n.showChildren,p=n.control,m=n.optional,h=f||!1,y=c||t?"".concat(t).concat(l).concat(o):"".concat(l),"object"!==Object(v["a"])(n)){e.next=19;break}if(b={id:y,name:l||"",default:u||"",type:s||"string",children:[],showChildren:h,control:p,optional:m},!(null!==d&&void 0!==d&&d.length||r.listObjectType.includes(s)&&"headers"!==l)){e.next=15;break}return g=null!==d&&void 0!==d&&d.length?d:u,e.t0=_,e.t1=_({},b),e.t2={},e.next=12,r.parseArrayValue(g,l);case 12:e.t3=e.sent,e.t4={children:e.t3},b=(0,e.t0)(e.t1,e.t2,e.t4);case 15:r.listObjectType.includes(s)&&"headers"===l&&(w=Object(v["a"])(u),C=u||[],"array"!==w&&"object"!==w&&(C=[]),b=_(_({},b),{},{default:C})),a.push(b),e.next=20;break;case 19:a.push({id:y,name:o,default:n||"",type:s,showChildren:h,children:d||[],control:p,optional:m});case 20:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}return Promise.resolve(a)},parseJSONValueToList:function(e){var t=this;if(!e||"object"!==Object(v["a"])(e))return[];var r=[],a=Object.keys(e);return a.forEach((function(a){var n=e[a];if("object"===Object(v["a"])(n)&&"headers"!==a){var o={name:a,type:"list_object",default:t.parseJSONValueToList(n)};r.push(o)}else if("headers"===a){var i=n;"object"===Object(v["a"])(n)&&(i=t.handlerHeadersFormat(n,"list"));var c={name:a,default:i||[],type:"list_object"};r.push(c)}else{var s={name:a,default:n,type:Object(v["a"])(n)};r.push(s)}})),r},findChildren:function(e,t,r){for(var a=0;a<t.length;a+=1){var n=t[a];n.id===e?r(a,n,t):n.children&&this.findChildren(e,n.children,r)}},removeItem:function(e){this.findChildren(e.id,this.formData.list,(function(e,t,r){r.splice(e,1)}))},addItem:function(e){var t=this;this.findChildren(e.id,this.formData.list,(function(r,a){t.$set(e,"showChildren",!0);var n=a.children.length,o="".concat(e.id).concat(n),i={id:o,name:"",default:"",type:"string",children:[],control:"text"};a.children.push(i)}))},addPrimaryItem:function(){var e=this.formData.list.length,t={id:"newPrimaryItem".concat(e),name:"",default:"",type:"string",children:[],control:"text"};this.formData.list.push(t)},transferKeyValueEditorData:function(){var e=this;return P(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],a=e.$refs.tableTreeRef,a.forEach((function(e){var t=e.transferKeyValueEditorData;t&&r.push(t())})),t.next=5,Promise.allSettled(r);case 5:return t.abrupt("return",Promise.resolve());case 6:case"end":return t.stop()}}),t)})))()},validateTable:function(e,t){var r=this,a=Object(c["cloneDeep"])(e)||Object(c["cloneDeep"])(this.formData.list);if(!a.length)return[];for(var n=t||[],o=a.length,i=function(e){var t=a[e],o=t.id,i=t.name,c=t.default,s=t.children,l=t.errorNameMsg,u=t.errorValueMsg,d=t.optional,f=null===s||void 0===s?void 0:s.length;f?r.validateTable(s,n):((l||""===i)&&(t.errorNameMsg="error",r.findChildren(o,r.formData.list,(function(e,a,n){r.$set(n,e,t)})),n.push(o)),(u||!1===d&&""===c)&&(t.errorValueMsg="error",r.findChildren(o,r.formData.list,(function(e,a,n){r.$set(n,e,t)})),n.push(o)))},s=0;s<o;s+=1)i(s);return Promise.resolve(n)},validate:function(){var e=this;return P(i.a.mark((function t(){var r,a,n,o,c;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[e.validateTable(e.formData.list)],a=e.$refs.tableTreeRef,a.forEach((function(e){var t=e.validateKeyValueEditors;t&&r.push(t())})),t.next=5,Promise.allSettled(r);case 5:if(n=t.sent,o=n.every((function(e){var t=e.value;return t&&Array.isArray(t)?!t.length:t})),!o){t.next=12;break}return t.next=10,e.transferKeyValueEditorData();case 10:t.next=14;break;case 12:return c="[name] is validate error",t.abrupt("return",Promise.reject(c));case 14:return t.abrupt("return",Promise.resolve(!0));case 15:case"end":return t.stop()}}),t)})))()},handlerHeadersFormat:function(e,t){if("object"===t&&!e)return{};if(t.includes("list")&&!e)return[];var r=Object(v["a"])(e);if(t.includes("list")){var a=Object(c["cloneDeep"])(e);if("object"===r){var n=Object.keys(e);if(!n.length)return[];a=n.map((function(t){var r=e[t],a={name:t,default:r||"",type:Object(v["a"])(r)};return a}))}return a}if("object"===t){var o=Object(c["cloneDeep"])(e);if("array"===r){if(!e.length)return{};var i={};e.forEach((function(e){var t=e.name,r=e.default;i[t]=r||""})),o=i}return o}return{}},tranaferArrayDataToList:function(e){if(!e||!e.length)return[];for(var t=Object(c["cloneDeep"])(e),r=[],a=0;a<t.length;a+=1){var n=t[a],o=n.name,i=n.default,s=n.children,l=n.type,u={name:o,default:i,type:l};null!==s&&void 0!==s&&s.length&&(u=_(_({},u),{},{default:this.tranaferArrayDataToList(s)})),(""!==i&&void 0!==i&&null!==i||"array"===Object(v["a"])(i)&&i.length)&&r.push(u)}return r},transferArrayDataTOJSON:function(e){if(!e||!Array.isArray(e)||!e.length)return{};for(var t=Object(c["cloneDeep"])(e),r={},a=0;a<t.length;a+=1){var n=t[a],o=n.name,i=n.default,s=n.children,l=n.type;if(null!==s&&void 0!==s&&s.length)r[o]=this.transferArrayDataTOJSON(s);else if("headers"===o&&this.listObjectType.includes(l)){var u=this.handlerHeadersFormat(i,l);r[o]=u}else r[o]=i}return r},transferData:function(){var e=this;return P(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=null,e.submitedDataType.includes("list")&&(r=e.tranaferArrayDataToList(e.formData.list)),"object"===e.submitedDataType&&(r=e.transferArrayDataTOJSON(e.formData.list)),e.$emit("update",r),t.abrupt("return",Promise.resolve(r));case 5:case"end":return t.stop()}}),t)})))()}}},A=F,E=(r("b8ae"),Object(p["a"])(A,g,w,!1,null,"20e91cba",null)),K=E.exports;function L(e,t,r,a,n,o,i){try{var c=e[o](i),s=c.value}catch(l){return void r(l)}c.done?t(s):Promise.resolve(s).then(a,n)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function i(e){L(o,a,n,i,c,"next",e)}function c(e){L(o,a,n,i,c,"throw",e)}i(void 0)}))}}var M={name:"ActionsPropertyForm",components:{KeyValueEditor:s["a"],KeyValueTextare:h,KeyValueTableTreeEditor:K},mixins:[y["a"],b["a"]],props:{isDetail:{type:Boolean,default:!1},properties:{requried:!0,type:Array,default:function(){return[]}},form:{type:Object,default:null},type:{type:String,default:"mqtt"},rule:{type:Boolean,default:!1},modalVisible:{type:Boolean,default:!1},sameLevelFormValid:{type:Boolean,default:!1}},data:function(){return{record:{},accessType:this.$route.query.oper,filedData:[],isSelectConfiguration:!1,header:{mode:!0,placeholder:'{"key":"{{value}}"}'}}},computed:{valueIsString:function(){var e=this;return function(t){var r="string"===typeof e.record[t];return e.header.mode=!r,r}},JSONWayText:function(){return this.header.mode?"rules.visualizationMode":"rules.textMode"}},watch:{form:{handler:function(e){var t=this;this.record=e&&Object.keys(e).length?Object(c["cloneDeep"])(e):{},this.handlerProperties(this.properties),null!==e&&void 0!==e&&e.servers&&e.servers.forEach((function(e){t.filedData.push(e)})),setTimeout((function(){t.$set(t.record,"server",e.server),t.$set(t.record,"port",e.port)}))},deep:!0,immediate:!0},properties:function(e){if(e){var t=e.find((function(e){return"insecureSkipVerify"===e.name}));t&&"boolean"===typeof t.defaul&&(this.record.insecureSkipVerify=t.default),this.handlerProperties(e)}},record:{handler:function(){this.record.connectionSelector?this.isSelectConfiguration=!0:this.isSelectConfiguration=!1},immediate:!0,deep:!0}},methods:{handlerProperties:function(e){var t=this,r=e&&e.filter((function(e){return"list"===e.control&&("list_object"===e.type||"object"===e.type)}));r.forEach((function(e){var r=t.record[e.name]||t.record[e.name.toLocaleLowerCase()];if(!r&&e.default){var a="headers"===e.name.toLocaleLowerCase()?Object(v["c"])(e.default):e.default;t.record[e.name]=a}}))},changeHeaderMode:function(e){this.record[e]=this.header.mode?{}:""},addField:function(e){this.filedData.push(e)},handleFieldsChange:function(e){0===e.length&&e.push("")},getFormData:function(){var e=this;return new Promise((function(t,r){e.$refs.record.validate((function(a){a||r(new Error(e.$t("common.invalidateForm"))),t(e.record)}))}))},handleClear:function(e){var t=this;"connectionSelector"===e&&this.properties.forEach((function(e){e.connection_related&&t.$set(t.record,e.name,e.default)}))},resetFields:function(){this.record={}},transferKeyValueEditorData:function(){var e=this;return N(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$refs.keyValueEditorRef||[],!r.length){t.next=6;break}return a=[],r.forEach(function(){var e=N(i.a.mark((function e(t){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.push(t.transferData());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=6,Promise.allSettled(a);case 6:case"end":return t.stop()}}),t)})))()},transferKeyValueTreeEditorData:function(){var e=this;return N(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$refs.keyValueTreeEditorRef||[],!r.length){t.next=6;break}return a=[],r.forEach(function(){var e=N(i.a.mark((function e(t){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.push(t.transferData());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=6,Promise.allSettled(a);case 6:case"end":return t.stop()}}),t)})))()},validatePropertiesForm:function(){var e=this;return N(i.a.mark((function t(){var r,a,n,o,c;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=[e.$refs.record.validate()],a=e.$refs.keyValueEditorRef||[],n=e.$refs.keyValueTreeEditorRef||[],a.length&&a.forEach((function(e){var t=e.validateKeyValueEditor;r.push(t())})),n.length&&n.forEach((function(e){var t=e.validate;r.push(t())})),t.next=8,Promise.allSettled(r);case 8:if(o=t.sent,c=o.every((function(e){return null===e||void 0===e?void 0:e.value})),!c){t.next=13;break}return e.sameLevelFormValid&&(e.transferKeyValueEditorData(),e.transferKeyValueTreeEditorData()),t.abrupt("return",Promise.resolve(c));case 13:return e.$Message.error(e.$t("common.fillContent")),t.abrupt("return",Promise.reject(e.$t("common.fillContent")));case 17:return t.prev=17,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()}}},R=M,z=(r("bedf"),Object(p["a"])(R,a,n,!1,null,"b84b58d8",null));t["a"]=z.exports},"7d99":function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"f",(function(){return c})),r.d(t,"g",(function(){return s})),r.d(t,"i",(function(){return l})),r.d(t,"h",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return f})),r.d(t,"d",(function(){return p})),r.d(t,"c",(function(){return m}));var a=r("751a"),n=r("510b"),o=r("c9d9"),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(n["c"])(e,"/metadata/resources");return a["a"].get(r,{params:t})},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o["a"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.nodeID,c=t.name,s=Object(n["c"])(i,"/metadata/".concat(e));return c&&(s="".concat(s,"/").concat(c)),a["a"].get(s,{params:r})},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o["a"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.nodeID,c=t.name,s=Object(n["c"])(i,"/metadata/".concat(e,"/yaml"));return c&&(s="".concat(s,"/").concat(c)),a["a"].get(s,{params:r})},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o["a"],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.nodeID,c=t.type;return a["a"].post(Object(n["c"])(i,"/metadata/".concat(e,"/connection/").concat(c)),r)},u=function(e,t){return a["a"].get(Object(n["c"])(e,"/metadata/sources/yaml/".concat(t)))},d=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,c=Object(n["c"])(e,"/metadata/sources/".concat(t,"/confKeys"));return r&&(c="".concat(c,"/").concat(r)),i&&(c="".concat(c,"/").concat(i)),a["a"].put(c,o)},f=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,c=Object(n["c"])(e,"/metadata/sinks/".concat(t,"/confKeys"));return r&&(c="".concat(c,"/").concat(r)),i&&(c="".concat(c,"/").concat(i)),a["a"].put(c,o)},p=function(e,t,r){return a["a"].delete(Object(n["c"])(e,"/metadata/sources/".concat(t,"/confKeys/").concat(r)))},m=function(e,t,r){return a["a"].delete(Object(n["c"])(e,"/metadata/sinks/".concat(t,"/confKeys/").concat(r)))}},"92ad":function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"e",(function(){return d})),r.d(t,"f",(function(){return f})),r.d(t,"b",(function(){return p})),r.d(t,"d",(function(){return m})),r.d(t,"c",(function(){return h}));var a=r("2ef0");function n(e,t){return l(e)||s(e,t)||i(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function s(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(a=r.next()).done);i=!0)if(o.push(a.value),t&&o.length===t)break}catch(s){c=!0,n=s}finally{try{i||null==r["return"]||r["return"]()}finally{if(c)throw n}}return o}}function l(e){if(Array.isArray(e))return e}function u(e){var t=Object.prototype.toString.call(e),r=new Map([["[object String]","string"],["[object Number]","number"],["[object Boolean]","boolean"],["[object Undefined]","undefined"],["[object Object]","object"],["[object Array]","array"],["[object Null]","null"],["[object RegExp]","RegExp"],["[object Symbol]","symbol"],["[object JSON]","json"],["[object Math]","math"],["default","undefined"]]);return r.get(t)||r.get("default")}function d(e){if("object"!==u(e))return e;var t=e,r=Object.keys(t);return r.forEach((function(e){var r=t[e];void 0===r||null===r||""===r?delete t[e]:"object"===u(r)&&(Object.keys(r).length?d(r):delete t[e])})),t}function f(e,t,r){if(void 0===r||null===r){var a=new Map([["text_string",""],["text_int",null],["text_default",""],["textarea_string",""],["textarea_default",""],["radio_bool",null],["radio_default",null],["select_string",""],["select_list_string",""],["select_default",""],["list_string",""],["list_list_object",{}],["list_object",{}],["list_default",""]]),n=a.get("".concat(e,"_").concat(t))||a.get("".concat(e,"_default"));return n}var o=r;return Array.isArray(r)&&(o=r[0]),o}function p(e){if(!Array.isArray(e))return{};var t=Object(a["cloneDeep"])(e);if(!t.length)return{};var r={};return t.forEach((function(e){var t=e.name,a=e.default,n=e.control,o=e.type;r[t]=a||f(n,o,a)})),r}function m(e){var t=Object.prototype.toString.call(e),r=new Map([["[object String]","string"],["[object Number]","int"],["[object Boolean]","bool"],["[object Object]","object"],["default","undefined"]]);return r.get(t)||r.get("default")}function h(e){if(!e)return[];var t=Object(a["cloneDeep"])(e),r=u(t),o=[];return"object"===r?Object.entries(t).forEach((function(e){var t=n(e,2),r=t[0],a=t[1],i="string",c={name:r,default:a||"",type:i};o.push(c)})):"array"===r&&(o=t),o}},a5ff:function(e,t,r){"use strict";var a,n,o=r("f065"),i=r("724c"),c=r("7d99"),s={name:"ConnectionSelector",extends:o["a"],props:{type:{type:String,default:"edgex"},lists:{type:Array,default:function(){return null}}},mixins:[i["a"]],computed:{isCanConnection:function(){var e=this;return function(t){return["mqtt","edgex"].includes(t||e.type)}}},watch:{type:{immediate:!0,handler:function(e){if(this.lists)this.list=this.lists;else if(e){if(this.isCanConnection(e))return void this.init();this.myValue="",this.list=[]}}}},created:function(){this.lists&&(this.list=this.lists)},methods:{getList:function(){var e=this;return new Promise((function(t,r){var a={nodeID:e.nodeID,name:e.type};e.type&&e.isCanConnection(e.type)?Object(c["g"])("connections",a).then((function(e){var r=e.data,a=Object.keys(r);t(a)})).catch((function(e){r(e)})):t([])}))}}},l=s,u=r("2877"),d=Object(u["a"])(l,a,n,!1,null,null,null);t["a"]=d.exports},b8ae:function(e,t,r){"use strict";r("e719")},bd25:function(e,t,r){"use strict";var a=r("5a81");function n(e){return s(e)||c(e)||i(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e){if(Array.isArray(e))return l(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}t["a"]={methods:{getSchemaList:function(e){return new Promise((function(t,r){Promise.allSettled([Object(a["d"])(e),Object(a["c"])(e)]).then((function(e){var r=e[0].value.data,a=e[1].value.data,o=r.map((function(e){return{name:e,type:"protobuf"}})),i=a.map((function(e){return{name:e,type:"custom"}})),c=[].concat(n(o),n(i));t(c)})).catch((function(e){r(e)}))}))}}}},bda5:function(e,t,r){},bdc8:function(e,t,r){"use strict";r("d1cf")},bedf:function(e,t,r){"use strict";r("1c62")},c9d9:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return i}));var a=[{value:"en",label:"English"},{value:"zh",label:"简体中文"}],n=new Map([["en",["en","en_US"]],["zh",["zh","zh_CN"]]]),o={sources:"sources",sinks:"sinks",functions:"functions",operators:"operators",connections:"connections"},i=o.sources},d013:function(e,t,r){"use strict";var a,n,o=r("f065"),i=r("5a81"),c=r("724c"),s=r("bd25"),l={name:"SchemasSelector",extends:o["a"],props:{type:{type:String,default:""}},mixins:[c["a"],s["a"]],watch:{type:{immediate:!0,handler:function(){this.init()}}},methods:{getList:function(){var e=this;return this.type?new Promise((function(t,r){Object(i["e"])(e.nodeID,e.type).then((function(e){var r=e.data||[];t(r)})).catch((function(e){r(e)}))})):this.getSchemaList(this.nodeID)}}},u=l,d=r("2877"),f=Object(d["a"])(u,a,n,!1,null,null,null);t["a"]=f.exports},d077:function(e,t,r){"use strict";r("e5eb")},d1cf:function(e,t,r){},e2635:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"record",staticClass:"base-properties-form",attrs:{model:e.record}},[r("Row",{attrs:{gutter:20}},[r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("rules.omitIfEmpty"),prop:"omitIfEmpty"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.omitIfEmptyDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("div",{staticClass:"radio-control"},[r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record.omitIfEmpty,expression:"record.omitIfEmpty"}],attrs:{id:"true-omit-radio",type:"radio",disabled:e.isDetail},domProps:{value:!0,checked:e._q(e.record.omitIfEmpty,!0)},on:{change:function(t){return e.$set(e.record,"omitIfEmpty",!0)}}}),r("label",{attrs:{for:"true-omit-radio"}},[e._v("True")])]),r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record.omitIfEmpty,expression:"record.omitIfEmpty"}],attrs:{id:"false-omit-radio",type:"radio",disabled:e.isDetail},domProps:{value:!1,checked:e._q(e.record.omitIfEmpty,!1)},on:{change:function(t){return e.$set(e.record,"omitIfEmpty",!1)}}}),r("label",{attrs:{for:"false-omit-radio"}},[e._v("False")])])])],1)],1),r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("rules.sendSingle"),prop:"sendSingle"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.sendSingleDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("div",{staticClass:"radio-control"},[r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record.sendSingle,expression:"record.sendSingle"}],attrs:{disabled:e.isDetail,id:"true-send-radio",type:"radio"},domProps:{value:!0,checked:e._q(e.record.sendSingle,!0)},on:{change:function(t){return e.$set(e.record,"sendSingle",!0)}}}),r("label",{attrs:{for:"true-send-radio"}},[e._v("True")])]),r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record.sendSingle,expression:"record.sendSingle"}],attrs:{disabled:e.isDetail,id:"false-send-radio",type:"radio"},domProps:{value:!1,checked:e._q(e.record.sendSingle,!1)},on:{change:function(t){return e.$set(e.record,"sendSingle",!1)}}}),r("label",{attrs:{for:"false-send-radio"}},[e._v("False")])])])],1)],1),r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("streams.format"),prop:"format"}},[r("FormatsSelector",{on:{onChange:e.changeFormat,clear:e.changeFormat},model:{value:e.record.format,callback:function(t){e.$set(e.record,"format",t)},expression:"record.format"}})],1)],1),"protobuf"===e.record.format||"custom"===e.record.format?r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("streams.schemaName"),prop:"format"}},[r("SchemasSelector",{attrs:{type:e.record.format},on:{onChange:e.changeSchemaName,clear:e.changeSchemaName},model:{value:e.record.schemaName,callback:function(t){e.$set(e.record,"schemaName",t)},expression:"record.schemaName"}})],1)],1):e._e(),"protobuf"===e.record.format||"custom"===e.record.format?r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("streams.schemaMessage"),prop:"format"}},[r("i-input",{attrs:{size:"large"},model:{value:e.record.schemaMessage,callback:function(t){e.$set(e.record,"schemaMessage",t)},expression:"record.schemaMessage"}})],1)],1):e._e(),"delimited"===e.record.format?r("i-col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:e.$t("streams.delimited"),prop:"delimited"}},[r("i-input",{attrs:{size:"large"},model:{value:e.record.delimited,callback:function(t){e.$set(e.record,"delimited",t)},expression:"record.delimited"}})],1)],1):e._e(),r("i-col",{attrs:{span:24}},[r("FormItem",{attrs:{label:e.$t("rules.dataTemplate"),prop:"dataTemplate"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.dataTemplateDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("i-input",{attrs:{type:"textarea",size:"large",rows:3,disabled:e.isDetail},model:{value:e.record.dataTemplate,callback:function(t){e.$set(e.record,"dataTemplate",t)},expression:"record.dataTemplate"}})],1)],1),r("Divider",[r("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.showAdvanced=!e.showAdvanced}}},[e.showAdvanced?r("Icon",{attrs:{type:"ios-arrow-up"}}):r("Icon",{attrs:{type:"ios-arrow-down"}}),e._v(" "+e._s(e.$t("common.advanced"))+" ")],1)]),e.showAdvanced?[r("i-col",{directives:[{name:"show",rawName:"v-show",value:e.isCanConnection,expression:"isCanConnection"}],attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("configuration.connectionSelector"),prop:"connectionSelector"}},[r("ConnectionSelector",{attrs:{type:e.type},on:{onChange:e.changeConnectionSelector},model:{value:e.record.connectionSelector,callback:function(t){e.$set(e.record,"connectionSelector",t)},expression:"record.connectionSelector"}})],1)],1),r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("rules.concurrency"),prop:"concurrency"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.sinkConcurrencyDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"1"},model:{value:e.record.concurrency,callback:function(t){e.$set(e.record,"concurrency",e._n(t))},expression:"record.concurrency"}})],1)],1),r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("rules.bufferLength"),prop:"bufferLength"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.sinkBufferLengthDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"1024"},model:{value:e.record.bufferLength,callback:function(t){e.$set(e.record,"bufferLength",e._n(t))},expression:"record.bufferLength"}})],1)],1),r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("rules.enableCache"),prop:"enableCache"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.enableCacheDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("div",{staticClass:"radio-control"},[r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record.enableCache,expression:"record.enableCache"}],attrs:{id:"true-enable-cache-radio",type:"radio",disabled:e.isDetail},domProps:{value:!0,checked:e._q(e.record.enableCache,!0)},on:{change:function(t){return e.$set(e.record,"enableCache",!0)}}}),r("label",{attrs:{for:"true-enable-cache-radio"}},[e._v("True")])]),r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record.enableCache,expression:"record.enableCache"}],attrs:{disabled:e.isDetail,id:"false-enable-cache-radio",type:"radio"},domProps:{value:!1,checked:e._q(e.record.enableCache,!1)},on:{change:function(t){return e.$set(e.record,"enableCache",!1)}}}),r("label",{attrs:{for:"false-enable-cache-radio"}},[e._v("False")])])])],1)],1),r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("rules.cleanCacheAtStop"),prop:"cleanCacheAtStop"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.cleanCacheAtStopDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("div",{staticClass:"radio-control"},[r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record.cleanCacheAtStop,expression:"record.cleanCacheAtStop"}],attrs:{id:"true-clean-cache-radio",type:"radio",disabled:e.isDetail},domProps:{value:!0,checked:e._q(e.record.cleanCacheAtStop,!0)},on:{change:function(t){return e.$set(e.record,"cleanCacheAtStop",!0)}}}),r("label",{attrs:{for:"true-clean-cache-radio"}},[e._v("True")])]),r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record.cleanCacheAtStop,expression:"record.cleanCacheAtStop"}],attrs:{disabled:e.isDetail,id:"false-clean-cache-radio",type:"radio"},domProps:{value:!1,checked:e._q(e.record.cleanCacheAtStop,!1)},on:{change:function(t){return e.$set(e.record,"cleanCacheAtStop",!1)}}}),r("label",{attrs:{for:"false-clean-cache-radio"}},[e._v("False")])])])],1)],1),r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("rules.memoryCacheThreshold"),prop:"memoryCacheThreshold"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.memoryCacheThresholdDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"1024"},model:{value:e.record.memoryCacheThreshold,callback:function(t){e.$set(e.record,"memoryCacheThreshold",e._n(t))},expression:"record.memoryCacheThreshold"}})],1)],1),r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("rules.maxDiskCache"),prop:"maxDiskCache"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.maxDiskCacheDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"1024000"},model:{value:e.record.maxDiskCache,callback:function(t){e.$set(e.record,"maxDiskCache",e._n(t))},expression:"record.maxDiskCache"}})],1)],1),r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("rules.bufferPageSize"),prop:"bufferPageSize"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.bufferPageSizeDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"256"},model:{value:e.record.bufferPageSize,callback:function(t){e.$set(e.record,"bufferPageSize",e._n(t))},expression:"record.bufferPageSize"}})],1)],1),r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("rules.resendInterval"),prop:"resendInterval"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.resendIntervalDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail,placeholder:"0"},model:{value:e.record.resendInterval,callback:function(t){e.$set(e.record,"resendInterval",e._n(t))},expression:"record.resendInterval"}})],1)],1),r("i-col",{attrs:{span:12}},[r("FormItem",{attrs:{label:e.$t("rules.runAsync"),prop:"runAsync"}},[r("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.$t("rules.runAsyncDesc")}},[r("Icon",{attrs:{type:"md-help-circle"}})],1),r("div",{staticClass:"radio-control"},[r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record.runAsync,expression:"record.runAsync"}],attrs:{disabled:e.isDetail,id:"true-run-radio",type:"radio"},domProps:{value:!0,checked:e._q(e.record.runAsync,!0)},on:{change:function(t){return e.$set(e.record,"runAsync",!0)}}}),r("label",{attrs:{for:"true-run-radio"}},[e._v("True")])]),r("span",{staticClass:"radio-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.record.runAsync,expression:"record.runAsync"}],attrs:{disabled:e.isDetail,id:"false-run-radio",type:"radio"},domProps:{value:!1,checked:e._q(e.record.runAsync,!1)},on:{change:function(t){return e.$set(e.record,"runAsync",!1)}}}),r("label",{attrs:{for:"false-run-radio"}},[e._v("False")])])])],1)],1)]:e._e()],2)],1)},n=[],o=r("2ef0"),i=r("bd25"),c=r("724c"),s=r("a5ff"),l=r("4b1b"),u=r("d013"),d={name:"BasePropertiesForm",mixins:[c["a"],i["a"]],components:{ConnectionSelector:s["a"],FormatsSelector:l["a"],SchemasSelector:u["a"]},props:{type:{type:String,default:""},isDetail:{type:Boolean,default:!1},form:{type:Object,default:null}},data:function(){return{showAdvanced:!1,record:{},schemaNameList:[]}},computed:{isCanConnection:function(){return["mqtt","edgex"].includes(this.type)}},watch:{form:{immediate:!0,handler:function(e){var t=Object.keys(e);t.length?this.record=Object(o["cloneDeep"])(e):this.setDefaultValues()},deep:!0}},methods:{setDefaultValues:function(){this.record={runAsync:!1,omitIfEmpty:!1,sendSingle:!0,dataTemplate:"",bufferLength:1024,enableCache:!1,format:"json",schemaName:"",schemaMessage:"",delimited:""}},getFormData:function(){var e=this;return new Promise((function(t,r){e.$refs.record.validate((function(a){a||r(new Error(e.$t("common.invalidateForm"))),t(e.record)}))}))},resetFields:function(){this.record={}},changeConnectionSelector:function(e){this.$emit("changeConnectionSelector",e)},changeFormat:function(e){this.record.schemaName="",this.changeSchemaName(),this.record.delimited="delimited"===e?",":""},changeSchemaName:function(){this.record.schemaMessage=""}}},f=d,p=(r("1000"),r("2877")),m=Object(p["a"])(f,a,n,!1,null,"a0f844fc",null);t["a"]=m.exports},e5eb:function(e,t,r){},e719:function(e,t,r){},f065:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Select",{ref:"selectRef",class:e.className,attrs:{size:e.size,disabled:e.disabled,clearable:e.clearable,filterable:e.filterable,"allow-create":e.allowCreate},on:{"on-change":e.changeValue,"on-create":e.createItem,"on-open-change":e.openChange,"on-clear":e.clear},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}},e._l(e.list,(function(t){return r("Option",{key:t.name||t,attrs:{value:t.name||t,label:t.name||t,disabled:t.disabled||!1}},[r("span",{staticClass:"title"},[e._v(e._s(t.name||t))])])})),1)},n=[],o=r("a34a"),i=r.n(o);function c(e,t,r,a,n,o,i){try{var c=e[o](i),s=c.value}catch(l){return void r(l)}c.done?t(s):Promise.resolve(s).then(a,n)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function i(e){c(o,a,n,i,s,"next",e)}function s(e){c(o,a,n,i,s,"throw",e)}i(void 0)}))}}var l={name:"TempalteSelector",props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},size:{type:String,default:"large"},className:{type:String,default:""}},data:function(){return{list:[],myValue:""}},watch:{value:{immediate:!0,handler:function(e){this.myValue=e}},myValue:{immediate:!0,handler:function(e){this.$emit("input",e)}}},methods:{init:function(){var e=this;return s(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getList();case 2:e.list=t.sent;case 3:case"end":return t.stop()}}),t)})))()},reload:function(e){this.init(),this.myValue=e},getList:function(){return new Promise((function(e){e(["test1","test2"])}))},changeValue:function(e){var t=this;return void 0===e?(this.myValue=this.value,this.myValue):(this.$nextTick((function(){t.myValue=e;var r=e;e&&(r=t.list.find((function(t){return(null===t||void 0===t?void 0:t.name)===e||t===e}))),t.$emit("onChange",r)})),this.myValue)},createItem:function(e){this.list.push(e)},openChange:function(e){this.$emit("onOpenChange",e)},clear:function(){this.$emit("clear")}}},u=l,d=r("2877"),f=Object(d["a"])(u,a,n,!1,null,null,null);t["a"]=f.exports}}]);