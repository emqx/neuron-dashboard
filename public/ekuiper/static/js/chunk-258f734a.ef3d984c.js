(window["webpackJsonp_eKuiper"]=window["webpackJsonp_eKuiper"]||[]).push([["chunk-258f734a"],{"101e":function(e,t,n){"use strict";var a=n("510b");t["a"]={computed:{isSingleNode:function(){return this.$route.params.id===a["a"]},isSubApp:function(){return this.$store.state.isSubApp},hideTabBar:function(){return this.isSingleNode&&this.isSubApp&&this.$store.state.hideTabBarInNodePage}}}},1063:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return l}));var a=n("751a"),r=n("510b"),o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object(r["b"])(e,"/metadata/connections");return t&&(o="".concat(o,"/").concat(t)),a["a"].get(o,{params:n})},i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object(r["b"])(e,"/metadata/connections/yaml");return t&&(o="".concat(o,"/").concat(t)),a["a"].get(o,{params:n})},c=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return a["a"].put(Object(r["b"])(e,"/metadata/connections/".concat(t,"/confKeys/").concat(n)),o)},s=function(e,t,n){return a["a"].delete(Object(r["b"])(e,"/metadata/connections/".concat(t,"/confKeys/").concat(n)))},l=function(e,t){return a["a"].get(Object(r["b"])(e,"/metadata/connections/yaml/".concat(t)))}},2182:function(e,t,n){},"22bf":function(e,t,n){},5353:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"key-value-editor"},[e.disabled?e._e():n("Button",{staticClass:"top-create--btn",attrs:{icon:"md-add",type:"primary",ghost:""},on:{click:e.addColumn}},[e._v(" "+e._s(e.$t("common.add"))+" ")]),n("Table",{attrs:{columns:e.tableCol,data:e.tableData},scopedSlots:e._u([{key:"key",fn:function(t){var a=t.row,r=t.index;return[n("i-input",{attrs:{disabled:e.disabled||!!a.state,placeholder:e.tableData[r].name.toString()},on:{"on-change":function(t){return e.atInputChange(a)}},model:{value:e.tableData[r].name,callback:function(t){e.$set(e.tableData[r],"name",t)},expression:"tableData[index].name"}})]}},{key:"value",fn:function(t){var a=t.row,r=t.index;return["int"!==a.type?n("i-input",{attrs:{placeholder:e.tableData[r].default.toString(),disabled:e.disabled},on:{"on-change":function(t){return e.atInputChange(a)}},model:{value:e.tableData[r].default,callback:function(t){e.$set(e.tableData[r],"default",t)},expression:"tableData[index].default"}}):n("i-input",{attrs:{placeholder:e.tableData[r].default.toString(),type:"number",disabled:e.disabled},on:{"on-change":function(t){return e.atInputChange(a)}},model:{value:e.tableData[r].default,callback:function(t){e.$set(e.tableData[r],"default",e._n(t))},expression:"tableData[index].default"}})]}},{key:"action",fn:function(t){var a=t.row,r=t.index;return e.disabled?void 0:[n("Button",{attrs:{shape:"circle",type:"error",size:"small",ghost:""},on:{click:function(t){return e.deleteItem(r,a)}}},[e._v(" "+e._s(e.$t("common.delete"))+" ")])]}}],null,!0)})],1)},r=[];function o(e,t){return u(e)||l(e,t)||c(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done);i=!0)if(o.push(a.value),t&&o.length===t)break}catch(s){c=!0,r=s}finally{try{i||null==n["return"]||n["return"]()}finally{if(c)throw r}}return o}}function u(e){if(Array.isArray(e))return e}var d={name:"KeyValueEditor",model:{prop:"value",event:"update"},props:{value:{type:Object,default:function(){return{}}},templateData:{type:Object,default:null},disabled:{type:Boolean,default:!1},modalVisible:{type:Boolean,default:!1}},watch:{modalVisible:function(e){e&&this.initTableData()}},data:function(){return{tableCol:[{title:this.$t("common.key"),key:"name",slot:"key"},{title:this.$t("common.value"),key:"default",slot:"value"},{title:this.$t("common.operations"),width:180,slot:"action"}],tableData:[]}},created:function(){this.initTableData(),this.atInputChange()},methods:{initTableData:function(){if(this.templateData&&!this.value){var e=this.templateData?this.templateData:{};this.tableData=Object.keys(e).map((function(t){return{name:t,default:e[t]||"",type:"string",state:0}}))}else if(this.value){var t=[],n=this.value;Array.isArray(n)?n.forEach((function(e,n){t.push({name:n,default:e||"",state:1})})):Object.entries(n).forEach((function(e){var n=o(e,2),a=n[0],r=n[1],i="number"===typeof r?"int":"string";t.push({name:a,default:r||"",type:i,state:1})})),this.tableData=t}},atInputChange:function(){var e={};this.tableData.forEach((function(t){var n=t.name;""===t.default?e[n]=void 0:e[n]=t.default})),this.$emit("update",e)},deleteItem:function(e){this.tableData.splice(e,1),this.atInputChange()},addColumn:function(){this.tableData.push({name:"",default:"",state:0,type:"string"})}}},f=d,m=n("2877"),p=Object(m["a"])(f,a,r,!1,null,null,null);t["a"]=p.exports},"71cc":function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"j",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return p}));var a=n("751a"),r=n("510b"),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a["a"].get(Object(r["b"])(e,"/streams"),{params:t})},i=function(e,t){return a["a"].get(Object(r["b"])(e,"/streams/".concat(t)))},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a["a"].post(Object(r["b"])(e,"/streams"),t)},s=function(e,t){return a["a"].delete(Object(r["b"])(e,"/streams/".concat(t)))},l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a["a"].put(Object(r["b"])(e,"/streams/".concat(t)),n)},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object(r["b"])(e,"/metadata/sources");return t&&(o="".concat(o,"/").concat(t)),a["a"].get(o,{params:n})},d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object(r["b"])(e,"/metadata/sources/yaml");return t&&(o="".concat(o,"/").concat(t)),a["a"].get(o,{params:n})},f=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,c=Object(r["b"])(e,"/metadata/sources/".concat(t,"/confKeys"));return n&&(c="".concat(c,"/").concat(n)),i&&(c="".concat(c,"/").concat(i)),a["a"].put(c,o)},m=function(e,t,n){return a["a"].delete(Object(r["b"])(e,"/metadata/sources/".concat(t,"/confKeys/").concat(n)))},p=function(e,t){return a["a"].get(Object(r["b"])(e,"/metadata/sources/yaml/".concat(t)))}},"724c":function(e,t,n){"use strict";t["a"]={computed:{nodeID:function(){return this.$route.params.id||this.$store.state.currentNode.id}}}},"75f3":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Form",{ref:"record",staticClass:"actions-property-form",attrs:{model:e.record}},[n("Row",{attrs:{gutter:20}},e._l(e.properties,(function(t,a){return n("i-col",{key:t.name,attrs:{span:["list","textarea"].includes(t.control)?"24":"12"}},[n("FormItem",{attrs:{label:t.label[e.lang],prop:t.name,"show-message":!1,required:!t.optional&&!e.isDetail&&!(t.connection_related&&e.isSelectConfiguration)}},[n("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:t.hint[e.lang]}},[n("Icon",{attrs:{type:"md-help-circle"}})],1),"text"===t.control&&"int"!==t.type?n("i-input",{attrs:{type:"password"===t.name?"password":"text",password:"password"===t.name,size:"large",disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,placeholder:t.default?t.default.toString():""},model:{value:e.record[t.name],callback:function(n){e.$set(e.record,t.name,n)},expression:"record[property.name]"}}):e._e(),"textarea"===t.control&&"int"!==t.type?n("i-input",{attrs:{type:"textarea",size:"large",rows:3,disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,placeholder:t.default?t.default.toString():""},model:{value:e.record[t.name],callback:function(n){e.$set(e.record,t.name,n)},expression:"record[property.name]"}}):e._e(),"text"===t.control&&"int"===t.type?n("i-input",{attrs:{type:"number",size:"large",disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,placeholder:t.default?t.default.toString():""},model:{value:e.record[t.name],callback:function(n){e.$set(e.record,t.name,e._n(n))},expression:"record[property.name]"}}):e._e(),"radio"===t.control&&"bool"===t.type?n("div",{staticClass:"radio-control"},[n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record[t.name],expression:"record[property.name]"}],attrs:{disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,id:"true-"+a+"-radio",type:"radio"},domProps:{value:!0,checked:e._q(e.record[t.name],!0)},on:{change:function(n){return e.$set(e.record,t.name,!0)}}}),n("label",{attrs:{for:"true-"+a+"-radio"}},[e._v("True")])]),n("span",{staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.record[t.name],expression:"record[property.name]"}],attrs:{disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,id:"false-"+a+"-radio",type:"radio"},domProps:{value:!1,checked:e._q(e.record[t.name],!1)},on:{change:function(n){return e.$set(e.record,t.name,!1)}}}),n("label",{attrs:{for:"false-"+a+"-radio"}},[e._v("False")])])]):e._e(),"select"===t.control?[n("Select",{attrs:{size:"large",disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,placeholder:t.default?t.default.toString():"",clearable:""},on:{"on-change":function(n){return e.selectChange(n,t.name)},"on-clear":function(n){return e.handleClear(t.name)}},model:{value:e.record[t.name],callback:function(n){e.$set(e.record,t.name,n)},expression:"record[property.name]"}},e._l(t.values,(function(t,a){return n("Option",{key:a,attrs:{value:t}},[e._v(e._s(t))])})),1)]:e._e(),"list"===t.control&&"list_object"!==t.type&&"object"!==t.type?[n("Select",{attrs:{filterable:"",multiple:"","allow-create":"",size:"large",disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration,placeholder:e.$t("rules.enterCreate")},on:{"on-create":e.addField,"on-change":e.handleFieldsChange},model:{value:e.record[t.name],callback:function(n){e.$set(e.record,t.name,n)},expression:"record[property.name]"}},[e.isDetail||"edit"===e.accessType||e.isSelectConfiguration?e._l(e.record[t.name],(function(t,a){return n("Option",{key:a,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})):e._l(e.filedData,(function(t,a){return n("Option",{key:a,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])}))],2)]:e._e(),"list"===t.control&&"list_object"===t.type?[n("KeyValueEditor",{attrs:{templateData:t.default,modalVisible:e.modalVisible,disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration},model:{value:e.record[t.name],callback:function(n){e.$set(e.record,t.name,n)},expression:"record[property.name]"}})]:e._e(),"list"===t.control&&"object"===t.type?[n("KeyValueEditor",{attrs:{disabled:e.isDetail||t.connection_related&&e.isSelectConfiguration},model:{value:e.record[t.name],callback:function(n){e.$set(e.record,t.name,n)},expression:"record[property.name]"}})]:e._e()],2)],1)})),1)],1)},r=[],o=n("2ef0"),i=n.n(o),c=n("5353"),s=n("1063"),l=n("724c"),u={name:"ActionsPropertyForm",components:{KeyValueEditor:c["a"]},mixins:[l["a"]],props:{isDetail:{type:Boolean,default:!1},properties:{requried:!0,type:Array},form:{type:Object,default:null},type:{type:String,default:"mqtt"},rule:{type:Boolean,default:!1},modalVisible:{type:Boolean,default:!1}},computed:{lang:function(){return this.$store.state.lang}},watch:{form:{handler:function(e){var t=this;this.record=i.a.cloneDeep(e);var n=this.properties&&this.properties.filters((function(e){return"list"===e.control&&"list_object"===e.type}));n.forEach((function(e){!t.record[e.name]&&e.default&&(t.record[e.name]=e.default)})),e.servers&&e.servers.forEach((function(e){t.filedData.push(e)})),setTimeout((function(){t.$set(t.record,"server",e.server),t.$set(t.record,"port",e.port)}))},deep:!0},properties:function(e){if(e){var t=e.find((function(e){return"insecureSkipVerify"===e.name}));t&&"boolean"===typeof t.defaul&&(this.record.insecureSkipVerify=t.default)}},record:{handler:function(e){this.record.connectionSelector?this.isSelectConfiguration=!0:this.isSelectConfiguration=!1},immediate:!0,deep:!0}},data:function(){return{record:{},accessType:this.$route.query.oper,filedData:[""],isSelectConfiguration:!1}},methods:{addField:function(e){this.filedData.push(e)},removeField:function(e,t){e.splice(t,1)},getFormData:function(){var e=this;return new Promise((function(t,n){e.$refs.record.validate((function(a){a||n(new Error(e.$t("common.invalidateForm"))),t(e.record)}))}))},handleFieldsChange:function(e){0===e.length&&e.push("")},selectChange:function(e,t){var n=this;e&&"connectionSelector"===t&&Object(s["e"])(this.nodeID,this.type).then((function(t){n.record={};var a=t.data,r=a[e];if(r.connectionSelector=e,n.rule){r.clientId=r.clientid;var o=n.properties.find((function(e){return"server"===e.name}));o&&"string"===o.type&&r.servers&&(r.server=r.servers?r.servers[0]:"")}Object.keys(r).forEach((function(e){n.record[e]=r[e]})),n.isSelectConfiguration=!0}))},handleClear:function(e){var t=this;"connectionSelector"===e&&this.properties.forEach((function(e){e.connection_related&&t.$set(t.record,e.name,e.default)}))},resetFields:function(){this.record={}}}},d=u,f=(n("ebec"),n("2877")),m=Object(f["a"])(d,a,r,!1,null,null,null);t["a"]=m.exports},7766:function(e,t,n){"use strict";n("ed50")},"8a7a":function(e,t,n){"use strict";n("2182")},"8d2f":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs-head"},[e.isFabric||e.isSingleNode?e._e():n("Breadcrumb",[n("BreadcrumbItem",{attrs:{to:"/nodes"}},[e._v(e._s(this.$t("nodes.nodes")))]),n("BreadcrumbItem",[n("Select",{staticClass:"node-select",attrs:{"label-in-value":"",placeholder:e.$t("nodes.currentNode")},on:{"on-change":e.handleNodeChange},model:{value:e.selectNode,callback:function(t){e.selectNode=t},expression:"selectNode"}},e._l(e.nodes,(function(e){return n("Option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1),n("div",[e._l(e.tabsData,(function(t,a){return[e.hiddenTabs.includes(t.id)?e._e():n("a",{key:a,staticClass:"crud-title",class:{active:e.activeTab===t.id},attrs:{href:"javascript:;"},on:{click:function(n){return e.$router.push(t.route)}}},[e._v(" "+e._s(t.name)+" ")])]})),e._t("custom-tab")],2)],1)},r=[],o=n("2f62"),i=n("510b");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={name:"TabsCardHead",props:{activeTab:{required:!0,type:String}},data:function(){return{selectNode:""}},computed:s(s({},Object(o["c"])(["isFabric","nodeMenuHiddenSettingMap"])),{},{hiddenTabs:function(){var e=this;return Object.keys(this.nodeMenuHiddenSettingMap).filter((function(t){return!0===e.nodeMenuHiddenSettingMap[t]}))},currentNode:function(){return this.$store.state.currentNode},isSingleNode:function(){return this.$route.params.id===i["a"]},nodes:function(){return this.$store.state.nodes},tabsData:function(){var e=this.$route.params.id||this.$store.state.currentNode.id;return[{id:"source",route:{name:"source",params:{id:e,name:0}},name:this.$t("streams.source")},{id:"rules",route:{name:"rules",params:{id:e}},name:this.$t("rules.rules")},{id:"extension",route:{name:"plugins",params:{id:e}},name:this.$t("extension.extension")},{id:"configuration",route:{name:"Sources",params:{id:e}},name:this.$t("configuration.configuration")},{id:"system",route:{name:"system",params:{id:e}},name:this.$t("system.system")}]}}),created:function(){this.selectNode=this.currentNode.id},methods:s(s({},Object(o["b"])(["SET_CURRENTNODE"])),{},{handleNodeChange:function(e){if(e){var t=e.value,n=e.label;this.SET_CURRENTNODE({id:t,name:n,refresh:!0}),this.$router.replace({params:{id:t}})}}})},d=u,f=(n("7766"),n("2877")),m=Object(f["a"])(d,a,r,!1,null,null,null);t["a"]=m.exports},a26e:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"configuration"},[e.hideTabBar?e._e():n("TabsHead",{attrs:{"active-tab":"configuration"}}),n("Card",[n("Tabs",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[e.hiddenTabMap.sourceConfig?e._e():n("TabPane",{attrs:{name:e.tabArr[0],label:e.$t("streams.sourceConfig")}},[e.name===e.tabArr[0]?n("Sources",{staticClass:"tab-body"}):e._e()],1),e.hiddenTabMap.connection?e._e():n("TabPane",{attrs:{name:e.tabArr[1],label:e.$t("configuration.connection")}},[e.name===e.tabArr[1]?n("Connections",{staticClass:"tab-body"}):e._e()],1)],1)],1)],1)},r=[],o=n("8d2f"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"configuration"},[n("Table",{attrs:{loading:e.loading,columns:e.recordsCol,data:e.ConnectionssData}})],1)},c=[],s=n("724c"),l=n("1063"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"config-keys"},[n("Row",{staticClass:"expand-header"},[n("h3",[e._v(" "+e._s(e.$t("streams.confKey"))+" "),e.row.about.installed?n("Button",{staticClass:"add-confkey",attrs:{icon:"md-add",type:"primary",ghost:"",shape:"circle",size:"small"},on:{click:e.showAddModal}}):e._e()],1)]),n("Table",{attrs:{loading:e.loading,columns:e.confKeyCol,data:e.confKeys}}),n("Modal",{attrs:{"class-name":"confkey-modal--view view-form",title:e.isEdit?e.$t("streams.editConfKey"):e.isDetail?e.$t("streams.viewConfKey"):e.$t("streams.addConfKey"),width:650,"mask-closable":!1},on:{"on-visible-change":e.handleVisibleChange},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[e.isDetail?n("div",{staticClass:"view-form"},e._l(e.confKeyForm,(function(t,a){return n("div",{key:a,staticClass:"view-item"},[n("label",{staticClass:"view-item--label"},[e._v(e._s(a)+": ")]),"object"===typeof t?[n("KeyValueEditor",{staticClass:"detail-key-value-table",attrs:{disabled:e.isDetail,value:t}})]:n("span",[e._v(e._s(t))])],2)})),0):[n("Form",{ref:"confKeyForm",attrs:{model:e.confKeyForm}},[n("Row",[n("i-col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:e.$t("common.name"),prop:"name",required:!e.isDetail}},[n("i-input",{attrs:{size:"large",disabled:e.isDetail||e.isEdit},model:{value:e.confKeyForm.name,callback:function(t){e.$set(e.confKeyForm,"name",t)},expression:"confKeyForm.name"}})],1)],1)],1)],1),e.isDetail?e._e():n("PropertyForm",{ref:"propertyForm",attrs:{from:"sources",properties:e.confKeysProperties.default,form:e.confKeyForm,type:e.row.name,modalVisible:e.modalVisible},on:{fitNmae:e.fitNmae}})],n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:function(t){e.modalVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e.isDetail?e._e():n("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("common.submit")))])],1)],2)],1)},d=[],f=n("71cc"),m=n("75f3"),p=n("5353"),h=["name"];function b(e,t){return $(e)||D(e,t)||v(e,t)||y()}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function D(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done);i=!0)if(o.push(a.value),t&&o.length===t)break}catch(s){c=!0,r=s}finally{try{i||null==n["return"]||n["return"]()}finally{if(c)throw r}}return o}}function $(e){if(Array.isArray(e))return e}function w(e,t){if(null==e)return{};var n,a,r=C(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}function O(e){return O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k={name:"ConfigKeys",components:{PropertyForm:m["a"],KeyValueEditor:p["a"]},mixins:[s["a"]],props:{row:{type:Object,required:!0},configType:{type:String}},data:function(){var e=this;this.$createElement;return{loading:!1,modalVisible:!1,confKeys:[],confKeyForm:{},isDetail:!1,confKeysProperties:{default:[]},isEdit:!1,confKeyCol:[{title:this.$t("common.name"),render:function(t,n){var a=n.row.name;return t("div",[t("a",{attrs:{href:"javascript:;"},on:{click:function(){e.loadConfKeyDetail(a)}}},[a])])}},{title:this.$t("common.operations"),align:"center",render:function(t,n){var a=t("span",[t("a",{attrs:{herf:"javascript:;"},style:"margin-right:5px;",on:{click:function(){return e.editConfKey(n.row)}}},[t("Icon",{attrs:{type:"ios-create-outline"}})]),t("a",{attrs:{herf:"javascript:;"},on:{click:function(){return e.removeConfKey(n.row)}}},[t("Icon",{attrs:{type:"md-trash"}})])]),r=e.row.about.installed&&"default"!==n.row.name;return t("div",[r?a:null])}}],connectionsYamls:[]}},computed:{isConnection:function(){return"connection"===this.configType}},created:function(){this.isConnection?(this.getData=l["c"],this.getDataYaml=l["d"],this.loadDataDetail=l["e"],this.addDataConfKey=l["a"],this.deleteDataConfKey=l["b"]):(this.getData=f["e"],this.getDataYaml=f["f"],this.loadDataDetail=f["g"],this.addDataConfKey=f["a"],this.deleteDataConfKey=f["c"]),this.loadData()},methods:{loadData:function(){this.loadConfKeyProperties()},loadConfKeyProperties:function(){var e=this;this.getData(this.nodeID,this.row.name).then((function(t){e.getDataYaml(e.nodeID,e.row.name).then((function(n){e.confKeys=Object.keys(n.data).map((function(e){return{name:e}})),["mqtt","edgex"].includes(e.row.name)?Object(l["d"])(e.nodeID,e.row.name).then((function(a){e.confKeysProperties.default=t.data.properties.default.map((function(t){return t.default=e.getDefaultValue(n.data.default?n.data.default[t.name]:""),"insecureSkipVerify"===t.name&&n.data.default&&void 0===n.data.default[t.name]&&(t.default=!0),"connectionSelector"===t.name&&(t.values=Object.keys(a.data)),t}))||[]})):e.confKeysProperties.default=t.data.properties.default.map((function(t){return t.default=e.getDefaultValue(n.data.default?n.data.default[t.name]:""),"insecureSkipVerify"===t.name&&n.data.default&&void 0===n.data.default[t.name]&&(t.default=!0),t}))||[]}))}))},fitNmae:function(e){this.confKeyForm={name:e}},getDefaultValue:function(e){var t=e;return Array.isArray(e)&&(t=e[0]),t},showAddModal:function(){this.isEdit=!1,this.isDetail=!1,this.modalVisible=!0},loadConfKeyDetail:function(e){var t=this;this.isDetail=!0,this.modalVisible=!0,this.loadDataDetail(this.nodeID,this.row.name).then((function(n){var a=n.data,r=a[e];t.confKeyForm=j({name:e},r)}))},removeEmpetyObject:function(e){Object.keys(e).forEach((function(t){var n=e[t];if(n&&"object"===O(n)){var a=!0;Object.values(n).forEach((function(e){void 0!==e&&(a=!1)})),a&&delete e[t]}}))},save:function(){var e=this;this.$refs.confKeyForm.validate((function(t){t&&e.$refs.propertyForm.getFormData().then((function(t){t.name;var n=w(t,h),a=n;if(a.connectionSelector){var r=[],o={};e.confKeysProperties.default.forEach((function(e){!1===e.connection_related&&a[e.name]&&r.push(e.name)})),r.forEach((function(e){o[e]=t[e]})),a=j(j({},o),{},{connectionSelector:"".concat(e.row.name,".").concat(a.connectionSelector)})}e.removeEmpetyObject(a),e.addDataConfKey(e.nodeID,e.row.name,e.confKeyForm.name,a).then((function(){e.loadData(),e.isEdit?e.$Message.success(e.$t("common.editSuccess")):e.$Message.success(e.$t("common.addSuccess")),e.modalVisible=!1,e.confKeyForm={}}))})).catch((function(){e.$Message.error(e.$t("common.fillContent"))}))}))},removeConfKey:function(e){var t=this,n=e.name;this.$Modal.confirm({title:this.$t("common.warning"),content:"".concat(this.$t("common.confirmDelete")," ").concat(n),onOk:function(){t.deleteDataConfKey(t.nodeID,t.row.name,n).then((function(){t.loadData()}))}})},handleVisibleChange:function(e){e||(this.isDetail=!1,this.confKeyForm={})},editConfKey:function(e){var t=this,n=e.name;this.loadDataDetail(this.nodeID,this.row.name).then((function(e){var a=e.data,r=a[n],o={};if(a[n].connectionSelector){var i=a[n].connectionSelector.split("."),c=b(i,2),s=c[0],u=c[1];Object(l["e"])(t.nodeID,s).then((function(e){var i=e.data,c=i[u];Object.keys(c).forEach((function(e){o[e]=c[e]})),t.confKeyForm=j(j({name:n},r),{},{connectionSelector:a[n].connectionSelector.split(".")[1]||""},o),t.isDetail=!1,t.modalVisible=!0,t.isEdit=!0}))}else t.confKeyForm=j({name:n},r),t.isDetail=!1,t.modalVisible=!0,t.isEdit=!0}))}}},x=k,K=(n("8a7a"),n("2877")),E=Object(K["a"])(x,u,d,!1,null,null,null),T=E.exports,I={name:"Configuration",mixins:[s["a"]],components:{TabsHead:o["a"]},data:function(){var e=this;this.$createElement;return{loading:!1,ConnectionssData:[],recordsCol:[{type:"expand",width:50,render:function(e,t){return e(T,{attrs:{row:t.row,configType:"connection"}})}},{title:this.$t("common.name"),width:120,key:"name"},{title:this.$t("common.description"),minWidth:220,render:function(t,n){var a=n.row.about.description;return t("p",[a[e.lang]])}},{title:this.$t("common.trial"),width:80,render:function(t,n){var a=n.row.about.trial?e.$t("common.yes"):e.$t("common.no");return t("p",[a])}},{title:this.$t("plugins.installed"),width:100,render:function(t,n){var a=n.row.about.installed?e.$t("common.yes"):e.$t("common.no");return t("p",[a])}},{title:this.$t("common.operations"),width:200,render:function(t,n){var a=n.row.about,r=a.helpUrl,o=a.installed,i=t("a",{attrs:{href:"javascript:;"},style:"margin-right:10px;",on:{click:function(){e.routeToInstallPage(n.row.name)}}},[e.$t("common.install")]);return t("div",[o?null:i,t("a",{attrs:{href:r[e.lang],target:"_blank",rel:"noopener"}},[e.$t("common.documentation")])])}}]}},created:function(){this.loadConnections()},computed:{lang:function(){return this.$store.state.lang}},methods:{loadConnections:function(){var e=this;this.loading=!0,Object(l["c"])(this.nodeID).then((function(t){e.ConnectionssData=t.data,e.loading=!1}))},routeToInstallPage:function(e){this.$router.push({name:"plugins",params:{id:this.nodeID},query:{fromPage:"stream"}});var t={fromType:"sources",pluginName:e};sessionStorage.setItem("installInfo",JSON.stringify(t))}}},P=I,F=Object(K["a"])(P,i,c,!1,null,null,null),N=F.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sources"},[n("Table",{attrs:{loading:e.loading,columns:e.recordsCol,data:e.sourcesData}})],1)},A=[],M={name:"Sources",mixins:[s["a"]],data:function(){var e=this;this.$createElement;return{loading:!1,fromStream:0,sourcesData:[],recordsCol:[{type:"expand",width:50,render:function(e,t){return e(T,{attrs:{row:t.row}})}},{title:this.$t("common.name"),width:120,key:"name"},{title:this.$t("common.description"),minWidth:220,render:function(t,n){var a=n.row.about.description;return t("p",[a[e.lang]])}},{title:this.$t("common.trial"),width:80,render:function(t,n){var a=n.row.about.trial?e.$t("common.yes"):e.$t("common.no");return t("p",[a])}},{title:this.$t("plugins.installed"),width:100,render:function(t,n){var a=n.row.about.installed?e.$t("common.yes"):e.$t("common.no");return t("p",[a])}},{title:this.$t("common.operations"),width:200,render:function(t,n){var a=n.row.about,r=a.helpUrl,o=a.installed,i=t("a",{attrs:{href:"javascript:;"},style:"margin-right:10px;",on:{click:function(){e.routeToInstallPage(n.row.name)}}},[e.$t("common.install")]);return t("div",[o?null:i,t("a",{attrs:{href:r[e.lang],target:"_blank",rel:"noopener"}},[e.$t("common.documentation")])])}}]}},created:function(){var e=this.$route.query.oper;"edit"===e&&(this.fromStream=JSON.parse(sessionStorage.getItem("streamForm")).name),this.loadSources()},computed:{lang:function(){return this.$store.state.lang},accessTitle:function(){var e=this.$route.query.oper,t={view:this.$t("common.view"),create:this.$t("common.create"),edit:this.$t("common.edit")};return t[e]}},methods:{loadSources:function(){var e=this;this.loading=!0,Object(f["e"])(this.nodeID).then((function(t){e.sourcesData=t.data,e.loading=!1}))},routeToInstallPage:function(e){this.$router.push({name:"plugins",params:{id:this.nodeID},query:{fromPage:"stream"}});var t={fromType:"sources",pluginName:e};sessionStorage.setItem("installInfo",JSON.stringify(t))}}},B=M,q=Object(K["a"])(B,V,A,!1,null,null,null),z=q.exports,H=n("101e"),R={name:"Configuration",mixins:[H["a"]],data:function(){var e=["sourceConfig","connection"];return{tabArr:e,name:e[0]}},computed:{hiddenTabMap:function(){var e;return(null===(e=this.$store.state.nodeMenuHiddenSettingMap)||void 0===e?void 0:e.configuration)||{}}},components:{TabsHead:o["a"],Connections:N,Sources:z},methods:{countDefaultActiveTab:function(){var e=this,t=Object.keys(this.hiddenTabMap).filter((function(t){return e.hiddenTabMap[t]})),n=this.tabArr.filter((function(e){return!t.includes(e)}));this.name=n[0]}},created:function(){this.countDefaultActiveTab()}},U=R,J=(n("b52e"),Object(K["a"])(U,a,r,!1,null,null,null));t["default"]=J.exports},b52e:function(e,t,n){"use strict";n("b54c")},b54c:function(e,t,n){},ebec:function(e,t,n){"use strict";n("22bf")},ed50:function(e,t,n){}}]);