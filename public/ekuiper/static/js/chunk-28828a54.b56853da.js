(window["webpackJsonp_eKuiper"]=window["webpackJsonp_eKuiper"]||[]).push([["chunk-28828a54"],{3661:function(e,t,a){"use strict";a.r(t);var r,o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"stream-details"},[a("div",{staticClass:"page-header"},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:e.getPathForKuiperPage("/nodes/"+e.nodeID+"/source")}},[e._v(" "+e._s(this.$t("streams.source"))+" ")]),a("BreadcrumbItem",[e._v(e._s(e.accessTitle))])],1),"create"===e.accessType?a("div",{staticClass:"mode-swtich"},[a("label",{attrs:{for:""}},[e._v(e._s(e.isTextMode?e.$t("rules.textMode"):e.$t("rules.visualizationMode")))]),a("i-switch",{on:{change:e.handleClearValidate},model:{value:e.isTextMode,callback:function(t){e.isTextMode=t},expression:"isTextMode"}})],1):e._e()],1),a("Card",{staticClass:"detail",attrs:{shadow:""}},[e.isView?a("div",{staticClass:"view-form"},[e.viewLoading?a("Spin",{attrs:{fix:""}}):e._e(),a("Row",[a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"view-item"},[a("label",{staticClass:"view-item--label"},[e._v(e._s(e.$t("streams.streamName"))+": ")]),a("span",[e._v(e._s(e.viewForm.name))])]),a("div",{staticClass:"view-item"},[a("label",{staticClass:"view-item--label"},[e._v(e._s(e.$t("streams.streamFields"))+": ")]),a("FieldsTable",{staticClass:"view-item--table",attrs:{isDetail:"view"===e.accessType,disabled:""},model:{value:e.viewForm.streamFields,callback:function(t){e.$set(e.viewForm,"streamFields",t)},expression:"viewForm.streamFields"}})],1),e.viewForm.options?e._l(Object.keys(e.viewForm.options),(function(t,r){return a("div",{key:r,staticClass:"view-item"},[a("label",{staticClass:"view-item--label"},[e._v(e._s(t)+": ")]),a("span",[e._v(e._s(e.viewForm.options[t]))])])})):e._e()],2)],1)],1):a("Form",{ref:"record",attrs:{model:e.createForm,rules:e.rules}},[a("Row",[e.isTextMode?a("i-col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:"SQL",prop:"sql"}},[a("div",{staticClass:"monaco-container sql"},[a("Monaco",{ref:"sqlData",attrs:{id:"sql-data",lang:"sql",backgroud:"#282a36",provider:e.dataTypeProvider},model:{value:e.createForm.sql,callback:function(t){e.$set(e.createForm,"sql",t)},expression:"createForm.sql"}})],1)])],1):[a("i-col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:e.$t("streams.streamName"),prop:"name"}},[a("i-input",{attrs:{size:"large",disabled:"edit"===e.accessType},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1)],1),a("i-col",{attrs:{span:"16"}},[a("i-checkbox",{model:{value:e.isSchemaStream,callback:function(t){e.isSchemaStream=t},expression:"isSchemaStream"}},[e._v(e._s(e.$t("streams.isSchemaType")))])],1),e.isSchemaStream?a("i-col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:e.$t("streams.streamFields"),prop:"streamFields"}},[a("Tooltip",{staticClass:"fields-table--tip",attrs:{"max-width":350,transfer:"",content:e.$t("streams.schemaTip"),placement:"right"}},[a("Icon",{attrs:{type:"md-help-circle"}})],1),a("FieldsTable",{attrs:{isDetail:"edit"===e.accessType,streamFormat:e.createForm.format},model:{value:e.createForm.streamFields,callback:function(t){e.$set(e.createForm,"streamFields",t)},expression:"createForm.streamFields"}})],1)],1):e._e(),a("i-col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:e.$t("streams.streamType"),prop:"streamType"}},[e.sourceInfo.helpUrl?a("a",{attrs:{href:e.i18nLabel(e.sourceInfo.helpUrl),target:"_blank",rel:"noopener"}},[a("Icon",{attrs:{type:"md-document"}}),e._v(" "+e._s(e.$t("common.documentation"))+" ")],1):e._e(),a("ConfKeyTypesSeletor",{attrs:{category:"sources"},on:{onChange:e.changeStreamType,onSelected:e.handleSourceSelected},model:{value:e.createForm.streamType,callback:function(t){e.$set(e.createForm,"streamType",t)},expression:"createForm.streamType"}})],1)],1),e.dataSourceInfo.label?a("i-col",{attrs:{span:"16"}},[a("FormItem",{attrs:{prop:"dataSource"}},[a("template",{slot:"label"},[a("span",[e._v(e._s(e.i18nLabel(e.dataSourceInfo.label)))])]),e.dataSourceInfo.hint?a("Tooltip",{staticClass:"field-help",attrs:{"max-width":"250px",transfer:"",placement:"top",content:e.i18nLabel(e.dataSourceInfo.hint)}},[e.dataSourceInfo.hint?a("Icon",{attrs:{type:"md-help-circle"}}):e._e()],1):e._e(),a("i-input",{attrs:{size:"large"},model:{value:e.createForm.dataSource,callback:function(t){e.$set(e.createForm,"dataSource",t)},expression:"createForm.dataSource"}})],2)],1):e._e(),a("i-col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:e.$t("configuration.confKey"),prop:"confKey"}},[e.createForm.confKey?a("Button",{staticClass:"top-create--btn action-add-btn",attrs:{icon:"ios-create-outline",type:"primary",ghost:""},on:{click:function(t){return e.showConfKeyModel("edit")}}},[e._v(" "+e._s(e.$t("configuration.editConfKey"))+" ")]):e._e(),e.createForm.streamType?a("Button",{staticClass:"top-create--btn action-add-btn",attrs:{icon:"ios-add",type:"primary",ghost:""},on:{click:function(t){return e.showConfKeyModel()}}},[e._v(" "+e._s(e.$t("configuration.addConfKey"))+" ")]):e._e(),a("ConfKeysSelector",{ref:"confKeysSelectorRef",attrs:{category:"sources",type:e.createForm.streamType},on:{"on-open-change":e.handleConfKeyOpen},model:{value:e.createForm.confKey,callback:function(t){e.$set(e.createForm,"confKey",t)},expression:"createForm.confKey"}})],1)],1),a("i-col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:e.$t("streams.format"),prop:"format"}},[a("Select",{attrs:{size:"large"},model:{value:e.createForm.format,callback:function(t){e.$set(e.createForm,"format",t)},expression:"createForm.format"}},e._l(e.formatList,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+" ")])})),1)],1)],1),a("i-col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:e.$t("streams.shared"),prop:"format"}},[a("Radio-group",{model:{value:e.createForm.shared,callback:function(t){e.$set(e.createForm,"shared",t)},expression:"createForm.shared"}},[a("Radio",{attrs:{label:"true"}}),a("Radio",{attrs:{label:"false"}})],1)],1)],1),"protobuf"===e.createForm.format?a("i-col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:e.$t("streams.schemaName"),prop:"format"}},[a("Select",{attrs:{size:"large"},model:{value:e.createForm.schemaName,callback:function(t){e.$set(e.createForm,"schemaName",t)},expression:"createForm.schemaName"}},e._l(e.schemaNameList,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+" ")])})),1)],1)],1):e._e(),"protobuf"===e.createForm.format?a("i-col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:e.$t("streams.schemaMessage"),prop:"format"}},[a("i-input",{attrs:{size:"large"},model:{value:e.createForm.schemaMessage,callback:function(t){e.$set(e.createForm,"schemaMessage",t)},expression:"createForm.schemaMessage"}})],1)],1):e._e()],a("i-col",{staticClass:"oper-col",attrs:{span:"16"}},[a("FormItem",[e.isView?e._e():a("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("common.submit")))]),a("Button",{style:e.isView?"":"margin-left: 8px",attrs:{type:"text"},on:{click:e.goBack}},[e._v(" "+e._s(e.$t("common.cancel"))+" ")])],1)],1)],2)],1)],1),e.createForm.streamType?a("ConfKeyPeopertiesModal",{ref:"confKeyPropertiesRef",attrs:{modalVisible:e.confKeyPropertiesVisible,title:e.confKeyModalTitle,category:"sources",type:e.createForm.streamType,confKeyName:e.createForm.confKey,isEdit:e.isEditConfKey},on:{"update:modalVisible":function(t){e.confKeyPropertiesVisible=t},"update:modal-visible":function(t){e.confKeyPropertiesVisible=t},submit:e.submitedConfKey}}):e._e()],1)},n=[],s=a("a34a"),i=a.n(s),c=a("724c"),l=a("510b"),m=a("4041"),u=a("9146"),d=a("71cc"),f=a("7d99"),p=a("563e"),y=a("94dc"),h=a("ceb0"),v=a("3d58"),b=a("5a81"),F=a("14e2"),S=a("40ee"),g=a("d870");function T(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){$(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function $(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I(e,t,a,r,o,n,s){try{var i=e[n](s),c=i.value}catch(l){return void a(l)}i.done?t(c):Promise.resolve(c).then(r,o)}function O(e){return function(){var t=this,a=arguments;return new Promise((function(r,o){var n=e.apply(t,a);function s(e){I(n,r,o,s,i,"next",e)}function i(e){I(n,r,o,s,i,"throw",e)}s(void 0)}))}}function C(e){return M(e)||E(e)||K(e)||k()}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function K(e,t){if(e){if("string"===typeof e)return D(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?D(e,t):void 0}}function E(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function M(e){if(Array.isArray(e))return D(e)}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var x={name:"StreamDetails",components:{Monaco:u["a"],FieldsTable:p["a"],ConfKeyPeopertiesModal:F["a"],ConfKeyTypesSeletor:S["a"],ConfKeysSelector:g["a"]},mixins:[c["a"],m["a"]],data:function(){return{accessType:this.$route.query.oper,isTextMode:!1,isSchemaStream:!1,viewLoading:!1,viewForm:{},formatList:["json","binary","protobuf"],sourceInfo:{},dataSourceInfo:{default:"",hint:null,label:null},createForm:{name:"",streamType:"mqtt",confKey:"",dataSource:"",format:"json",shared:"false",schemaName:"",sql:""},rules:{name:[{required:!0,message:this.$t("common.fillContent")},{validator:this.validateStreamName,trigger:"blur"}],sql:[{required:!0,message:this.$t("common.fillContent")}],streamFields:[{required:!0,message:this.$t("common.fillContent")}]},schemaNameList:[],confKeyPropertiesVisible:!1,isEditConfKey:!1}},computed:{isView:function(){var e=this.$route.query.oper;return"view"===e},accessTitle:function(){var e=this.$route.query.oper,t={view:this.$t("common.view"),create:this.$t("common.create"),edit:this.$t("common.edit")};return t[e]},dataTypeProvider:function(){return[].concat(C(h["a"].sqlKeyWords),C(y["a"]))},confKeyModalTitle:function(){return this.isEditConfKey?this.$t("configuration.editSourceConfKey"):this.$t("configuration.addSourceConfKey")}},beforeRouteEnter:function(e,t,a){a((function(e){var a="sources"===t.name,r=sessionStorage.getItem("streamForm"),o=sessionStorage.getItem("isSchemaStream");a&&r&&o?(e.createForm=JSON.parse(r),e.isSchemaStream="true"===o):"create"!==e.accessType&&e.loadDetail(),setTimeout((function(){sessionStorage.removeItem("streamForm"),sessionStorage.removeItem("isSchemaStream")}),2e3)}))},created:function(){this.init(),this.getSchemas()},methods:{getPathForKuiperPage:l["b"],init:function(){"create"===this.accessType&&this.changeStreamType(this.createForm.streamType)},validateStreamName:function(e,t,a){return t?/\s/.test(t)?a(new Error(this.$t("streams.streamNameSpace"))):(a(),!0):a(new Error(this.$t("common.fillContent")))},getSchemas:function(){var e=this;Object(b["c"])(this.nodeID).then((function(t){e.schemaNameList=t.data}))},parseStremFields:function(e){var t=e.StreamFields,a=function e(t){var a={};return t.forEach((function(t){"string"===typeof t.FieldType?a[t.Name]=t.FieldType:"struct"===t.FieldType.Type?a[t.Name]=e(t.FieldType.Fields):"array"===t.FieldType.Type&&(a[t.Name]="".concat(t.FieldType.Type,"(").concat(t.FieldType.ElementType,")"))})),a};return a(t)},loadDetail:function(){var e=this,t=this.$route.params.streamName;this.viewModalVisible=!0,this.viewLoading=!0,Object(d["e"])(this.nodeID,t).then((function(t){var a=t.data;if("view"===e.accessType){var r={};a.StreamFields&&(r=e.parseStremFields(a)),e.viewForm={name:a.Name,options:a.Options,streamFields:r}}else{var o=a.Name,n=a.Options,s=a.StreamFields,i=n.datasource,c=n.confKey,l=n.format,m=n.type,u=n.shared,d=n.strictValidation;e.createForm={name:o,dataSource:i,confKey:c,format:l,streamType:m,shared:u?String(u):"false",strictValidation:d},s?e.createForm.streamFields=e.parseStremFields(a):e.isSchemaStream=!1}e.viewLoading=!1})).then((function(){e.changeStreamType(e.createForm.streamType,e.createForm.dataSource)})).catch((function(){e.viewLoading=!1}))},handleConfigSources:function(){sessionStorage.setItem("streamForm",JSON.stringify(this.createForm)),sessionStorage.setItem("isSchemaStream",this.isSchemaStream),this.$router.push({path:"/nodes/".concat(this.nodeID,"/configuration"),query:{oper:this.accessType}})},changeStreamType:function(e,t){var a=this;return O(i.a.mark((function r(){var o,n,s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=4;break}return a.createForm.dataSource="",a.dataSourceInfo={},r.abrupt("return",Promise.resolve());case 4:return r.prev=4,o={nodeID:a.nodeID,name:e},r.next=8,Object(f["f"])("sources",o);case 8:return n=r.sent,s=n.data.dataSource,a.dataSourceInfo=s?_({},s):{},a.createForm.dataSource=t||(null===s||void 0===s?void 0:s.default)||"",r.abrupt("return",Promise.resolve(n));case 15:return r.prev=15,r.t0=r["catch"](4),a.createForm.dataSource="",a.dataSourceInfo={},r.abrupt("return",Promise.reject(r.t0));case 20:case"end":return r.stop()}}),r,null,[[4,15]])})))()},handleSourceSelected:function(e){this.sourceInfo=e?e.about:{}},handleConfKeyOpen:function(e){!this.createForm.streamType&&e&&this.$Message.warning(this.$t("streams.typeFirst"))},showConfKeyModel:function(e){this.isEditConfKey="edit"===e,this.confKeyPropertiesVisible=!0},submitedConfKey:function(e){var t=e.name;this.$refs.confKeysSelectorRef.reload(t)},save:function(){var e=this;this.$refs.record.validate((function(t){if(t){var a={sql:""};if(e.isTextMode)a.sql=e.createForm.sql;else{var o=e.createForm,n=o.name,s=o.streamFields,i=o.confKey,c=o.format,l=o.dataSource,m=o.streamType,u=o.shared,f=o.schemaName,p=o.schemaMessage,y="CREATE STREAM ".concat(n),h=s||"()",b=Object(v["b"])(_({DATASOURCE:l,FORMAT:c,CONF_KEY:i,TYPE:m,SHARED:u},f&&p&&{SCHEMAID:"".concat(f,".").concat(p)}));a.sql=Object(v["a"])(r||(r=T(["\n              ","\n              ","\n              ","\n          "])),y,h,b)}"create"===e.accessType?Object(d["a"])(e.nodeID,a).then((function(t){201===t.status&&"Created"===t.statusText?e.$Message.success(t.data):e.$Message.success(e.$t("common.addSuccess")),e.goBack()})):Object(d["d"])(e.nodeID,e.createForm.name,a).then((function(){e.$Message.success(e.$t("common.editSuccess")),e.goBack()}))}}))},handleClearValidate:function(){var e=this;setTimeout((function(){e.$refs.record.resetFields()}),1e3)},routeToInstallPage:function(e){this.$router.push({name:"extension",params:{id:this.nodeID},query:{fromPage:"stream"}});var t={fromType:"sources",pluginName:e};sessionStorage.setItem("installInfo",JSON.stringify(t))},goBack:function(){this.$router.push({name:"source",params:{id:this.nodeID}})}}},j=x,A=(a("69cc"),a("2877")),P=Object(A["a"])(j,o,n,!1,null,null,null);t["default"]=P.exports},"3d58":function(e,t,a){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}a.d(t,"b",(function(){return o}));var o=function(e){var t="WITH (",a=Object.keys(e);return a.forEach((function(a){e[a]&&(t+="".concat(a,'="').concat(e[a],'", '))})),t+=");",t};t["a"]=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),o=1;o<t;o++)a[o-1]=arguments[o];var n=function e(t,a){var o="",n=Object.keys(t);n.forEach((function(a,s){if("object"===r(t[a])){var i=e(t[a],!0);o+="".concat(a," ").concat(i)}else o+="".concat(a," ").concat(t[a]);s+1!==n.length&&(o+=", ")}));var s="(\n      ".concat(o,"\n    )");return a?"struct".concat(s):s},s="";return e.forEach((function(e,t){var o=a[t];"object"===r(o)&&(o=n(o)),e&&o&&(s+="".concat(e).concat(o))})),s+=e[e.length-1],s}},"563e":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fields-table"},[e.disabled?e._e():a("Button",{staticClass:"top-create--btn action-add-btn",attrs:{icon:"md-add",type:"primary",ghost:"",disabled:e.onlyOneField},on:{click:e.showModal}},[e._v(" "+e._s(e.$t("common.add"))+" ")]),a("Table",{attrs:{"row-key":"id",columns:e.structCol,data:e.data},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.row,o=t.index;return""===r.name||e.disabled?void 0:["struct"===r.type?a("Button",{staticStyle:{"margin-right":"8px"},attrs:{shape:"circle",type:"primary",size:"small",ghost:""},on:{click:function(t){return e.showModal(r)}}},[e._v(" "+e._s(e.$t("common.add"))+" ")]):e._e(),a("Button",{attrs:{shape:"circle",type:"error",size:"small",ghost:""},on:{click:function(t){return e.removeField(r,o)}}},[e._v(" "+e._s(e.$t("common.delete"))+" ")])]}}],null,!0)}),a("Modal",{attrs:{"class-name":"action-modal--view view-form",title:e.$t("streams.addField"),width:650,"mask-closable":!1},on:{"on-visible-change":e.handleVisibleChange},model:{value:e.viewModalVisible,callback:function(t){e.viewModalVisible=t},expression:"viewModalVisible"}},[e.viewModalVisible?a("Form",{ref:"fieldForm",attrs:{model:e.fieldForm,rules:e.fieldRule}},[a("Row",{attrs:{gutter:20}},[a("i-col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("common.name"),prop:"name"}},[a("i-input",{attrs:{size:"large"},model:{value:e.fieldForm.name,callback:function(t){e.$set(e.fieldForm,"name",t)},expression:"fieldForm.name"}})],1)],1),a("i-col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("common.type"),prop:"type"}},[a("Select",{attrs:{size:"large"},model:{value:e.fieldForm.type,callback:function(t){e.$set(e.fieldForm,"type",t)},expression:"fieldForm.type"}},e._l(e.typeList,(function(t,r){return a("Option",{key:r,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1),"array"===e.fieldForm.type?a("i-col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("streams.arrayType"),prop:"arrayType"}},[a("Select",{attrs:{size:"large"},model:{value:e.fieldForm.arrayType,callback:function(t){e.$set(e.fieldForm,"arrayType",t)},expression:"fieldForm.arrayType"}},e._l(e.arrayTypeList,(function(t,r){return a("Option",{key:r,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1):e._e()],1)],1):e._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(t){e.viewModalVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),a("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("common.submit")))])],1)],1)],1)},o=[],n=function(){return Math.random().toString(16).substr(2,8)},s=n,i={name:"FieldsTable",model:{prop:"value",event:"update"},props:{value:{required:!0},isDetail:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},streamFormat:{type:String,default:""}},data:function(){return{viewModalVisible:!1,onlyOneField:!1,fieldForm:{},fieldRule:{name:[{required:!0,message:this.$t("common.fillContent")}],type:[{required:!0,message:this.$t("common.fillContent")}],arrayType:[{required:!0,message:this.$t("common.fillContent")}]},structCol:[{title:this.$t("common.name"),key:"name",tree:!0},{title:this.$t("common.type"),key:"type"},{title:this.$t("common.operations"),slot:"action",width:250}],parentID:"",data:[],typeList:["bigint","float","string","datetime","boolean","array","struct","bytea"],arrayTypeList:["bigint","float","string","datetime","boolean","struct","bytea"]}},watch:{data:{deep:!0,handler:function(e){this.onlyOneField="binary"===this.streamFormat&&1===e.length}},value:{deep:!0,handler:function(e){if(e){var t=0===Object.keys(e).length;t||this.parseToTableData(e)}}},streamFormat:function(e){this.onlyOneField="binary"===e&&1===this.data.length}},methods:{showModal:function(e){e&&(this.parentID=e.id),this.viewModalVisible=!0},handleVisibleChange:function(e){e?this.fieldForm={}:this.parentID=""},parseFormData:function(e){var t=e.name,a=e.type,r=e.arrayType,o={id:s(),name:t,type:a};return"array"===a?o.type="array(".concat(r,")"):"struct"===a&&(o.children=[],o._showChildren=!0),o},findDataAction:function(e,t,a){var r=function t(r){for(var o=0;o<r.length;o+=1){var n=r[o];if(n.id===e){a(n,r,o);break}n.children&&t(n.children)}};r(t)},insertChildData:function(e,t,a){this.findDataAction(e,t,(function(e){e.children.push(a)}))},removeField:function(e){this.findDataAction(e.id,this.data,(function(e,t,a){t.splice(a,1)})),this.parseToModelValue(this.data)},save:function(){var e=this;this.$refs.fieldForm.validate((function(t){if(t){var a=e.parseFormData(e.fieldForm);e.parentID?e.insertChildData(e.parentID,e.data,a):e.data.push(a),e.parseToModelValue(e.data),e.viewModalVisible=!1}}))},parseToModelValue:function(){var e=function e(t){var a={};return t.forEach((function(t){t.children?a[t.name]=e(t.children):a[t.name]=t.type})),a},t=e(this.data);this.$emit("update",t)},parseToTableData:function(e){this.data=this.deconstructData(e)},deconstructData:function(e){var t=this;return Object.keys(e).map((function(a){var r=e[a];if("string"!==typeof r){var o=t.deconstructData(r);return{id:s(),_showChildren:!0,name:a,type:"struct",children:o}}return{id:s(),name:a,type:r}}))}}},c=i,l=a("2877"),m=Object(l["a"])(c,r,o,!1,null,null,null);t["a"]=m.exports},"69cc":function(e,t,a){"use strict";a("f5fc")},"71cc":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return l}));var r=a("751a"),o=a("510b"),n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].get(Object(o["c"])(e,"/streams"),{params:t})},s=function(e,t){return r["a"].get(Object(o["c"])(e,"/streams/".concat(t)))},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].post(Object(o["c"])(e,"/streams"),t)},c=function(e,t){return r["a"].delete(Object(o["c"])(e,"/streams/".concat(t)))},l=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r["a"].put(Object(o["c"])(e,"/streams/".concat(t)),a)}},"94dc":function(e,t,a){"use strict";var r=a("12cb"),o=a("4360"),n=o["a"].state.lang,s=r["default"][n],i=[],c=["bigint","float","string","datetime","boolean","array","struct"];c.forEach((function(e){var t={name:e,detail:"Kuiper ".concat(s.sql.dataType),type:"Field",documentation:s.sql[e],valueType:""};i.push(t)})),t["a"]=i},ceb0:function(e,t,a){"use strict";var r=a("12cb"),o=a("4360"),n=o["a"].state.lang,s=r["default"][n],i=[],c=[],l=["CREATE","WITH","DATASOURCE","KEY","FORMAT","CONF_KEY","TYPE","STRICT_VALIDATION","STREAM","STREAMS","TABLE","TABLES"],m=["SELECT","FROM","JOIN","LEFT","INNER","ON","WHERE","GROUP","ORDER","HAVING","BY","ASC","DESC","AND","OR","AS","RROP","EXPLAIN","DESCRIBE","SHOW","WITH","BIGINT","FLOAT","STRING","DATETIME","BOOLEAN","ARRAY","STRUCT","TRUE","FALSE","DD","HH","MI","SS","MS"],u=function(e,t){e.forEach((function(e){var a={name:e,type:"Keyword",detail:"SQL ".concat(s.sql.keyWord),documentation:""};t.push(a)}))};u(l,i),u(m,c),t["a"]={sqlKeyWords:i,ruleSqlKeyWords:c}},d870:function(e,t,a){"use strict";var r=a("a34a"),o=a.n(r),n=a("f065"),s=a("724c"),i=a("7d99");function c(e,t,a,r,o,n,s){try{var i=e[n](s),c=i.value}catch(l){return void a(l)}i.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,o){var n=e.apply(t,a);function s(e){c(n,r,o,s,i,"next",e)}function i(e){c(n,r,o,s,i,"throw",e)}s(void 0)}))}}var m,u,d={name:"ConfKeySelector",extends:n["a"],props:{category:{type:String,default:"sources"},type:{type:String,default:""}},mixins:[s["a"]],watch:{type:{immediate:!0,handler:function(e){e?this.init():(this.myValue="",this.list=[])}}},created:function(){},methods:{init:function(){var e=this;return l(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getList();case 2:e.list=t.sent,a=e.list.find((function(t){return t===e.myValue})),a||(e.myValue="");case 5:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return new Promise((function(t,a){if(e.type){var r={nodeID:e.nodeID,name:e.type};Object(i["g"])(e.category,r).then((function(e){var a=e.data,r=Object.keys(a);t(r)})).catch((function(e){a(e)}))}else t([])}))}}},f=d,p=a("2877"),y=Object(p["a"])(f,m,u,!1,null,null,null);t["a"]=y.exports},f5fc:function(e,t,a){}}]);